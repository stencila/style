function e(e,n){if(!e.hasOwnProperty(n))throw new Error("Undefined state "+n+" in simple mode")}function n(n,t){(n.next||n.push)&&e(t,n.next||n.push),this.regex=function(e){if(!e)return/(?:)/;var n="";return e instanceof RegExp?(e.ignoreCase&&(n="i"),e=e.source):e=String(e),new RegExp("^(?:"+e+")",n)}(n.regex),this.token=function(e){if(!e)return null;if(e.apply)return e;if("string"==typeof e)return e.replace(/\./g," ");for(var n=[],t=0;t<e.length;t++)n.push(e[t]&&e[t].replace(/\./g," "));return n}(n.token),this.data=n}function t(e){return function(n,t){if(t.pending){var r=t.pending.shift();return 0==t.pending.length&&(t.pending=null),n.pos+=r.text.length,r.token}for(var o=e[t.state],l=0;l<o.length;l++){var s=o[l],u=(!s.data.sol||n.sol())&&n.match(s.regex);if(u){s.data.next?t.state=s.data.next:s.data.push?((t.stack||(t.stack=[])).push(t.state),t.state=s.data.push):s.data.pop&&t.stack&&t.stack.length&&(t.state=t.stack.pop()),s.data.indent&&t.indent.push(n.indentation()+n.indentUnit),s.data.dedent&&t.indent.pop();var i=s.token;if(i&&i.apply&&(i=i(u)),u.length>2&&s.token&&"string"!=typeof s.token){t.pending=[];for(var a=2;a<u.length;a++)u[a]&&t.pending.push({text:u[a],token:s.token[a-1]});return n.backUp(u[0].length-(u[1]?u[1].length:0)),i[0]}return i&&i.join?i[0]:i}}return n.next(),null}}function r(e,n){return function(t,r){if(null==t.indent||n.dontIndentStates&&n.doneIndentState.indexOf(t.state)>-1)return null;var o=t.indent.length-1,l=e[t.state];e:for(;;){for(var s=0;s<l.length;s++){var u=l[s];if(u.data.dedent&&!1!==u.data.dedentIfLineStart){var i=u.regex.exec(r);if(i&&i[0]){o--,(u.next||u.push)&&(l=e[u.next||u.push]),r=r.slice(i[0].length);continue e}}}break}return o<0?0:t.indent[o]}}var o="from",l=new RegExp("^(\\s*)\\b("+o+")\\b","i"),s=["run","cmd","entrypoint","shell"],u=new RegExp("^(\\s*)("+s.join("|")+")(\\s+\\[)","i"),i="expose",a=new RegExp("^(\\s*)("+i+")(\\s+)","i"),g="("+[o,i].concat(s).concat(["arg","from","maintainer","label","env","add","copy","volume","user","workdir","onbuild","stopsignal","healthcheck","shell"]).join("|")+")";const x=function(o){e(o,"start");var l={},s=o.languageData||{},u=!1;for(var i in o)if(i!=s&&o.hasOwnProperty(i))for(var a=l[i]=[],g=o[i],x=0;x<g.length;x++){var k=g[x];a.push(new n(k,o)),(k.indent||k.dedent)&&(u=!0)}return{startState:function(){return{state:"start",pending:null,indent:u?[]:null}},copyState:function(e){var n={state:e.state,pending:e.pending,indent:e.indent&&e.indent.slice(0)};return e.stack&&(n.stack=e.stack.slice(0)),n},token:t(l),indent:r(l,s),languageData:s}}({start:[{regex:/^\s*#.*$/,sol:!0,token:"comment"},{regex:l,token:[null,"keyword"],sol:!0,next:"from"},{regex:new RegExp("^(\\s*)"+g+"(\\s*)(#.*)?$","i"),token:[null,"keyword",null,"error"],sol:!0},{regex:u,token:[null,"keyword",null],sol:!0,next:"array"},{regex:a,token:[null,"keyword",null],sol:!0,next:"expose"},{regex:new RegExp("^(\\s*)"+g+"(\\s+)","i"),token:[null,"keyword",null],sol:!0,next:"arguments"},{regex:/./,token:null}],from:[{regex:/\s*$/,token:null,next:"start"},{regex:/(\s*)(#.*)$/,token:[null,"error"],next:"start"},{regex:/(\s*\S+\s+)(as)/i,token:[null,"keyword"],next:"start"},{token:null,next:"start"}],single:[{regex:/(?:[^\\']|\\.)/,token:"string"},{regex:/'/,token:"string",pop:!0}],double:[{regex:/(?:[^\\"]|\\.)/,token:"string"},{regex:/"/,token:"string",pop:!0}],array:[{regex:/\]/,token:null,next:"start"},{regex:/"(?:[^\\"]|\\.)*"?/,token:"string"}],expose:[{regex:/\d+$/,token:"number",next:"start"},{regex:/[^\d]+$/,token:null,next:"start"},{regex:/\d+/,token:"number"},{regex:/[^\d]+/,token:null},{token:null,next:"start"}],arguments:[{regex:/^\s*#.*$/,sol:!0,token:"comment"},{regex:/"(?:[^\\"]|\\.)*"?$/,token:"string",next:"start"},{regex:/"/,token:"string",push:"double"},{regex:/'(?:[^\\']|\\.)*'?$/,token:"string",next:"start"},{regex:/'/,token:"string",push:"single"},{regex:/[^#"']+[\\`]$/,token:null},{regex:/[^#"']+$/,token:null,next:"start"},{regex:/[^#"']+/,token:null},{token:null,next:"start"}],languageData:{commentTokens:{line:"#"}}});export{x as dockerFile}