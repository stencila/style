var __awaiter=this&&this.__awaiter||function(e,s,t,i){function o(e){return e instanceof t?e:new t((function(s){s(e)}))}return new(t||(t=Promise))((function(t,n){function c(e){try{l(i.next(e))}catch(s){n(s)}}function a(e){try{l(i["throw"](e))}catch(s){n(s)}}function l(e){e.done?t(e.value):o(e.value).then(c,a)}l((i=i.apply(e,s||[])).next())}))};var __generator=this&&this.__generator||function(e,s){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,o,n,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(e){return function(s){return l([e,s])}}function l(c){if(i)throw new TypeError("Generator is already executing.");while(t)try{if(i=1,o&&(n=c[0]&2?o["return"]:c[0]?o["throw"]||((n=o["return"])&&n.call(o),0):o.next)&&!(n=n.call(o,c[1])).done)return n;if(o=0,n)c=[c[0]&2,n.value];switch(c[0]){case 0:case 1:n=c;break;case 4:t.label++;return{value:c[1],done:false};case 5:t.label++;o=c[1];c=[0];continue;case 7:c=t.ops.pop();t.trys.pop();continue;default:if(!(n=t.trys,n=n.length>0&&n[n.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){t.label=c[1];break}if(c[0]===6&&t.label<n[1]){t.label=n[1];n=c;break}if(n&&t.label<n[2]){t.label=n[2];t.ops.push(c);break}if(n[2])t.ops.pop();t.trys.pop();continue}c=s.call(e,t)}catch(a){c=[6,a];o=0}finally{i=n=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true}}};System.register(["./p-c4c9d738.system.js","./p-291b7cf4.system.js"],(function(e){"use strict";var s,t,i,o,n,c,a,l;return{setters:[function(e){s=e.h;t=e.r;i=e.H;o=e.a},function(e){n=e.H;c=e.X;a=e.J;l=e.c}],execute:function(){var r=/itemtype=".+?"/;var d=function(e){if(typeof e==="string"&&r.test(e)){return s("span",{innerHTML:e})}if(e instanceof HTMLElement){return s("span",{innerHTML:e.outerHTML})}if(n(e)){var t=typeof e==="string"||typeof e==="number"?e:JSON.stringify(e);return s("pre",null,s("output",null,t))}else if(c("CodeTypes",e)){return s("pre",null,s("output",null,e.text))}else if(a("ImageObject",e)){return s("stencila-image-object",{image:e})}else if(a("Datatable",e)){return s("stencila-data-table",{table:e})}return s("span",null,JSON.stringify(e))};var u=function(e){var t=e.node;return s("span",{class:"output"},t!==undefined?d(t):null)};var p=".sc-stencila-code-expression-default-h,stencila-code-expression.sc-stencila-code-expression-default{--background:var(--color-stock,#fff);--background-buttons:var(--color-neutral-50,#edf2f7);--background-editor:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0)}.sc-stencila-code-expression-default-h,stencila-code-expression.sc-stencila-code-expression-default{-ms-flex-align:stretch;align-items:stretch;border-radius:.25rem;border-style:solid;border-width:1px;display:-ms-inline-flexbox;display:inline-flex;font-size:.875rem;line-height:1.25rem;line-height:1;padding:0;vertical-align:text-bottom}.sc-stencila-code-expression-default-h,stencila-code-expression.sc-stencila-code-expression-default{background-color:var(--background);border-color:var(--border)}.sc-stencila-code-expression-default-h stencila-tooltip.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default stencila-tooltip.sc-stencila-code-expression-default{-ms-flex-align:stretch;align-items:stretch;display:-ms-inline-flexbox;display:inline-flex;line-height:1;overflow:hidden;padding:0;vertical-align:bottom}.sc-stencila-code-expression-default-h .actions.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .actions.sc-stencila-code-expression-default{background-color:var(--background-buttons);border-bottom-left-radius:.25rem;border-top-left-radius:.25rem;display:-ms-inline-flexbox;display:inline-flex;-ms-flex:0 1 auto;flex:0 1 auto;position:relative;white-space:nowrap}.sc-stencila-code-expression-default-h .text.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .text.sc-stencila-code-expression-default{background-color:var(--background-editor);color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline-block;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.75rem;line-height:1rem;line-height:1;min-width:0;overflow:hidden;padding:.25rem 0;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:width;transition-property:width;-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);white-space:nowrap;width:0}.sc-stencila-code-expression-default-h .output.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=output],.sc-stencila-code-expression-default-h [slot=output].sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .output.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=output],stencila-code-expression .sc-stencila-code-expression-default-s>[slot=output],stencila-code-expression.sc-stencila-code-expression-default [slot=output].sc-stencila-code-expression-default{background-color:#fff;background-color:var(--color-stock,#fff);border-style:none;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline-block;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.75rem;line-height:1rem;line-height:1;padding:.25rem .5rem .25rem .25rem}.sc-stencila-code-expression-default-h .output.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=output],.sc-stencila-code-expression-default-h [slot=output].sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .output.sc-stencila-code-expression-default,stencila-code-expression .sc-stencila-code-expression-default-s>[slot=output],stencila-code-expression.sc-stencila-code-expression-default [slot=output].sc-stencila-code-expression-default{background-color:var(--background);-webkit-transition:padding .12s ease-out;transition:padding .12s ease-out}.sc-stencila-code-expression-default-h .output.sc-stencila-code-expression-default stencila-icon.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=output] stencila-icon,.sc-stencila-code-expression-default-h [slot=output].sc-stencila-code-expression-default stencila-icon.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .output.sc-stencila-code-expression-default stencila-icon.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=output] stencila-icon,stencila-code-expression .sc-stencila-code-expression-default-s>[slot=output] stencila-icon,stencila-code-expression.sc-stencila-code-expression-default [slot=output].sc-stencila-code-expression-default stencila-icon.sc-stencila-code-expression-default{--height:1rem;height:1rem}.sc-stencila-code-expression-default-h .output.sc-stencila-code-expression-default stencila-icon.sc-stencila-code-expression-default svg.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=output] stencila-icon svg,.sc-stencila-code-expression-default-h [slot=output].sc-stencila-code-expression-default stencila-icon.sc-stencila-code-expression-default svg.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .output.sc-stencila-code-expression-default stencila-icon.sc-stencila-code-expression-default svg.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=output] stencila-icon svg,stencila-code-expression .sc-stencila-code-expression-default-s>[slot=output] stencila-icon svg,stencila-code-expression.sc-stencila-code-expression-default [slot=output].sc-stencila-code-expression-default stencila-icon.sc-stencila-code-expression-default svg.sc-stencila-code-expression-default{stroke:#ba8925;stroke:var(--color-warn-600,#ba8925);height:1rem}.sc-stencila-code-expression-default-h .slot.hidden.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .slot.hidden.sc-stencila-code-expression-default{display:none}.sc-stencila-code-expression-default-h .output.sc-stencila-code-expression-default>*.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .output.sc-stencila-code-expression-default>*.sc-stencila-code-expression-default{background-color:#fff;background-color:var(--color-stock,#fff);border-style:none;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline-block;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.75rem;line-height:1rem;line-height:1;margin:0;padding:0;white-space:normal}.sc-stencila-code-expression-default-h .divider.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .divider.sc-stencila-code-expression-default{fill:var(--background-buttons);-ms-flex-item-align:center;align-self:center;display:inline-block;max-height:1em;width:.5rem}.isCodeVisible.sc-stencila-code-expression-default-h .text.sc-stencila-code-expression-default,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-default .text.sc-stencila-code-expression-default{display:inline-block;min-width:1em;padding:.25rem .5rem;white-space:pre-line;width:auto}.isCodeVisible.sc-stencila-code-expression-default-h .divider.sc-stencila-code-expression-default,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-default .divider.sc-stencila-code-expression-default{fill:var(--background-editor)}.sc-stencila-code-expression-default-h .actions.sc-stencila-code-expression-default stencila-button.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .actions.sc-stencila-code-expression-default stencila-button.sc-stencila-code-expression-default{-ms-flex-align:stretch;align-items:stretch;-ms-flex-item-align:start;align-self:flex-start;cursor:default;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-negative:0;flex-shrink:0;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:background-color,border-color,color,fill,stroke,opacity,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-property:padding,width,max-width;transition-property:padding,width,max-width;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1)}.sc-stencila-code-expression-default-h .actions.sc-stencila-code-expression-default stencila-button.sourceToggle.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .actions.sc-stencila-code-expression-default stencila-button.sourceToggle.sc-stencila-code-expression-default{display:inline-block;width:0}.isOutputEmpty.sc-stencila-code-expression-default-h .output.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h.isOutputEmpty .sc-stencila-code-expression-default-s>[slot=output],.isOutputEmpty.sc-stencila-code-expression-default-h [slot=output].sc-stencila-code-expression-default,.isOutputEmpty.sc-stencila-code-expression-default-h stencila-tooltip.sc-stencila-code-expression-default,stencila-code-expression.isOutputEmpty.sc-stencila-code-expression-default .output.sc-stencila-code-expression-default,stencila-code-expression.isOutputEmpty.sc-stencila-code-expression-default-s>[slot=output],stencila-code-expression.isOutputEmpty .sc-stencila-code-expression-default-s>[slot=output],stencila-code-expression.isOutputEmpty.sc-stencila-code-expression-default [slot=output].sc-stencila-code-expression-default,stencila-code-expression.isOutputEmpty.sc-stencila-code-expression-default stencila-tooltip.sc-stencila-code-expression-default{color:#6e7591;color:var(--color-neutral-500,#6e7591)}.hover.sc-stencila-code-expression-default-h .actions.sc-stencila-code-expression-default stencila-button.sourceToggle.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h:focus .actions.sc-stencila-code-expression-default stencila-button.sourceToggle.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h:focus-within .actions.sc-stencila-code-expression-default stencila-button.sourceToggle.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h:hover .actions.sc-stencila-code-expression-default stencila-button.sourceToggle.sc-stencila-code-expression-default,stencila-code-expression.hover.sc-stencila-code-expression-default .actions.sc-stencila-code-expression-default stencila-button.sourceToggle.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default:focus-within .actions.sc-stencila-code-expression-default stencila-button.sourceToggle.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default:focus .actions.sc-stencila-code-expression-default stencila-button.sourceToggle.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default:hover .actions.sc-stencila-code-expression-default stencila-button.sourceToggle.sc-stencila-code-expression-default{display:-ms-inline-flexbox;display:inline-flex;max-width:100%;width:2rem}";var x=".sc-stencila-code-expression-material-h,stencila-code-expression.sc-stencila-code-expression-material{--background:var(--color-stock,#fff);--background-buttons:var(--color-neutral-50,#edf2f7);--background-editor:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0)}.sc-stencila-code-expression-material-h,stencila-code-expression.sc-stencila-code-expression-material{-ms-flex-align:stretch;align-items:stretch;border-radius:.25rem;border-style:solid;border-width:1px;display:-ms-inline-flexbox;display:inline-flex;font-size:.875rem;line-height:1.25rem;line-height:1;padding:0;vertical-align:text-bottom}.sc-stencila-code-expression-material-h,stencila-code-expression.sc-stencila-code-expression-material{background-color:var(--background);border-color:var(--border)}.sc-stencila-code-expression-material-h stencila-tooltip.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material stencila-tooltip.sc-stencila-code-expression-material{-ms-flex-align:stretch;align-items:stretch;display:-ms-inline-flexbox;display:inline-flex;line-height:1;overflow:hidden;padding:0;vertical-align:bottom}.sc-stencila-code-expression-material-h .actions.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .actions.sc-stencila-code-expression-material{background-color:var(--background-buttons);border-bottom-left-radius:.25rem;border-top-left-radius:.25rem;display:-ms-inline-flexbox;display:inline-flex;-ms-flex:0 1 auto;flex:0 1 auto;position:relative;white-space:nowrap}.sc-stencila-code-expression-material-h .text.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .text.sc-stencila-code-expression-material{background-color:var(--background-editor);color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline-block;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.75rem;line-height:1rem;line-height:1;min-width:0;overflow:hidden;padding:.25rem 0;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:width;transition-property:width;-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);white-space:nowrap;width:0}.sc-stencila-code-expression-material-h .output.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=output],.sc-stencila-code-expression-material-h [slot=output].sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .output.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=output],stencila-code-expression .sc-stencila-code-expression-material-s>[slot=output],stencila-code-expression.sc-stencila-code-expression-material [slot=output].sc-stencila-code-expression-material{background-color:#fff;background-color:var(--color-stock,#fff);border-style:none;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline-block;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.75rem;line-height:1rem;line-height:1;padding:.25rem .5rem .25rem .25rem}.sc-stencila-code-expression-material-h .output.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=output],.sc-stencila-code-expression-material-h [slot=output].sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .output.sc-stencila-code-expression-material,stencila-code-expression .sc-stencila-code-expression-material-s>[slot=output],stencila-code-expression.sc-stencila-code-expression-material [slot=output].sc-stencila-code-expression-material{background-color:var(--background);-webkit-transition:padding .12s ease-out;transition:padding .12s ease-out}.sc-stencila-code-expression-material-h .output.sc-stencila-code-expression-material stencila-icon.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=output] stencila-icon,.sc-stencila-code-expression-material-h [slot=output].sc-stencila-code-expression-material stencila-icon.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .output.sc-stencila-code-expression-material stencila-icon.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=output] stencila-icon,stencila-code-expression .sc-stencila-code-expression-material-s>[slot=output] stencila-icon,stencila-code-expression.sc-stencila-code-expression-material [slot=output].sc-stencila-code-expression-material stencila-icon.sc-stencila-code-expression-material{--height:1rem;height:1rem}.sc-stencila-code-expression-material-h .output.sc-stencila-code-expression-material stencila-icon.sc-stencila-code-expression-material svg.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=output] stencila-icon svg,.sc-stencila-code-expression-material-h [slot=output].sc-stencila-code-expression-material stencila-icon.sc-stencila-code-expression-material svg.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .output.sc-stencila-code-expression-material stencila-icon.sc-stencila-code-expression-material svg.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=output] stencila-icon svg,stencila-code-expression .sc-stencila-code-expression-material-s>[slot=output] stencila-icon svg,stencila-code-expression.sc-stencila-code-expression-material [slot=output].sc-stencila-code-expression-material stencila-icon.sc-stencila-code-expression-material svg.sc-stencila-code-expression-material{stroke:#ba8925;stroke:var(--color-warn-600,#ba8925);height:1rem}.sc-stencila-code-expression-material-h .slot.hidden.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .slot.hidden.sc-stencila-code-expression-material{display:none}.sc-stencila-code-expression-material-h .output.sc-stencila-code-expression-material>*.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .output.sc-stencila-code-expression-material>*.sc-stencila-code-expression-material{background-color:#fff;background-color:var(--color-stock,#fff);border-style:none;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline-block;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.75rem;line-height:1rem;line-height:1;margin:0;padding:0;white-space:normal}.sc-stencila-code-expression-material-h .divider.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .divider.sc-stencila-code-expression-material{fill:var(--background-buttons);-ms-flex-item-align:center;align-self:center;display:inline-block;max-height:1em;width:.5rem}.isCodeVisible.sc-stencila-code-expression-material-h .text.sc-stencila-code-expression-material,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-material .text.sc-stencila-code-expression-material{display:inline-block;min-width:1em;padding:.25rem .5rem;white-space:pre-line;width:auto}.isCodeVisible.sc-stencila-code-expression-material-h .divider.sc-stencila-code-expression-material,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-material .divider.sc-stencila-code-expression-material{fill:var(--background-editor)}.sc-stencila-code-expression-material-h .actions.sc-stencila-code-expression-material stencila-button.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .actions.sc-stencila-code-expression-material stencila-button.sc-stencila-code-expression-material{-ms-flex-align:stretch;align-items:stretch;-ms-flex-item-align:start;align-self:flex-start;cursor:default;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-negative:0;flex-shrink:0;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:background-color,border-color,color,fill,stroke,opacity,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-property:padding,width,max-width;transition-property:padding,width,max-width;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1)}.sc-stencila-code-expression-material-h .actions.sc-stencila-code-expression-material stencila-button.sourceToggle.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .actions.sc-stencila-code-expression-material stencila-button.sourceToggle.sc-stencila-code-expression-material{display:inline-block;width:0}.isOutputEmpty.sc-stencila-code-expression-material-h .output.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h.isOutputEmpty .sc-stencila-code-expression-material-s>[slot=output],.isOutputEmpty.sc-stencila-code-expression-material-h [slot=output].sc-stencila-code-expression-material,.isOutputEmpty.sc-stencila-code-expression-material-h stencila-tooltip.sc-stencila-code-expression-material,stencila-code-expression.isOutputEmpty.sc-stencila-code-expression-material .output.sc-stencila-code-expression-material,stencila-code-expression.isOutputEmpty.sc-stencila-code-expression-material-s>[slot=output],stencila-code-expression.isOutputEmpty .sc-stencila-code-expression-material-s>[slot=output],stencila-code-expression.isOutputEmpty.sc-stencila-code-expression-material [slot=output].sc-stencila-code-expression-material,stencila-code-expression.isOutputEmpty.sc-stencila-code-expression-material stencila-tooltip.sc-stencila-code-expression-material{color:#6e7591;color:var(--color-neutral-500,#6e7591)}.hover.sc-stencila-code-expression-material-h .actions.sc-stencila-code-expression-material stencila-button.sourceToggle.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h:focus .actions.sc-stencila-code-expression-material stencila-button.sourceToggle.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h:focus-within .actions.sc-stencila-code-expression-material stencila-button.sourceToggle.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h:hover .actions.sc-stencila-code-expression-material stencila-button.sourceToggle.sc-stencila-code-expression-material,stencila-code-expression.hover.sc-stencila-code-expression-material .actions.sc-stencila-code-expression-material stencila-button.sourceToggle.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material:focus-within .actions.sc-stencila-code-expression-material stencila-button.sourceToggle.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material:focus .actions.sc-stencila-code-expression-material stencila-button.sourceToggle.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material:hover .actions.sc-stencila-code-expression-material stencila-button.sourceToggle.sc-stencila-code-expression-material{display:-ms-inline-flexbox;display:inline-flex;max-width:100%;width:2rem}";var f={text:"text",output:"output"};var m=e("stencila_code_expression",function(){function e(e){var i=this;t(this,e);this.emptyOutputMessage="No output to show";this.hoverTimeOut=undefined;this.hoverStartedAt=Date.now();this.hover=false;this.isCodeVisible=false;this.isOutputEmpty=false;this.executeCodeState="INITIAL";this.checkIfEmpty=function(){var e;var s=Array.from(i.el.children).filter((function(e){return e.slot===f.output}))[0];var t=((e=s===null||s===void 0?void 0:s.childNodes)!==null&&e!==void 0?e:[])[0];i.output=t===undefined?"":t instanceof Text?t.textContent:t;i.isOutputEmpty=t===undefined};this.collapseAllListenHandler=function(e){i.isCodeVisible=e.detail.isVisible};this.toggleCodeVisibility=function(){return i.isCodeVisible=!i.isCodeVisible};this.selectTextSlot=function(){return i.el.querySelector("."+f.text)};this.getTextSlotContents=function(){var e;var s=i.selectTextSlot();return(e=s===null||s===void 0?void 0:s.textContent)!==null&&e!==void 0?e:""};this.handleKeyDown=function(e){if(e.key==="Enter"&&e.shiftKey){e.preventDefault();i.execute().catch((function(e){console.error(e)}))}};this.onExecuteHandler=function(){return __awaiter(i,void 0,void 0,(function(){var e,s;return __generator(this,(function(t){switch(t.label){case 0:this.executeCodeState="PENDING";return[4,this.getContents()];case 1:e=t.sent();if(!(this.executeHandler!==undefined))return[3,3];return[4,this.executeHandler(e)];case 2:s=t.sent();this.executeCodeState="RESOLVED";this.isOutputEmpty=s.output===undefined||s.output===null;this.output=s.output;return[2,s];case 3:this.executeCodeState="RESOLVED";return[2,e]}}))}))};this.executeRef=function(){return i.execute()};this.dividerArrow=function(){return s("svg",{class:"divider",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 24",preserveAspectRatio:"xMinYMin"},s("path",{d:"M8 12L1 0H0v24h1l7-12z"}))};this.onMouseOutHandler=function(e){var s=e.target;var t=e.relatedTarget;if(!(s===null||s===void 0?void 0:s.contains(t))){i.removeHoverState()}};this.addHoverState=function(){window.clearTimeout(i.hoverTimeOut);if(!i.hover){i.hover=true;i.hoverStartedAt=Date.now()}};this.removeHoverState=function(){var e=Date.now()-i.hoverStartedAt;if(i.hover&&e<60){i.hoverTimeOut=window.setTimeout((function(){i.hover=false}),3e3)}else if(i.hover){i.hover=false}};this.generateContent=function(){return[s("span",{class:"actions"},s("stencila-button",{"aria-label":"Run Code",class:"run",onClick:i.executeRef,color:"key",disabled:!i.executeHandler,isLoading:i.executeCodeState==="PENDING",icon:"play",iconOnly:true,minimal:true,size:"xsmall",tooltip:"Run"}),s("stencila-button",{"aria-label":"Run Code",class:"sourceToggle",onClick:i.toggleCodeVisibility,color:"key",icon:i.isCodeVisible?"eye-off":"eye",iconOnly:true,minimal:true,size:"xsmall",tooltip:(i.isCodeVisible?"Hide":"Show")+" Code"}),s("span",{class:"text",contentEditable:true,onBlur:i.removeHoverState,tabIndex:i.isCodeVisible?0:-1},s("slot",{name:f.text}))),i.dividerArrow(),s("span",{class:{hidden:true,slot:true}},s("slot",{name:"output"})),i.isOutputEmpty?s("stencila-tooltip",{text:i.emptyOutputMessage,class:"output"},"…"):i.output==null?null:s(u,{node:i.output})]}}e.prototype.componentWillLoad=function(){this.checkIfEmpty()};e.prototype.onSetAllCodeVisibility=function(e){this.collapseAllListenHandler(e)};e.prototype.getContents=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,Promise.resolve(l({text:this.getTextSlotContents(),programmingLanguage:this.programmingLanguage}))]}))}))};e.prototype.execute=function(){return __awaiter(this,void 0,void 0,(function(){var e,s;var t=this;return __generator(this,(function(i){switch(i.label){case 0:this.executeCodeState="PENDING";i.label=1;case 1:i.trys.push([1,3,,4]);return[4,this.onExecuteHandler()];case 2:e=i.sent();window.setTimeout((function(){return t.executeCodeState="RESOLVED"}),250);return[2,e];case 3:s=i.sent();console.error(s);this.executeCodeState="RESOLVED";return[2,s];case 4:return[2]}}))}))};e.prototype.render=function(){return s(i,{class:{hover:this.hover,isCodeVisible:this.isCodeVisible,isOutputEmpty:this.isOutputEmpty},onMouseEnter:this.addHoverState,onMouseOut:this.onMouseOutHandler,onKeyDown:this.handleKeyDown},this.generateContent())};Object.defineProperty(e.prototype,"el",{get:function(){return o(this)},enumerable:false,configurable:true});return e}());m.style={default:p,material:x}}}}));