var __awaiter=this&&this.__awaiter||function(e,t,i,c){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function a(e){try{l(c.next(e))}catch(t){o(t)}}function s(e){try{l(c["throw"](e))}catch(t){o(t)}}function l(e){e.done?i(e.value):n(e.value).then(a,s)}l((c=c.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},c,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(c)throw new TypeError("Generator is already executing.");while(i)try{if(c=1,n&&(o=a[0]&2?n["return"]:a[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;if(n=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:i.label++;return{value:a[1],done:false};case 5:i.label++;n=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(a[0]===6&&i.label<o[1]){i.label=o[1];o=a;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(a);break}if(o[2])i.ops.pop();i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s];n=0}finally{c=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};System.register(["./p-c4c9d738.system.js","./p-291b7cf4.system.js"],(function(e){"use strict";var t,i,c,n,o,a;return{setters:[function(e){t=e.r;i=e.c;c=e.h;n=e.H;o=e.a},function(e){a=e.s}],execute:function(){var s="*.sc-stencila-code-chunk-default,.sc-stencila-code-chunk-default:after,.sc-stencila-code-chunk-default:before{border:0 solid;-webkit-box-sizing:border-box;box-sizing:border-box}html.sc-stencila-code-chunk-default{font-size:16px}.hidden.sc-stencila-code-chunk-default{display:none}code.sc-stencila-code-chunk-default,code[class*=language-].sc-stencila-code-chunk-default,output.sc-stencila-code-chunk-default{font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:75%}pre.sc-stencila-code-chunk-default{border:1px solid #cfd2e1;border-color:var(--color-neutral-100,#cfd2e1);border-radius:.25rem;margin:.5rem;overflow:auto;padding:.5rem}.preReset.sc-stencila-code-chunk-default{border-width:0;margin:0;padding:0}.sc-stencila-code-chunk-default-h,stencila-code-chunk.sc-stencila-code-chunk-default{--background:var(--color-stock,#fff);--background-editor:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0)}.sc-stencila-code-chunk-default-h,stencila-code-chunk.sc-stencila-code-chunk-default{border-radius:.25rem;border-style:solid;border-width:1px;display:block;margin-bottom:1rem;margin-top:1rem;overflow:hidden;position:relative;width:100%}.sc-stencila-code-chunk-default-h,stencila-code-chunk.sc-stencila-code-chunk-default{border-color:var(--border)}.sc-stencila-code-chunk-default-h stencila-action-menu.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default stencila-action-menu.sc-stencila-code-chunk-default{border-left-width:0;border-radius:0;border-right-width:0;display:block;padding:0;position:relative;width:100%}.sc-stencila-code-chunk-default-h stencila-editor.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default stencila-editor.sc-stencila-code-chunk-default{--border-width:0;-ms-flex-positive:1;flex-grow:1}.sc-stencila-code-chunk-default-h stencila-node-list.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default stencila-node-list.sc-stencila-code-chunk-default{background-color:var(--background);margin:0;padding:.5rem}.sc-stencila-code-chunk-default-h .layoutToggle.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default .layoutToggle.sc-stencila-code-chunk-default{display:none}@media (min-width:1024px){.sc-stencila-code-chunk-default-h .layoutToggle.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default .layoutToggle.sc-stencila-code-chunk-default{display:inline-block}}.editorContainer.sc-stencila-code-chunk-default{background:var(--background-editor);border-color:var(--border);border-radius:0;border-width:0 0 1px;display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;-ms-flex-direction:column;flex-direction:column;height:intrinsic;margin:0;position:relative}.editorContainer.sc-stencila-code-chunk-default pre.sc-stencila-code-chunk-default,.editorContainer.sc-stencila-code-chunk-default pre[class*=language-].sc-stencila-code-chunk-default{background-color:transparent}.editorContainer.hidden.sc-stencila-code-chunk-default{display:none}@media (min-width:1024px){.sc-stencila-code-chunk-default-h:not(.isStacked)>div.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default:not(.isStacked)>div.sc-stencila-code-chunk-default{-ms-flex-align:stretch;align-items:stretch;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.sc-stencila-code-chunk-default-h:not(.isStacked)>div.sc-stencila-code-chunk-default .editorContainer.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default:not(.isStacked)>div.sc-stencila-code-chunk-default .editorContainer.sc-stencila-code-chunk-default{border-bottom-width:0;border-right-width:1px;width:50%}.sc-stencila-code-chunk-default-h:not(.isStacked)>div.sc-stencila-code-chunk-default stencila-node-list.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default:not(.isStacked)>div.sc-stencila-code-chunk-default stencila-node-list.sc-stencila-code-chunk-default{-ms-flex-positive:1;flex-grow:1;width:50%}}";var l="*.sc-stencila-code-chunk-material,.sc-stencila-code-chunk-material:after,.sc-stencila-code-chunk-material:before{border:0 solid;-webkit-box-sizing:border-box;box-sizing:border-box}html.sc-stencila-code-chunk-material{font-size:16px}.hidden.sc-stencila-code-chunk-material{display:none}code.sc-stencila-code-chunk-material,code[class*=language-].sc-stencila-code-chunk-material,output.sc-stencila-code-chunk-material{font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:75%}pre.sc-stencila-code-chunk-material{border:1px solid #cfd2e1;border-color:var(--color-neutral-100,#cfd2e1);border-radius:.25rem;margin:.5rem;overflow:auto;padding:.5rem}.preReset.sc-stencila-code-chunk-material{border-width:0;margin:0;padding:0}.sc-stencila-code-chunk-material-h,stencila-code-chunk.sc-stencila-code-chunk-material{--background:var(--color-stock,#fff);--background-editor:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0)}.sc-stencila-code-chunk-material-h,stencila-code-chunk.sc-stencila-code-chunk-material{border-radius:.25rem;border-style:solid;border-width:1px;display:block;margin-bottom:1rem;margin-top:1rem;overflow:hidden;position:relative;width:100%}.sc-stencila-code-chunk-material-h,stencila-code-chunk.sc-stencila-code-chunk-material{border-color:var(--border)}.sc-stencila-code-chunk-material-h stencila-action-menu.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material stencila-action-menu.sc-stencila-code-chunk-material{border-left-width:0;border-radius:0;border-right-width:0;display:block;padding:0;position:relative;width:100%}.sc-stencila-code-chunk-material-h stencila-editor.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material stencila-editor.sc-stencila-code-chunk-material{--border-width:0;-ms-flex-positive:1;flex-grow:1}.sc-stencila-code-chunk-material-h stencila-node-list.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material stencila-node-list.sc-stencila-code-chunk-material{background-color:var(--background);margin:0;padding:.5rem}.sc-stencila-code-chunk-material-h .layoutToggle.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material .layoutToggle.sc-stencila-code-chunk-material{display:none}@media (min-width:1024px){.sc-stencila-code-chunk-material-h .layoutToggle.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material .layoutToggle.sc-stencila-code-chunk-material{display:inline-block}}.editorContainer.sc-stencila-code-chunk-material{background:var(--background-editor);border-color:var(--border);border-radius:0;border-width:0 0 1px;display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;-ms-flex-direction:column;flex-direction:column;height:intrinsic;margin:0;position:relative}.editorContainer.sc-stencila-code-chunk-material pre.sc-stencila-code-chunk-material,.editorContainer.sc-stencila-code-chunk-material pre[class*=language-].sc-stencila-code-chunk-material{background-color:transparent}.editorContainer.hidden.sc-stencila-code-chunk-material{display:none}@media (min-width:1024px){.sc-stencila-code-chunk-material-h:not(.isStacked)>div.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material:not(.isStacked)>div.sc-stencila-code-chunk-material{-ms-flex-align:stretch;align-items:stretch;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.sc-stencila-code-chunk-material-h:not(.isStacked)>div.sc-stencila-code-chunk-material .editorContainer.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material:not(.isStacked)>div.sc-stencila-code-chunk-material .editorContainer.sc-stencila-code-chunk-material{border-bottom-width:0;border-right-width:1px;width:50%}.sc-stencila-code-chunk-material-h:not(.isStacked)>div.sc-stencila-code-chunk-material stencila-node-list.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material:not(.isStacked)>div.sc-stencila-code-chunk-material stencila-node-list.sc-stencila-code-chunk-material{-ms-flex-positive:1;flex-grow:1;width:50%}}";var r=e("stencila_code_chunk",function(){function e(e){var c=this;t(this,e);this.setAllCodeVisibility=i(this,"setAllCodeVisibility",7);this.setEditorLayout=i(this,"setEditorLayout",7);this.autofocus=false;this.isCodeVisible=false;this.keymap=[];this.executeCodeState="INITIAL";this.isStacked=true;this.codeErrors=[];this.isCodeVisibleState=this.isCodeVisible;this.toggleCodeVisibility=function(e){e.preventDefault();if(e.shiftKey){c.toggleAllCodeVisibility()}else{c.isCodeVisibleState=!c.isCodeVisibleState}};this.toggleAllCodeVisibility=function(){return c.setAllCodeVisibilityHandler(!c.isCodeVisibleState)};this.onExecuteHandler=function(){return __awaiter(c,void 0,void 0,(function(){var e,t;return __generator(this,(function(i){switch(i.label){case 0:this.executeCodeState="PENDING";return[4,this.getContents()];case 1:e=i.sent();if(!(this.executeHandler!==undefined))return[3,3];return[4,this.executeHandler(e)];case 2:t=i.sent();this.executeCodeState="RESOLVED";this.codeErrors=t.errors;this.outputs=t.outputs;return[2,t];case 3:this.executeCodeState="RESOLVED";return[2,e]}}))}))};this.setEditorLayoutHandler=function(e){c.isStacked=e};this.toggleEditorLayout=function(e){e.preventDefault();if(e.shiftKey){c.setEditorLayout.emit({isStacked:!c.isStacked})}else{c.setEditorLayoutHandler(!c.isStacked)}};this.executeRef=function(){return c.execute()};this.setCodeVisibility=function(e){c.isCodeVisibleState=e.detail.isVisible}}e.prototype.onSetAllCodeVisibility=function(e){this.setCodeVisibility(e)};e.prototype.onSetEditorLayout=function(e){this.setEditorLayoutHandler(e.detail.isStacked)};e.prototype.componentWillLoad=function(){var e=1200;this.isStacked=this.el.getBoundingClientRect().width<e};e.prototype.componentDidLoad=function(){this.editorRef=this.el.querySelector("stencila-editor")};e.prototype.getContents=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,i,c;return __generator(this,(function(n){switch(n.label){case 0:if(!this.editorRef)return[3,2];return[4,(e=this.editorRef)===null||e===void 0?void 0:e.getContents()];case 1:t=n.sent(),i=t.text,c=t.language;return[2,a({text:i,programmingLanguage:c})];case 2:return[2,a({text:""})]}}))}))};e.prototype.execute=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;var i=this;return __generator(this,(function(c){switch(c.label){case 0:this.executeCodeState="PENDING";c.label=1;case 1:c.trys.push([1,3,,4]);return[4,this.onExecuteHandler()];case 2:e=c.sent();window.setTimeout((function(){return i.executeCodeState="RESOLVED"}),250);return[2,e];case 3:t=c.sent();console.error(t);this.executeCodeState="RESOLVED";return[2,t];case 4:return[2]}}))}))};e.prototype.setAllCodeVisibilityHandler=function(e){this.setAllCodeVisibility.emit({isVisible:e})};e.prototype.render=function(){return c(n,{class:{isCodeVisible:this.isCodeVisibleState,isStacked:this.isStacked}},c("stencila-action-menu",null,this.executeHandler!==undefined&&c("stencila-button",{icon:"play",minimal:true,color:"key",class:"run",size:"xsmall",tooltip:"Run",iconOnly:true,slot:"persistentActions",onClick:this.executeRef,isLoading:this.executeCodeState==="PENDING"}),c("stencila-button",{minimal:true,color:"key",class:"sourceToggle",onClick:this.toggleCodeVisibility,icon:this.isCodeVisibleState?"eye-off":"eye",iconOnly:true,size:"xsmall",slot:"persistentActions",tooltip:(this.isCodeVisibleState?"Hide":"Show")+" Code\nShift click to set for all code blocks"}),this.isCodeVisibleState&&c("stencila-button",{minimal:true,color:"key",class:"layoutToggle",onClick:this.toggleEditorLayout,icon:this.isStacked?"layout-column":"layout-row",iconOnly:true,size:"xsmall",slot:"persistentActions",tooltip:(this.isStacked?"Side by side":"Stacked")+" view\nShift click to set for all code blocks"})),c("div",null,c("div",{class:{editorContainer:true,hidden:!this.isCodeVisibleState}},c("stencila-editor",{activeLanguage:this.programmingLanguageProp,autofocus:this.autofocus,executeHandler:this.onExecuteHandler,keymap:this.keymap,readOnly:this.executeHandler===undefined,errors:this.codeErrors},c("slot",{name:r.slots.text}))),c("stencila-node-list",{nodes:this.outputs},c("slot",{name:r.slots.outputs}))))};Object.defineProperty(e.prototype,"el",{get:function(){return o(this)},enumerable:false,configurable:true});return e}());r.slots={text:"text",outputs:"outputs"};r.style={default:s,material:l}}}}));