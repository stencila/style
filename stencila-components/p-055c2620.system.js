var __spreadArray=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};System.register(["./p-9247141b.system.js","./p-83a217ea.system.js","./p-c4c9d738.system.js","./p-f89c7fc9.system.js","./p-291b7cf4.system.js","./p-1ba9f457.system.js","./p-be456e54.system.js","./p-216a0e8d.system.js","./p-04c58eb8.system.js","./p-5c4c4355.system.js"],(function(e){"use strict";var t,r,n,i,s,a,o,f,h,l,u,p,c,d,m,v,g,k,x,y,b;return{setters:[function(e){t=e.N;r=e.e;n=e.b;i=e.T;s=e.v;a=e.L;o=e.s;f=e.E;h=e.x;l=e.f;u=e.P;p=e.y;c=e.d;d=e.a;m=e.t;v=e.z;g=e.A;k=e.m;x=e.j;y=e.l},function(e){b=e.htmlLanguage},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var L;e("markdown",it);var S=function(){function e(e,t,r,n,i,s,a){this.type=e;this.value=t;this.from=r;this.hash=n;this.end=i;this.children=s;this.positions=a}e.create=function(t,r,n,i,s){var a=i+(i<<8)+t+(r<<4)|0;return new e(t,r,n,a,s,[],[])};e.prototype.toTree=function(e,t){if(t===void 0){t=this.end}var r=this.children.length-1;if(r>=0)t=Math.max(t,this.positions[r]+this.children[r].length+this.from);var n=new i(e.types[this.type],this.children,this.positions,t-this.from).balance(2048);Be(n.children,this.hash);return n};e.prototype.copy=function(){return new e(this.type,this.value,this.from,this.hash,this.end,this.children.slice(),this.positions.slice())};return e}();var w;(function(e){e[e["Document"]=1]="Document";e[e["CodeBlock"]=2]="CodeBlock";e[e["FencedCode"]=3]="FencedCode";e[e["Blockquote"]=4]="Blockquote";e[e["HorizontalRule"]=5]="HorizontalRule";e[e["BulletList"]=6]="BulletList";e[e["OrderedList"]=7]="OrderedList";e[e["ListItem"]=8]="ListItem";e[e["ATXHeading1"]=9]="ATXHeading1";e[e["ATXHeading2"]=10]="ATXHeading2";e[e["ATXHeading3"]=11]="ATXHeading3";e[e["ATXHeading4"]=12]="ATXHeading4";e[e["ATXHeading5"]=13]="ATXHeading5";e[e["ATXHeading6"]=14]="ATXHeading6";e[e["SetextHeading1"]=15]="SetextHeading1";e[e["SetextHeading2"]=16]="SetextHeading2";e[e["HTMLBlock"]=17]="HTMLBlock";e[e["LinkReference"]=18]="LinkReference";e[e["Paragraph"]=19]="Paragraph";e[e["CommentBlock"]=20]="CommentBlock";e[e["ProcessingInstructionBlock"]=21]="ProcessingInstructionBlock";e[e["Escape"]=22]="Escape";e[e["Entity"]=23]="Entity";e[e["HardBreak"]=24]="HardBreak";e[e["Emphasis"]=25]="Emphasis";e[e["StrongEmphasis"]=26]="StrongEmphasis";e[e["Link"]=27]="Link";e[e["Image"]=28]="Image";e[e["InlineCode"]=29]="InlineCode";e[e["HTMLTag"]=30]="HTMLTag";e[e["Comment"]=31]="Comment";e[e["ProcessingInstruction"]=32]="ProcessingInstruction";e[e["URL"]=33]="URL";e[e["HeaderMark"]=34]="HeaderMark";e[e["QuoteMark"]=35]="QuoteMark";e[e["ListMark"]=36]="ListMark";e[e["LinkMark"]=37]="LinkMark";e[e["EmphasisMark"]=38]="EmphasisMark";e[e["CodeMark"]=39]="CodeMark";e[e["CodeInfo"]=40]="CodeInfo";e[e["LinkTitle"]=41]="LinkTitle";e[e["LinkLabel"]=42]="LinkLabel"})(w||(w={}));var C=function(){function e(e,t){this.start=e;this.content=t;this.marks=[];this.parsers=[]}return e}();var A=function(){function e(){this.text="";this.baseIndent=0;this.basePos=0;this.depth=0;this.markers=[];this.pos=0;this.indent=0;this.next=-1}e.prototype.forward=function(){if(this.basePos>this.pos)this.forwardInner()};e.prototype.forwardInner=function(){var e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent);this.pos=e;this.next=e==this.text.length?-1:this.text.charCodeAt(e)};e.prototype.skipSpace=function(e){return P(this.text,e)};e.prototype.reset=function(e){this.text=e;this.baseIndent=this.basePos=this.pos=this.indent=0;this.forwardInner();this.depth=1;while(this.markers.length)this.markers.pop()};e.prototype.moveBase=function(e){this.basePos=e;this.baseIndent=this.countIndent(e,this.pos,this.indent)};e.prototype.moveBaseColumn=function(e){this.baseIndent=e;this.basePos=this.findColumn(e)};e.prototype.addMarker=function(e){this.markers.push(e)};e.prototype.countIndent=function(e,t,r){if(t===void 0){t=0}if(r===void 0){r=0}for(var n=t;n<e;n++)r+=this.text.charCodeAt(n)==9?4-r%4:1;return r};e.prototype.findColumn=function(e){var t=0;for(var r=0;t<this.text.length&&r<e;t++)r+=this.text.charCodeAt(t)==9?4-r%4:1;return t};e.prototype.scrub=function(){if(!this.baseIndent)return this.text;var e="";for(var t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)};return e}();function T(e,t,r){if(r.pos==r.text.length||e!=t.block&&r.indent>=t.stack[r.depth+1].value+r.baseIndent)return true;if(r.indent>=r.baseIndent+4)return false;var n=(e.type==w.OrderedList?R:j)(r,t,false);return n>0&&(e.type!=w.BulletList||N(r,t,false)<0)&&r.text.charCodeAt(r.pos+n-1)==e.value}var B=(L={},L[w.Blockquote]=function(e,t,r){if(r.next!=62)return false;r.markers.push(pe(w.QuoteMark,t.lineStart+r.pos,t.lineStart+r.pos+1));r.moveBase(r.pos+1);e.end=t.lineStart+r.text.length;return true},L[w.ListItem]=function(e,t,r){if(r.indent<r.baseIndent+e.value&&r.next>-1)return false;r.moveBaseColumn(r.baseIndent+e.value);return true},L[w.OrderedList]=T,L[w.BulletList]=T,L[w.Document]=function(){return true},L);function I(e){return e==32||e==9||e==10||e==13}function P(e,t){if(t===void 0){t=0}while(t<e.length&&I(e.charCodeAt(t)))t++;return t}function E(e,t,r){while(t>r&&I(e.charCodeAt(t-1)))t--;return t}function M(e){if(e.next!=96&&e.next!=126)return-1;var t=e.pos+1;while(t<e.text.length&&e.text.charCodeAt(t)==e.next)t++;if(t<e.pos+3)return-1;if(e.next==96)for(var r=t;r<e.text.length;r++)if(e.text.charCodeAt(r)==96)return-1;return t}function H(e){return e.next!=62?-1:e.text.charCodeAt(e.pos+1)==32?2:1}function N(e,t,r){if(e.next!=42&&e.next!=45&&e.next!=95)return-1;var n=1;for(var i=e.pos+1;i<e.text.length;i++){var s=e.text.charCodeAt(i);if(s==e.next)n++;else if(!I(s))return-1}if(r&&e.next==45&&z(e)>-1&&e.depth==t.stack.length)return-1;return n<3?-1:1}function O(e,t){return e.block.type==t||e.stack.length>1&&e.stack[e.stack.length-2].type==t}function j(e,t,r){return(e.next==45||e.next==43||e.next==42)&&(e.pos==e.text.length-1||I(e.text.charCodeAt(e.pos+1)))&&(!r||O(t,w.BulletList)||e.skipSpace(e.pos+2)<e.text.length)?1:-1}function R(e,t,r){var n=e.pos,i=e.next;for(;;){if(i>=48&&i<=57)n++;else break;if(n==e.text.length)return-1;i=e.text.charCodeAt(n)}if(n==e.pos||n>e.pos+9||i!=46&&i!=41||n<e.text.length-1&&!I(e.text.charCodeAt(n+1))||r&&!O(t,w.OrderedList)&&(e.skipSpace(n+1)==e.text.length||n>e.pos+1||e.next!=49))return-1;return n+1-e.pos}function X(e){if(e.next!=35)return-1;var t=e.pos+1;while(t<e.text.length&&e.text.charCodeAt(t)==35)t++;if(t<e.text.length&&e.text.charCodeAt(t)!=32)return-1;var r=t-e.pos;return r>6?-1:r}function z(e){if(e.next!=45&&e.next!=61||e.indent>=e.baseIndent+4)return-1;var t=e.pos+1;while(t<e.text.length&&e.text.charCodeAt(t)==e.next)t++;var r=t;while(t<e.text.length&&I(e.text.charCodeAt(t)))t++;return t==e.text.length?r:-1}var D=/^[ \t]*$/,_=/-->/,F=/\?>/;var q=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,_],[/^\s*<\?/,F],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,D],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,D]];function $(e,t,r){if(e.next!=60)return-1;var n=e.text.slice(e.pos);for(var i=0,s=q.length-(r?1:0);i<s;i++)if(q[i][0].test(n))return i;return-1}function U(e,t){var r=e.countIndent(t,e.pos,e.indent);var n=e.countIndent(e.skipSpace(t),t,r);return n>=r+5?r+1:n}var Q={LinkReference:undefined,IndentedCode:function(e,t){var r=t.baseIndent+4;if(t.indent<r)return false;var n=t.findColumn(r);var s=e.lineStart+n,a=e.lineStart+t.text.length;var o=[],f=[];for(;e.nextLine();){if(t.depth<e.stack.length)break;if(t.pos==t.text.length){for(var h=0,l=t.markers;h<l.length;h++){var u=l[h];f.push(u)}}else if(t.indent<r){break}else{if(f.length){for(var p=0,c=f;p<c.length;p++){var u=c[p];o.push(u)}f=[]}for(var d=0,m=t.markers;d<m.length;d++){var u=m[d];o.push(u)}a=e.lineStart+t.text.length}}if(f.length)t.markers=f.concat(t.markers);var v=!o.length&&e.parser.codeParser&&e.parser.codeParser("");if(v)e.startNested(s,v.startParse(e.input.clip(a),s,e.parseContext),(function(t){return new i(e.parser.nodeSet.types[w.CodeBlock],[t],[0],a-s)}));else e.addNode(e.buffer.writeElements(o,-s).finish(w.CodeBlock,a-s),s);return true},FencedCode:function(e,t){var r=M(t);if(r<0)return false;var n=e.lineStart+t.pos,i=t.next,s=r-t.pos;var a=t.skipSpace(r),o=E(t.text,t.text.length,a);var f=[pe(w.CodeMark,n,n+s)],h="";if(a<o){f.push(pe(w.CodeInfo,e.lineStart+a,e.lineStart+o));h=t.text.slice(a,o)}var l=f.length,u=l;var p=e.lineStart+t.text.length+1,c=-1;for(;e.nextLine();){if(t.depth<e.stack.length)break;for(var d=0,m=t.markers;d<m.length;d++){var v=m[d];f.push(v)}var g=t.pos;if(t.indent-t.baseIndent<4)while(g<t.text.length&&t.text.charCodeAt(g)==i)g++;if(g-t.pos>=s&&t.skipSpace(g)==t.text.length){f.push(pe(w.CodeMark,e.lineStart+t.pos,e.lineStart+g));l++;c=e.lineStart-1;e.nextLine();break}}var k=e.prevLineEnd();if(c<0)c=k;var x=f.length==l&&e.parser.codeParser&&e.parser.codeParser(h);if(x&&p<c){e.startNested(n,x.startParse(e.input.clip(c),p,e.parseContext),(function(e){f.splice(u,0,new ue(e,p));return pe(w.FencedCode,n,k,f)}))}else{e.addNode(e.buffer.writeElements(f,-n).finish(w.FencedCode,e.prevLineEnd()-n),n)}return true},Blockquote:function(e,t){var r=H(t);if(r<0)return false;e.startContext(w.Blockquote,t.pos);e.addNode(w.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1);t.moveBase(t.pos+r);return null},HorizontalRule:function(e,t){if(N(t,e,false)<0)return false;var r=e.lineStart+t.pos;e.nextLine();e.addNode(w.HorizontalRule,r);return true},BulletList:function(e,t){var r=j(t,e,false);if(r<0)return false;if(e.block.type!=w.BulletList)e.startContext(w.BulletList,t.basePos,t.next);var n=U(t,t.pos+1);e.startContext(w.ListItem,t.basePos,n-t.baseIndent);e.addNode(w.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+r);t.moveBaseColumn(n);return null},OrderedList:function(e,t){var r=R(t,e,false);if(r<0)return false;if(e.block.type!=w.OrderedList)e.startContext(w.OrderedList,t.basePos,t.text.charCodeAt(t.pos+r-1));var n=U(t,t.pos+r);e.startContext(w.ListItem,t.basePos,n-t.baseIndent);e.addNode(w.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+r);t.moveBaseColumn(n);return null},ATXHeading:function(e,t){var r=X(t);if(r<0)return false;var n=t.pos,i=e.lineStart+n;var s=E(t.text,t.text.length,n),a=s;while(a>n&&t.text.charCodeAt(a-1)==t.next)a--;if(a==s||a==n||!I(t.text.charCodeAt(a-1)))a=t.text.length;var o=e.buffer.write(w.HeaderMark,0,r).writeElements(e.parser.parseInline(t.text.slice(n+r+1,a),i+r+1),-i);if(a<t.text.length)o.write(w.HeaderMark,a-n,s-n);var f=o.finish(w.ATXHeading1-1+r,t.text.length-n);e.nextLine();e.addNode(f,i);return true},HTMLBlock:function(e,t){var r=$(t,e,false);if(r<0)return false;var n=e.lineStart+t.pos,s=q[r][1];var a=[],o=s!=D;while(!s.test(t.text)&&e.nextLine()){if(t.depth<e.stack.length){o=false;break}for(var f=0,h=t.markers;f<h.length;f++){var l=h[f];a.push(l)}}if(o)e.nextLine();var u=s==_?w.CommentBlock:s==F?w.ProcessingInstructionBlock:w.HTMLBlock;var p=e.prevLineEnd();if(!a.length&&u==w.HTMLBlock&&e.parser.htmlParser){e.startNested(n,e.parser.htmlParser.startParse(e.input.clip(p),n,e.parseContext),(function(t){return new i(e.parser.nodeSet.types[u],[t],[0],p-n)}))}else{e.addNode(e.buffer.writeElements(a,-n).finish(u,p-n),n)}return true},SetextHeading:undefined};var Z=function(){function e(e){this.stage=0;this.elts=[];this.pos=0;this.start=e.start;this.advance(e.content)}e.prototype.nextLine=function(e,t,r){if(this.stage==-1)return false;var n=r.content+"\n"+t.scrub();var i=this.advance(n);if(i>-1&&i<n.length)return this.complete(e,r,i);return false};e.prototype.finish=function(e,t){if((this.stage==2||this.stage==3)&&P(t.content,this.pos)==t.content.length)return this.complete(e,t,t.content.length);return false};e.prototype.complete=function(e,t,r){e.addLeafElement(t,pe(w.LinkReference,this.start,this.start+r,this.elts));return true};e.prototype.nextStage=function(e){if(e){this.pos=e.to-this.start;this.elts.push(e);this.stage++;return true}if(e===false)this.stage=-1;return false};e.prototype.advance=function(e){for(;;){if(this.stage==-1){return-1}else if(this.stage==0){if(!this.nextStage(we(e,this.pos,this.start,true)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(pe(w.LinkMark,this.pos+this.start,this.pos+this.start+1));this.pos++}else if(this.stage==1){if(!this.nextStage(Le(e,P(e,this.pos),this.start)))return-1}else if(this.stage==2){var t=P(e,this.pos),r=0;if(t>this.pos){var n=Se(e,t,this.start);if(n){var i=K(e,n.to-this.start);if(i>0){this.nextStage(n);r=i}}}if(!r)r=K(e,this.pos);return r>0&&r<e.length?r:-1}else{return K(e,this.pos)}}};return e}();function K(e,t){for(;t<e.length;t++){var r=e.charCodeAt(t);if(r==10)break;if(!I(r))return-1}return t}var V=function(){function e(){}e.prototype.nextLine=function(e,t,r){var n=t.depth<e.stack.length?-1:z(t);var i=t.next;if(n<0)return false;var s=pe(w.HeaderMark,e.lineStart+t.pos,e.lineStart+n);e.nextLine();e.addLeafElement(r,pe(i==61?w.SetextHeading1:w.SetextHeading2,r.start,e.prevLineEnd(),__spreadArray(__spreadArray([],e.parser.parseInline(r.content,r.start)),[s])));return true};e.prototype.finish=function(){return false};return e}();var W={LinkReference:function(e,t){return t.content.charCodeAt(0)==91?new Z(t):null},SetextHeading:function(){return new V}};var G=[function(e,t){return X(t)>=0},function(e,t){return M(t)>=0},function(e,t){return H(t)>=0},function(e,t){return j(t,e,true)>=0},function(e,t){return R(t,e,true)>=0},function(e,t){return N(t,e,true)>=0},function(e,t){return $(t,e,true)>=0}];var J=function(){function e(e,t,r){this.from=e;this.parse=t;this.finish=r}return e}();var Y=function(){function e(e,t,r,n){this.parser=e;this.input=t;this.parseContext=n;this.line=new A;this.atEnd=false;this.nested=null;this.lineStart=r;this.block=S.create(w.Document,0,this.lineStart,0,0);this.stack=[this.block];this.fragments=(n===null||n===void 0?void 0:n.fragments)?new Pe(n.fragments,t):null;this.updateLine(t.lineAfter(this.lineStart))}Object.defineProperty(e.prototype,"pos",{get:function(){return this.nested?this.nested.parse.pos:this.lineStart},enumerable:false,configurable:true});e.prototype.advance=function(){if(this.nested){var e=this.nested.parse.advance();if(e){var t=this.nested.finish(e);if(t instanceof le)t=t.toTree(this.parser.nodeSet);this.addNode(t,this.nested.from);this.nested=null}return null}var r=this.line;for(;;){while(r.depth<this.stack.length)this.finishContext();for(var n=0,i=r.markers;n<i.length;n++){var s=i[n];this.addNode(s.type,s.from,s.to)}if(r.pos<r.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(r.basePos))return null;e:for(;;){for(var a=0,o=this.parser.blockParsers;a<o.length;a++){var f=o[a];if(f){var h=f(this,r);if(h!=false){if(h==true)return null;r.forward();continue e}}}break}var l=new C(this.lineStart+r.pos,r.text.slice(r.pos));for(var u=0,p=this.parser.leafBlockParsers;u<p.length;u++){var c=p[u];if(c){var d=c(this,l);if(d)l.parsers.push(d)}}e:while(this.nextLine()){if(r.pos==r.text.length)break;if(r.indent<r.baseIndent+4){for(var m=0,v=Ee.endLeafBlock;m<v.length;m++){var g=v[m];if(g(this,r))break e}}for(var k=0,x=l.parsers;k<x.length;k++){var y=x[k];if(y.nextLine(this,r,l))return null}l.content+="\n"+r.scrub();for(var b=0,L=r.markers;b<L.length;b++){var S=L[b];l.marks.push(S)}}this.finishLeaf(l);return null};e.prototype.reuseFragment=function(e){if(!this.fragments.moveTo(this.lineStart+e,this.lineStart)||!this.fragments.matches(this.block.hash))return false;var t=this.fragments.takeNodes(this);if(!t)return false;this.lineStart+=t;if(this.lineStart<this.input.length){this.lineStart++;this.updateLine(this.input.lineAfter(this.lineStart))}else{this.atEnd=true;this.updateLine("")}return true};e.prototype.nextLine=function(){this.lineStart+=this.line.text.length;if(this.lineStart>=this.input.length){this.atEnd=true;this.updateLine("");return false}else{this.lineStart++;this.updateLine(this.input.lineAfter(this.lineStart));return true}};e.prototype.updateLine=function(e){var t=this.line;t.reset(e);for(;t.depth<this.stack.length;t.depth++){var r=this.stack[t.depth],n=this.parser.skipContextMarkup[r.type];if(!n)throw new Error("Unhandled block context "+w[r.type]);if(!n(r,this,t))break;t.forward()}};e.prototype.prevLineEnd=function(){return this.atEnd?this.lineStart:this.lineStart-1};e.prototype.startContext=function(e,t,r){if(r===void 0){r=0}this.block=S.create(e,r,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length);this.stack.push(this.block)};e.prototype.startComposite=function(e,t,r){if(r===void 0){r=0}this.startContext(this.parser.getNodeType(e),t,r)};e.prototype.addNode=function(e,t,r){if(typeof e=="number")e=new i(this.parser.nodeSet.types[e],fe,fe,(r!==null&&r!==void 0?r:this.prevLineEnd())-t);this.block.children.push(e);this.block.positions.push(t-this.block.from)};e.prototype.addElement=function(e){this.block.children.push(e.toTree(this.parser.nodeSet));this.block.positions.push(e.from-this.block.from)};e.prototype.addLeafElement=function(e,t){this.addNode(this.buffer.writeElements(Ae(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)};e.prototype.startNested=function(e,t,r){this.nested=new J(e,t,r)};e.prototype.finishContext=function(){this.block=oe(this.stack,this.parser.nodeSet)};e.prototype.finish=function(){while(this.stack.length>1)this.finishContext();return this.block.toTree(this.parser.nodeSet,this.lineStart)};e.prototype.forceFinish=function(){var e=this.stack.map((function(e){return e.copy()})),t=this.lineStart;if(this.nested){var r=e[e.length-1];var n=this.nested.finish(this.nested.parse.forceFinish());if(n instanceof le)n=n.toTree(this.parser.nodeSet);var s=t-this.nested.from;if(n.length>s)n=new i(n.type,n.children.filter((function(e,t){return n.positions[t]<=s})),n.positions.filter((function(e){return e<=s})),s);r.children.push(n);r.positions.push(this.nested.from)}while(e.length>1)oe(e,this.parser.nodeSet);return e[0].toTree(this.parser.nodeSet,t)};e.prototype.finishLeaf=function(e){for(var t=0,r=e.parsers;t<r.length;t++){var n=r[t];if(n.finish(this,e))return}var i=Ae(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(i,-e.start).finish(w.Paragraph,e.content.length),e.start)};e.prototype.elt=function(e,t,r,n){if(typeof e=="string")return pe(this.parser.getNodeType(e),t,r,n);return new ue(e,t)};Object.defineProperty(e.prototype,"buffer",{get:function(){return new he(this.parser.nodeSet)},enumerable:false,configurable:true});return e}();var ee=function(){function e(e,t,r,n,i,s,a,o,f,h){this.nodeSet=e;this.codeParser=t;this.htmlParser=r;this.blockParsers=n;this.leafBlockParsers=i;this.blockNames=s;this.endLeafBlock=a;this.skipContextMarkup=o;this.inlineParsers=f;this.inlineNames=h;this.nodeTypes=Object.create(null);for(var l=0,u=e.types;l<u.length;l++){var p=u[l];this.nodeTypes[p.name]=p.id}}e.prototype.startParse=function(e,t,r){if(t===void 0){t=0}if(r===void 0){r={}}return new Y(this,e,t,r)};e.prototype.configure=function(i){var s=re(i);if(!s)return this;var a=this,o=a.nodeSet,f=a.skipContextMarkup;var h=this.blockParsers.slice(),l=this.leafBlockParsers.slice(),u=this.blockNames.slice(),p=this.inlineParsers.slice(),c=this.inlineNames.slice(),d=this.endLeafBlock.slice();if(te(s.defineNodes)){f=Object.assign({},f);var m=o.types.slice();var v=function(e){var n=typeof e=="string"?{name:e}:e,i=n.name,s=n.block,a=n.composite;if(m.some((function(e){return e.name==i})))return"continue";if(a)f[m.length]=function(e,t,r){return a(t,r,e.value)};var o=m.length;var h=a?["Block","BlockContext"]:!s?undefined:o>=w.ATXHeading1&&o<=w.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"];m.push(t.define({id:o,name:i,props:h&&[[r.group,h]]}))};for(var g=0,k=s.defineNodes;g<k.length;g++){var x=k[g];v(x)}o=new n(m)}if(te(s.props))o=o.extend.apply(o,s.props);if(te(s.remove)){for(var y=0,b=s.remove;y<b.length;y++){var L=b[y];var S=this.blockNames.indexOf(L),C=this.inlineNames.indexOf(L);if(S>-1)h[S]=l[S]=undefined;if(C>-1)p[C]=undefined}}if(te(s.parseBlock)){for(var A=0,T=s.parseBlock;A<T.length;A++){var B=T[A];var I=u.indexOf(B.name);if(I>-1){h[I]=B.parse;l[I]=B.leaf}else{var P=B.before?ne(u,B.before):B.after?ne(u,B.after)+1:u.length-1;h.splice(P,0,B.parse);l.splice(P,0,B.leaf);u.splice(P,0,B.name)}if(B.endLeaf)d.push(B.endLeaf)}}if(te(s.parseInline)){for(var E=0,M=s.parseInline;E<M.length;E++){var H=M[E];var I=c.indexOf(H.name);if(I>-1){p[I]=H.parse}else{var P=H.before?ne(c,H.before):H.after?ne(c,H.after)+1:c.length-1;p.splice(P,0,H.parse);c.splice(P,0,H.name)}}}return new e(o,s.codeParser||this.codeParser,s.htmlParser||this.htmlParser,h,l,u,d,f,p,c)};e.prototype.getNodeType=function(e){var t=this.nodeTypes[e];if(t==null)throw new RangeError("Unknown node type '"+e+"'");return t};e.prototype.parseInline=function(e,t){var r=new Ce(this,e,t);e:for(var n=t;n<r.end;){var i=r.char(n);for(var s=0,a=this.inlineParsers;s<a.length;s++){var o=a[s];if(o){var f=o(r,i,n);if(f>=0){n=f;continue e}}}n++}return r.resolveMarkers(0)};return e}();function te(e){return e!=null&&e.length>0}function re(e){if(!Array.isArray(e))return e;if(e.length==0)return null;var t=re(e[0]);if(e.length==1)return t;var r=re(e.slice(1));if(!r||!t)return t||r;var n=function(e,t){return(e||fe).concat(t||fe)};return{props:n(t.props,r.props),codeParser:r.codeParser||t.codeParser,htmlParser:r.htmlParser||t.htmlParser,defineNodes:n(t.defineNodes,r.defineNodes),parseBlock:n(t.parseBlock,r.parseBlock),parseInline:n(t.parseInline,r.parseInline),remove:n(t.remove,r.remove)}}function ne(e,t){var r=e.indexOf(t);if(r<0)throw new RangeError("Position specified relative to unknown parser "+t);return r}var ie=[t.none];for(var se=1,ae=void 0;ae=w[se];se++){ie[se]=t.define({id:se,name:ae,props:se>=w.Escape?[]:[[r.group,se in B?["Block","BlockContext"]:["Block","LeafBlock"]]]})}function oe(e,t){var r=e.pop();var n=e[e.length-1];n.children.push(r.toTree(t));n.positions.push(r.from-n.from);return n}var fe=[];var he=function(){function e(e){this.nodeSet=e;this.content=[];this.nodes=[]}e.prototype.write=function(e,t,r,n){if(n===void 0){n=0}this.content.push(e,t,r,4+n*4);return this};e.prototype.writeElements=function(e,t){if(t===void 0){t=0}for(var r=0,n=e;r<n.length;r++){var i=n[r];i.writeTo(this,t)}return this};e.prototype.finish=function(e,t){return i.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})};return e}();var le=function(){function e(e,t,r,n){if(n===void 0){n=fe}this.type=e;this.from=t;this.to=r;this.children=n}e.prototype.writeTo=function(e,t){var r=e.content.length;e.writeElements(this.children,t);e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-r)};e.prototype.toTree=function(e){return new he(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)};return e}();var ue=function(){function e(e,t){this.tree=e;this.from=t}Object.defineProperty(e.prototype,"to",{get:function(){return this.from+this.tree.length},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"type",{get:function(){return this.tree.type.id},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"children",{get:function(){return fe},enumerable:false,configurable:true});e.prototype.writeTo=function(e,t){e.nodes.push(this.tree);e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)};e.prototype.toTree=function(){return this.tree};return e}();function pe(e,t,r,n){return new le(e,t,r,n)}var ce={resolve:"Emphasis",mark:"EmphasisMark"};var de={resolve:"Emphasis",mark:"EmphasisMark"};var me={},ve={};var ge=function(){function e(e,t,r,n){this.type=e;this.from=t;this.to=r;this.side=n}return e}();var ke="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";var xe=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{xe=/[\p{Pc}|\p{Pd}|\p{Pe}|\p{Pf}|\p{Pi}|\p{Po}|\p{Ps}]/u}catch(st){}var ye={Escape:function(e,t,r){if(t!=92||r==e.end-1)return-1;var n=e.char(r+1);for(var i=0;i<ke.length;i++)if(ke.charCodeAt(i)==n)return e.append(pe(w.Escape,r,r+2));return-1},Entity:function(e,t,r){if(t!=38)return-1;var n=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(e.slice(r+1,r+31));return n?e.append(pe(w.Entity,r,r+1+n[0].length)):-1},InlineCode:function(e,t,r){if(t!=96||r&&e.char(r-1)==96)return-1;var n=r+1;while(n<e.end&&e.char(n)==96)n++;var i=n-r,s=0;for(;n<e.end;n++){if(e.char(n)==96){s++;if(s==i&&e.char(n+1)!=96)return e.append(pe(w.InlineCode,r,n+1,[pe(w.CodeMark,r,r+i),pe(w.CodeMark,n+1-i,n+1)]))}else{s=0}}return-1},HTMLTag:function(e,t,r){if(t!=60||r==e.end-1)return-1;var n=e.slice(r+1,e.end);var i=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(n);if(i)return e.append(pe(w.URL,r,r+1+i[0].length));var a=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(n);if(a)return e.append(pe(w.Comment,r,r+1+a[0].length));var o=/^\?[^]*?\?>/.exec(n);if(o)return e.append(pe(w.ProcessingInstruction,r,r+1+o[0].length));var f=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(n);if(!f)return-1;var h=[];if(e.parser.htmlParser){var l=e.parser.htmlParser.startParse(s(e.slice(r,r+1+f[0].length)),0,{}),u;while(!(u=l.advance())){}h=u.children.map((function(e,t){return new ue(e,r+u.positions[t])}))}return e.append(pe(w.HTMLTag,r,r+1+f[0].length,h))},Emphasis:function(e,t,r){if(t!=95&&t!=42)return-1;var n=r+1;while(e.char(n)==t)n++;var i=e.slice(r-1,r),s=e.slice(n,n+1);var a=xe.test(i),o=xe.test(s);var f=/\s|^$/.test(i),h=/\s|^$/.test(s);var l=!h&&(!o||f||a);var u=!f&&(!a||h||o);var p=l&&(t==42||!u||a);var c=u&&(t==42||!l||o);return e.append(new ge(t==95?ce:de,r,n,(p?1:0)|(c?2:0)))},HardBreak:function(e,t,r){if(t==92&&e.char(r+1)==10)return e.append(pe(w.HardBreak,r,r+2));if(t==32){var n=r+1;while(e.char(n)==32)n++;if(e.char(n)==10&&n>=r+2)return e.append(pe(w.HardBreak,r,n+1))}return-1},Link:function(e,t,r){return t==91?e.append(new ge(me,r,r+1,1)):-1},Image:function(e,t,r){return t==33&&e.char(r+1)==91?e.append(new ge(ve,r,r+2,1)):-1},LinkEnd:function(e,t,r){if(t!=93)return-1;for(var n=e.parts.length-1;n>=0;n--){var i=e.parts[n];if(i instanceof ge&&(i.type==me||i.type==ve)){if(!i.side||e.skipSpace(i.to)==r&&!/[(\[]/.test(e.slice(r+1,r+2))){e.parts[n]=null;return-1}var s=e.takeContent(n);var a=e.parts[n]=be(e,s,i.type==me?w.Link:w.Image,i.from,r+1);if(i.type==me)for(var o=0;o<n;o++){var f=e.parts[o];if(f instanceof ge&&f.type==me)f.side=0}return a.to}}return-1}};function be(e,t,r,n,i){var s=e.text,a=e.char(i),o=i;t.unshift(pe(w.LinkMark,n,n+(r==w.Image?2:1)));t.push(pe(w.LinkMark,i-1,i));if(a==40){var f=e.skipSpace(i+1);var h=Le(s,f-e.offset,e.offset),l=void 0;if(h){f=e.skipSpace(h.to);l=Se(s,f-e.offset,e.offset);if(l)f=e.skipSpace(l.to)}if(e.char(f)==41){t.push(pe(w.LinkMark,i,i+1));o=f+1;if(h)t.push(h);if(l)t.push(l);t.push(pe(w.LinkMark,f,o))}}else if(a==91){var u=we(s,i-e.offset,e.offset,false);if(u){t.push(u);o=u.to}}return pe(r,n,o,t)}function Le(e,t,r){var n=e.charCodeAt(t);if(n==60){for(var i=t+1;i<e.length;i++){var s=e.charCodeAt(i);if(s==62)return pe(w.URL,t+r,i+1+r);if(s==60||s==10)return false}return null}else{var a=0,i=t;for(var o=false;i<e.length;i++){var s=e.charCodeAt(i);if(I(s)){break}else if(o){o=false}else if(s==40){a++}else if(s==41){if(!a)break;a--}else if(s==92){o=true}}return i>t?pe(w.URL,t+r,i+r):i==e.length?null:false}}function Se(e,t,r){var n=e.charCodeAt(t);if(n!=39&&n!=34&&n!=40)return false;var i=n==40?41:n;for(var s=t+1,a=false;s<e.length;s++){var o=e.charCodeAt(s);if(a)a=false;else if(o==i)return pe(w.LinkTitle,t+r,s+1+r);else if(o==92)a=true}return null}function we(e,t,r,n){for(var i=false,s=t+1,a=Math.min(e.length,s+999);s<a;s++){var o=e.charCodeAt(s);if(i)i=false;else if(o==93)return n?false:pe(w.LinkLabel,t+r,s+1+r);else{if(n&&!I(o))n=false;if(o==91)return false;else if(o==92)i=true}}return null}var Ce=function(){function e(e,t,r){this.parser=e;this.text=t;this.offset=r;this.parts=[]}e.prototype.char=function(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)};Object.defineProperty(e.prototype,"end",{get:function(){return this.offset+this.text.length},enumerable:false,configurable:true});e.prototype.slice=function(e,t){return this.text.slice(e-this.offset,t-this.offset)};e.prototype.append=function(e){this.parts.push(e);return e.to};e.prototype.addDelimiter=function(e,t,r,n,i){return this.append(new ge(e,t,r,(n?1:0)|(i?2:0)))};e.prototype.addElement=function(e){return this.append(e)};e.prototype.resolveMarkers=function(e){for(var t=e;t<this.parts.length;t++){var r=this.parts[t];if(!(r instanceof ge&&r.type.resolve&&r.side&2))continue;var n=r.type==ce||r.type==de;var i=r.to-r.from;var s=void 0,a=t-1;for(;a>=e;a--){var o=this.parts[a];if(!(o instanceof ge&&o.side&1&&o.type==r.type)||n&&(r.side&1||o.side&2)&&(o.to-o.from+i)%3==0&&((o.to-o.from)%3||i%3))continue;s=o;break}if(!s)continue;var f=r.type.resolve,h=[];var l=s.from,u=r.to;if(n){var p=Math.min(2,s.to-s.from,i);l=s.to-p;u=r.from+p;f=p==1?"Emphasis":"StrongEmphasis"}if(s.type.mark)h.push(this.elt(s.type.mark,l,s.to));for(var c=a+1;c<t;c++){if(this.parts[c]instanceof le)h.push(this.parts[c]);this.parts[c]=null}if(r.type.mark)h.push(this.elt(r.type.mark,r.from,u));var d=this.elt(f,l,u,h);this.parts[a]=n&&s.from!=l?new ge(s.type,s.from,l,s.side):null;var m=this.parts[t]=n&&r.to!=u?new ge(r.type,u,r.to,r.side):null;if(m)this.parts.splice(t,0,d);else this.parts[t]=d}var v=[];for(var t=e;t<this.parts.length;t++){var o=this.parts[t];if(o instanceof le)v.push(o)}return v};e.prototype.findOpeningDelimiter=function(e){for(var t=this.parts.length-1;t>=0;t--){var r=this.parts[t];if(r instanceof ge&&r.type==e)return t}return null};e.prototype.takeContent=function(e){var t=this.resolveMarkers(e);this.parts.length=e;return t};e.prototype.skipSpace=function(e){return P(this.text,e-this.offset)+this.offset};e.prototype.elt=function(e,t,r,n){if(typeof e=="string")return pe(this.parser.getNodeType(e),t,r,n);return new ue(e,t)};return e}();function Ae(e,t){if(!t.length)return e;if(!e.length)return t;var r=e.slice(),n=0;for(var i=0,s=t;i<s.length;i++){var a=s[i];while(n<r.length&&r[n].to<a.to)n++;if(n<r.length&&r[n].from<a.from){var o=r[n];if(o instanceof le)r[n]=new le(o.type,o.from,o.to,Ae(o.children,[a]))}else{r.splice(n++,0,a)}}return r}var Te=new WeakMap;function Be(e,t){for(var r=0,n=e;r<n.length;r++){var s=n[r];Te.set(s,t);if(s instanceof i&&s.type.isAnonymous)Be(s.children,t)}}var Ie=[w.CodeBlock,w.ListItem,w.OrderedList,w.BulletList];var Pe=function(){function e(e,t){this.fragments=e;this.input=t;this.i=0;this.fragment=null;this.fragmentEnd=-1;this.cursor=null;if(e.length)this.fragment=e[this.i++]}e.prototype.nextFragment=function(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null;this.cursor=null;this.fragmentEnd=-1};e.prototype.moveTo=function(e,t){while(this.fragment&&this.fragment.to<=e)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return false;if(this.fragmentEnd<0){var r=this.fragment.to;while(r>0&&this.input.get(r-1)!=10)r--;this.fragmentEnd=r?r-1:0}var n=this.cursor;if(!n){n=this.cursor=this.fragment.tree.cursor();n.firstChild()}var i=e+this.fragment.offset;while(n.to<=i)if(!n.parent())return false;for(;;){if(n.from>=i)return this.fragment.from<=t;if(!n.childAfter(i))return false}};e.prototype.matches=function(e){var t=this.cursor.tree;return t&&Te.get(t)==e};e.prototype.takeNodes=function(e){var t=this.cursor,r=this.fragment.offset;var n=e.lineStart,i=n,s=e.block.children.length;var a=i,o=s;for(;;){if(t.to-r>=this.fragmentEnd){if(t.type.isAnonymous&&t.firstChild())continue;break}e.addNode(t.tree,t.from-r);if(t.type.is("Block")){if(Ie.indexOf(t.type.id)<0){i=t.to-r;s=e.block.children.length}else{i=a;s=o;a=t.to-r;o=e.block.children.length}}if(!t.nextSibling())break}while(e.block.children.length>s){e.block.children.pop();e.block.positions.pop()}return i-n};return e}();var Ee=new ee(new n(ie),null,null,Object.keys(Q).map((function(e){return Q[e]})),Object.keys(Q).map((function(e){return W[e]})),Object.keys(Q),G,B,Object.keys(ye).map((function(e){return ye[e]})),Object.keys(ye));var Me={resolve:"Strikethrough",mark:"StrikethroughMark"};var He={defineNodes:["Strikethrough","StrikethroughMark"],parseInline:[{name:"Strikethrough",parse:function(e,t,r){if(t!=126||e.char(r+1)!=126)return-1;return e.addDelimiter(Me,r,r+2,true,true)},after:"Emphasis"}]};function Ne(e,t,r,n,i){if(r===void 0){r=0}if(i===void 0){i=0}var s=0,a=true,o=-1,f=-1,h=false;var l=function(){n.push(e.elt("TableCell",i+o,i+f,e.parser.parseInline(t.slice(o,f),i+o)))};for(var u=r;u<t.length;u++){var p=t.charCodeAt(u);if(p==124&&!h){if(!a||o>-1)s++;a=false;if(n){if(o>-1)l();n.push(e.elt("TableDelimiter",u+i,u+i+1))}o=f=-1}else if(h||p!=32&&p!=9){if(o<0)o=u;f=u+1}h=!h&&p==92}if(o>-1){s++;if(n)l()}return s}function Oe(e,t){for(var r=t;r<e.length;r++){var n=e.charCodeAt(r);if(n==124)return true;if(n==92)r++}return false}var je=function(){function e(){this.rows=null}e.prototype.nextLine=function(e,t,r){if(this.rows==null){this.rows=false;var n=void 0;if((t.next==45||t.next==58||t.next==124)&&/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/.test(n=t.text.slice(t.pos))){var i=[],s=Ne(e,r.content,0,i,r.start);if(s==Ne(e,n,t.pos))this.rows=[e.elt("TableHeader",r.start,r.start+r.content.length,i),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)]}}else if(this.rows){var a=[];Ne(e,t.text,t.pos,a,e.lineStart);this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,a))}return false};e.prototype.finish=function(e,t){if(this.rows){this.emit(e,t);return true}return false};e.prototype.emit=function(e,t){e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows))};return e}();var Re={defineNodes:[{name:"Table",block:true},"TableHeader","TableRow","TableCell","TableDelimiter"],parseBlock:[{name:"Table",leaf:function(e,t){return Oe(t.content,0)?new je:null},before:"SetextHeading"}]};var Xe=function(){function e(){}e.prototype.nextLine=function(){return false};e.prototype.finish=function(e,t){e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,__spreadArray([e.elt("TaskMarker",t.start,t.start+3)],e.parser.parseInline(t.content.slice(3),t.start+3))));return true};return e}();var ze={defineNodes:[{name:"Task",block:true},"TaskMarker"],parseBlock:[{name:"TaskList",leaf:function(e,t){return/^\[[ xX]\]/.test(t.content)&&e.parser.nodeSet.types[e.block.type].name=="ListItem"?new Xe:null},after:"SetextHeading"}]};var De=[Re,ze,He];function _e(e,t,r){return function(n,i,s){if(i!=e||n.char(s+1)==e)return-1;var a=[n.elt(r,s,s+1)];for(var o=s+1;o<n.end;o++){var f=n.char(o);if(f==e)return n.addElement(n.elt(t,s,o+1,a.concat(n.elt(r,o,o+1))));if(f==92)a.push(n.elt("Escape",o,o+++2));if(I(f))break}return-1}}var Fe={defineNodes:["Superscript","SuperscriptMark"],parseInline:[{name:"Superscript",parse:_e(94,"Superscript","SuperscriptMark")}]};var qe={defineNodes:["Subscript","SubscriptMark"],parseInline:[{name:"Subscript",parse:_e(126,"Subscript","SubscriptMark")}]};var $e={defineNodes:["Emoji"],parseInline:[{name:"Emoji",parse:function(e,t,r){var n;if(t!=58||!(n=/^[a-zA-Z_0-9]+:/.exec(e.slice(r+1,e.end))))return-1;return e.addElement(e.elt("Emoji",r,r+1+n[0].length))}}]};var Ue=c({block:{open:"\x3c!--",close:"--\x3e"}});var Qe=Ee.configure({props:[d({"Blockquote/...":m.quote,HorizontalRule:m.contentSeparator,"ATXHeading1/... SetextHeading1/...":m.heading1,"ATXHeading2/... SetextHeading2/...":m.heading2,"ATXHeading3/...":m.heading3,"ATXHeading4/...":m.heading4,"ATXHeading5/...":m.heading5,"ATXHeading6/...":m.heading6,"Comment CommentBlock":m.comment,Escape:m.escape,Entity:m.character,"Emphasis/...":m.emphasis,"StrongEmphasis/...":m.strong,"Link/... Image/...":m.link,"OrderedList/... BulletList/...":m.list,"BlockQuote/...":m.quote,"InlineCode/... CodeBlock FencedCode":m.monospace,URL:m.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":m.processingInstruction,"CodeInfo LinkLabel":m.labelName,LinkTitle:m.string,Paragraph:m.content}),k.add((function(e){if(!e.is("Block")||e.is("Document"))return undefined;return function(e,t){return{from:t.doc.lineAt(e.from).to,to:e.to}}})),x.add({Document:function(){return null}}),y.add({Document:Ue})],htmlParser:b.parser.configure({dialect:"noMatch"})});var Ze=e("commonmarkLanguage",We(Qe));var Ke=Qe.configure([De,qe,Fe,$e,{props:[d({"TableDelimiter SubscriptMark SuperscriptMark StrikethroughMark":m.processingInstruction,"TableHeader/...":m.heading,"Strikethrough/...":m.strikethrough,TaskMarker:m.atom,Task:m.list,Emoji:m.character,"Subscript Superscript":m.special(m.content),TableCell:m.content})]}]);var Ve=e("markdownLanguage",We(Ke));function We(e){return new a(Ue,e,e.nodeSet.types.find((function(e){return e.name=="Document"})))}function Ge(e,t){return{codeParser:function(r){var n=r&&v.matchLanguageName(e,r,true);if(!n)return t?t.parser:null;if(n.support)return n.support.language.parser;return g.getSkippingParser(n.load())}}}function Je(e,t){return t.sliceString(e.from,e.from+50)}function Ye(e,t,r){var n=[];for(var i=e;i&&i.name!="Document";i=i.parent){if(i.name=="ListItem"||i.name=="Blockquote")n.push(i)}var s=[],a=0;for(var o=n.length-1;o>=0;o--){var f=n[o],h=void 0;if(f.name=="Blockquote"&&(h=/^\s*> ?/.exec(t.slice(a)))){s.push({from:a,string:h[0],node:f});a+=h[0].length}else if(f.name=="ListItem"&&f.parent.name=="OrderedList"&&(h=/^\s*\d+([.)])\s*/.exec(Je(f,r)))){var l=h[1].length>=4?h[0].length-h[1].length+1:h[0].length;s.push({from:a,string:t.slice(a,a+l).replace(/\S/g," "),node:f});a+=l}else if(f.name=="ListItem"&&f.parent.name=="BulletList"&&(h=/^\s*[-+*] (\s*)/.exec(Je(f,r)))){var l=h[1].length>=4?h[0].length-h[1].length:h[0].length;s.push({from:a,string:t.slice(a,a+l).replace(/\S/g," "),node:f});a+=l}}return s}function et(e,t,r){for(var n=-1,i=e;;){if(i.name=="ListItem"){var s=/^(\s*)(\d+)(?=[.)])/.exec(t.sliceString(i.from,i.from+10));if(!s)return;var a=+s[2];if(n>=0){if(a!=n+1)return;r.push({from:i.from+s[1].length,to:i.from+s[0].length,insert:String(n+2)})}n=a}var o=i.nextSibling;if(!o)break;i=o}}var tt=e("insertNewlineContinueMarkup",(function(e){var t=e.state,r=e.dispatch;var n=o(t);var i=null,s=t.changeByRange((function(e){if(e.empty&&Ve.isActiveAt(t,e.from)){var r=t.doc.lineAt(e.from);var s=Ye(n.resolve(e.from,-1),r.text,t.doc);var a=e.from,o=[];if(s.length){var l=s[s.length-1],u=l.from+l.string.length;var p=e.from-r.from>=u&&!/\S/.test(r.text.slice(u,e.from-r.from));if(p){var c=/List/.test(l.node.name)?l.from:u;while(c>0&&/\s/.test(r.text[c-1]))c--;a=r.from+c}if(l.node.name=="ListItem"){if(p&&r.from>0&&!/[^\s>]/.test(t.doc.lineAt(r.from-1).text))return{range:f.cursor(a),changes:{from:a,to:e.from}};if(a<e.from&&l.node.parent.from==l.node.from){l.string=""}else{if(l.node.from>=r.from)l.string=r.text.slice(l.from,l.from+l.string.length);else l.string=/^\s*/.exec(r.text)[0].slice(0,l.string.length);if(l.node.parent.name=="OrderedList"&&a==e.from){l.string=l.string.replace(/\d+/,(function(e){return+e+1}));et(l.node,t.doc,o)}}}}var d=s.map((function(e){return e.string})).join("");if(e.from-r.from<d.length)d="";o.push({from:a,to:e.from,insert:h.of(["",d])});return{range:f.cursor(a+1+d.length),changes:o}}return i={range:e}}));if(i)return false;r(t.update(s,{scrollIntoView:true}));return true}));var rt=e("deleteMarkupBackward",(function(e){var t=e.state,r=e.dispatch;var n=o(t);var i=null,s=t.changeByRange((function(e){if(e.empty&&Ve.isActiveAt(t,e.from)){var r=t.doc.lineAt(e.from);var s=Ye(n.resolve(e.from,-1),r.text,t.doc);if(s.length){var a=s[s.length-1],o=a.from+a.string.length;if(e.from>o+r.from&&!/\S/.test(r.text.slice(o,e.from-r.from)))return{range:f.cursor(o+r.from),changes:{from:o+r.from,to:e.from}};if(e.from-r.from==o){var h=r.from+a.from;if(a.node.name=="ListItem"&&a.node.parent.from<a.node.from&&/\S/.test(r.text.slice(a.from,o)))return{range:e,changes:{from:h,to:h+a.string.length,insert:a.string}};if(h<e.from)return{range:f.cursor(h),changes:{from:h,to:e.from}}}}}return i={range:e}}));if(i)return false;r(t.update(s,{scrollIntoView:true}));return true}));var nt=e("markdownKeymap",[{key:"Enter",run:tt},{key:"Backspace",run:rt}]);function it(e){if(e===void 0){e={}}var t=e.codeLanguages,r=e.defaultCodeLanguage,n=e.addKeymap,i=n===void 0?true:n,s=e.base,a=s===void 0?Ze:s,o=a.parser;var f=e.extensions?[e.extensions]:[];if(!(o instanceof ee))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");if(t||r)f.push(Ge(t||[],r));return new l(We(o.configure(f)),i?u.extend(p.of(nt)):[])}}}}));