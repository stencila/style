var __extends=this&&this.__extends||function(){var t=function(e,n){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))t[n]=e[n]};return t(e,n)};return function(e,n){if(typeof n!=="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();var __awaiter=this&&this.__awaiter||function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;i=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(o=n.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(a[0]===6&&n.label<o[1]){n.label=o[1];o=a;break}if(o&&n.label<o[2]){n.label=o[2];n.ops.push(a);break}if(o[2])n.ops.pop();n.trys.pop();continue}a=e.call(t,n)}catch(s){a=[6,s];i=0}finally{r=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};System.register(["./p-c4c9d738.system.js","./p-f89c7fc9.system.js","./p-291b7cf4.system.js","./p-1ba9f457.system.js","./p-be456e54.system.js","./p-216a0e8d.system.js"],(function(t,e){"use strict";var n,r,i,o,a,s,u,c,l,f,h,d,p,v;return{setters:[function(t){n=t.r;r=t.h;i=t.a;o=t.c;a=t.H},function(t){s=t.g},function(t){u=t.H;c=t.X;l=t.J},function(t){f=t.c;h=t.a},function(t){d=t._},function(t){p=t.i;v=t.a}],execute:function(){t({a:Mh,c:U,d:rs,g:ws,k:Ns,n:js,o:tc,q:Ts,r:Ks,s:ss,u:Hs,v:ts});var m=f((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.sequenceS=e.sequenceT=e.getApplySemigroup=e.apS=e.apSecond=e.apFirst=e.ap=void 0;function n(t,e){return function(n){return function(r){return t.ap(t.map(r,(function(t){return function(n){return e.ap(t,n)}})),n)}}}e.ap=n;function r(t){return function(e){return function(n){return t.ap(t.map(n,(function(t){return function(){return t}})),e)}}}e.apFirst=r;function i(t){return function(e){return function(n){return t.ap(t.map(n,(function(){return function(t){return t}})),e)}}}e.apSecond=i;function o(t){return function(e,n){return function(r){return t.ap(t.map(r,(function(t){return function(n){var r;return Object.assign({},t,(r={},r[e]=n,r))}})),n)}}}e.apS=o;function a(t){return function(e){return{concat:function(n,r){return t.ap(t.map(n,(function(t){return function(n){return e.concat(t,n)}})),r)}}}}e.getApplySemigroup=a;function s(t,e,n){return function(r){var i=Array(n.length+1);for(var o=0;o<n.length;o++){i[o]=n[o]}i[n.length]=r;return e===0?t.apply(null,i):s(t,e-1,i)}}var u={1:function(t){return[t]},2:function(t){return function(e){return[t,e]}},3:function(t){return function(e){return function(n){return[t,e,n]}}},4:function(t){return function(e){return function(n){return function(r){return[t,e,n,r]}}}},5:function(t){return function(e){return function(n){return function(r){return function(i){return[t,e,n,r,i]}}}}}};function c(t){if(!u.hasOwnProperty(t)){u[t]=s(d.tuple,t-1,[])}return u[t]}function l(t){return function(){var e=[];for(var n=0;n<arguments.length;n++){e[n]=arguments[n]}var r=e.length;var i=c(r);var o=t.map(e[0],i);for(var a=1;a<r;a++){o=t.ap(o,e[a])}return o}}e.sequenceT=l;function f(t){var e=t.length;switch(e){case 1:return function(e){var n;return n={},n[t[0]]=e,n};case 2:return function(e){return function(n){var r;return r={},r[t[0]]=e,r[t[1]]=n,r}};case 3:return function(e){return function(n){return function(r){var i;return i={},i[t[0]]=e,i[t[1]]=n,i[t[2]]=r,i}}};case 4:return function(e){return function(n){return function(r){return function(i){var o;return o={},o[t[0]]=e,o[t[1]]=n,o[t[2]]=r,o[t[3]]=i,o}}}};case 5:return function(e){return function(n){return function(r){return function(i){return function(o){var a;return a={},a[t[0]]=e,a[t[1]]=n,a[t[2]]=r,a[t[3]]=i,a[t[4]]=o,a}}}}};default:return s((function(){var n=[];for(var r=0;r<arguments.length;r++){n[r]=arguments[r]}var i={};for(var o=0;o<e;o++){i[t[o]]=n[o]}return i}),e-1,[])}}function h(t){return function(e){var n=Object.keys(e);var r=n.length;var i=f(n);var o=t.map(e[n[0]],i);for(var a=1;a<r;a++){o=t.ap(o,e[n[a]])}return o}}e.sequenceS=h}));var g=f((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.getFunctorComposition=e.bindTo=e.flap=e.map=void 0;function n(t,e){return function(n){return function(r){return t.map(r,(function(t){return e.map(t,n)}))}}}e.map=n;function r(t){return function(e){return function(n){return t.map(n,(function(t){return t(e)}))}}}e.flap=r;function i(t){return function(e){return function(n){return t.map(n,(function(t){var n;return n={},n[e]=t,n}))}}}e.bindTo=i;function o(t,e){var r=n(t,e);return{map:function(t,e){return d.pipe(t,r(e))}}}e.getFunctorComposition=o}));var y=f((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.eqDate=e.eqNumber=e.eqString=e.eqBoolean=e.eq=e.strictEqual=e.getStructEq=e.getTupleEq=e.Contravariant=e.getMonoid=e.getSemigroup=e.eqStrict=e.URI=e.contramap=e.tuple=e.struct=e.fromEquals=void 0;function n(t){return{equals:function(e,n){return e===n||t(e,n)}}}e.fromEquals=n;var r=function(t){return n((function(e,n){for(var r in t){if(!t[r].equals(e[r],n[r])){return false}}return true}))};e.struct=r;var i=function(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}return n((function(e,n){return t.every((function(t,r){return t.equals(e[r],n[r])}))}))};e.tuple=i;var o=function(t,n){return d.pipe(t,e.contramap(n))};var a=function(t){return function(e){return n((function(n,r){return e.equals(t(n),t(r))}))}};e.contramap=a;e.URI="Eq";e.eqStrict={equals:function(t,e){return t===e}};var s={equals:function(){return true}};var u=function(){return{concat:function(t,e){return n((function(n,r){return t.equals(n,r)&&e.equals(n,r)}))}}};e.getSemigroup=u;var c=function(){return{concat:e.getSemigroup().concat,empty:s}};e.getMonoid=c;e.Contravariant={URI:e.URI,contramap:o};e.getTupleEq=e.tuple;e.getStructEq=e.struct;e.strictEqual=e.eqStrict.equals;e.eq=e.Contravariant;e.eqBoolean=e.eqStrict;e.eqString=e.eqStrict;e.eqNumber=e.eqStrict;e.eqDate={equals:function(t,e){return t.valueOf()===e.valueOf()}}}));var b=f((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.getApplicativeComposition=e.getApplicativeMonoid=void 0;function n(t){var e=m.getApplySemigroup(t);return function(n){return{concat:e(n).concat,empty:t.of(n.empty)}}}e.getApplicativeMonoid=n;function r(t,e){var n=g.getFunctorComposition(t,e).map;var r=m.ap(t,e);return{map:n,of:function(n){return t.of(e.of(n))},ap:function(t,e){return d.pipe(t,r(e))}}}e.getApplicativeComposition=r}));var w=f((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.bind=e.chainFirst=void 0;function n(t){return function(e){return function(n){return t.chain(n,(function(n){return t.map(e(n),(function(){return n}))}))}}}e.chainFirst=n;function r(t){return function(e,n){return function(r){return t.chain(r,(function(r){return t.map(n(r),(function(t){var n;return Object.assign({},r,(n={},n[e]=t,n))}))}))}}}e.bind=r}));var x=f((function(t,e){var n=h&&h.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(e,"__esModule",{value:true});e.fromReadonlyNonEmptyArray=e.has=e.isLeft=e.isSome=void 0;var r=function(t){return t._tag==="Some"};e.isSome=r;var i=function(t){return t._tag==="Left"};e.isLeft=i;e.has=Object.prototype.hasOwnProperty;var o=function(t){return n([t[0]],t.slice(1))};e.fromReadonlyNonEmptyArray=o}));var k=f((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.right=e.left=e.flap=e.Functor=e.Bifunctor=e.URI=e.bimap=e.mapLeft=e.map=e.separated=void 0;var n=function(t,e){return{left:t,right:e}};e.separated=n;var r=function(t,n){return d.pipe(t,e.map(n))};var i=function(t,n){return d.pipe(t,e.mapLeft(n))};var o=function(t,n,r){return d.pipe(t,e.bimap(n,r))};var a=function(t){return function(n){return e.separated(e.left(n),t(e.right(n)))}};e.map=a;var s=function(t){return function(n){return e.separated(t(e.left(n)),e.right(n))}};e.mapLeft=s;var u=function(t,n){return function(r){return e.separated(t(e.left(r)),n(e.right(r)))}};e.bimap=u;e.URI="Separated";e.Bifunctor={URI:e.URI,mapLeft:i,bimap:o};e.Functor={URI:e.URI,map:r};e.flap=g.flap(e.Functor);var c=function(t){return t.left};e.left=c;var l=function(t){return t.right};e.right=l}));var S=f((function(t,e){var n=h&&h.__createBinding||(Object.create?function(t,e,n,r){if(r===undefined)r=n;Object.defineProperty(t,r,{enumerable:true,get:function(){return e[n]}})}:function(t,e,n,r){if(r===undefined)r=n;t[r]=e[n]});var r=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var i=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i))n(e,t,i);r(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.getFirstMonoid=e.getOrd=e.getEq=e.getShow=e.URI=e.wilt=e.wither=e.sequence=e.traverse=e.partitionMap=e.partition=e.filterMap=e.filter=e.separate=e.compact=e.reduceRight=e.foldMap=e.reduce=e.duplicate=e.extend=e.throwError=e.zero=e.alt=e.altW=e.flatten=e.chain=e.of=e.ap=e.map=e.toUndefined=e.toNullable=e.chainNullableK=e.fromNullableK=e.tryCatchK=e.tryCatch=e.fromNullable=e.getOrElse=e.getOrElseW=e.fold=e.match=e.foldW=e.matchW=e.fromEither=e.getRight=e.getLeft=e.fromPredicate=e.some=e.none=e.isNone=e.isSome=void 0;e.getApplyMonoid=e.getApplySemigroup=e.option=e.mapNullable=e.sequenceArray=e.traverseArray=e.traverseArrayWithIndex=e.apS=e.bind=e.bindTo=e.Do=e.getRefinement=e.exists=e.elem=e.MonadThrow=e.Witherable=e.Traversable=e.Filterable=e.Compactable=e.Extend=e.Alternative=e.Alt=e.Foldable=e.chainFirst=e.Monad=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.Pointed=e.flap=e.Functor=e.getMonoid=e.getLastMonoid=void 0;var o=i(x);e.isSome=o.isSome;var a=function(t){return t._tag==="None"};e.isNone=a;e.none={_tag:"None"};var s=function(t){return{_tag:"Some",value:t}};e.some=s;function u(t){return function(n){return t(n)?e.some(n):e.none}}e.fromPredicate=u;function c(t){return t._tag==="Right"?e.none:e.some(t.left)}e.getLeft=c;function l(t){return t._tag==="Left"?e.none:e.some(t.right)}e.getRight=l;e.fromEither=l;var f=function(t,n){return function(r){return e.isNone(r)?t():n(r.value)}};e.matchW=f;e.foldW=e.matchW;e.match=e.matchW;e.fold=e.match;var p=function(t){return function(n){return e.isNone(n)?t():n.value}};e.getOrElseW=p;e.getOrElse=e.getOrElseW;var v=function(t){return t==null?e.none:e.some(t)};e.fromNullable=v;var y=function(t){try{return e.some(t())}catch(n){return e.none}};e.tryCatch=y;var S=function(t){return function(){var n=[];for(var r=0;r<arguments.length;r++){n[r]=arguments[r]}return e.tryCatch((function(){return t.apply(void 0,n)}))}};e.tryCatchK=S;var A=function(t){return d.flow(t,e.fromNullable)};e.fromNullableK=A;var M=function(t){return function(n){return e.isNone(n)?e.none:e.fromNullable(t(n.value))}};e.chainNullableK=M;e.toNullable=e.match(d.constNull,d.identity);e.toUndefined=e.match(d.constUndefined,d.identity);var C=function(t,n){return d.pipe(t,e.map(n))};var O=function(t,n){return d.pipe(t,e.ap(n))};var I=function(t,n){return d.pipe(t,e.chain(n))};var R=function(t,n,r){return d.pipe(t,e.reduce(n,r))};var E=function(t){var n=e.foldMap(t);return function(t,e){return d.pipe(t,n(e))}};var P=function(t,n,r){return d.pipe(t,e.reduceRight(n,r))};var D=function(t){var n=e.traverse(t);return function(t,e){return d.pipe(t,n(e))}};var T=function(t,n){return d.pipe(t,e.alt(n))};var W=function(t,n){return d.pipe(t,e.filter(n))};var L=function(t,n){return d.pipe(t,e.filterMap(n))};var N=function(t,n){return d.pipe(t,e.extend(n))};var _=function(t,n){return d.pipe(t,e.partition(n))};var B=function(t,n){return d.pipe(t,e.partitionMap(n))};var j=function(t){var n=e.wither(t);return function(t,e){return d.pipe(t,n(e))}};var q=function(t){var n=e.wilt(t);return function(t,e){return d.pipe(t,n(e))}};var U=function(t){return function(n){return e.isNone(n)?e.none:e.some(t(n.value))}};e.map=U;var F=function(t){return function(n){return e.isNone(n)?e.none:e.isNone(t)?e.none:e.some(n.value(t.value))}};e.ap=F;e.of=e.some;var z=function(t){return function(n){return e.isNone(n)?e.none:t(n.value)}};e.chain=z;e.flatten=e.chain(d.identity);var V=function(t){return function(n){return e.isNone(n)?t():n}};e.altW=V;e.alt=e.altW;var H=function(){return e.none};e.zero=H;var K=function(){return e.none};e.throwError=K;var G=function(t){return function(n){return e.isNone(n)?e.none:e.some(t(n))}};e.extend=G;e.duplicate=e.extend(d.identity);var J=function(t,n){return function(r){return e.isNone(r)?t:n(t,r.value)}};e.reduce=J;var $=function(t){return function(n){return function(r){return e.isNone(r)?t.empty:n(r.value)}}};e.foldMap=$;var X=function(t,n){return function(r){return e.isNone(r)?t:n(r.value,t)}};e.reduceRight=X;e.compact=e.flatten;var Y=k.separated(e.none,e.none);var Q=function(t){return e.isNone(t)?Y:k.separated(c(t.value),l(t.value))};e.separate=Q;var Z=function(t){return function(n){return e.isNone(n)?e.none:t(n.value)?n:e.none}};e.filter=Z;var tt=function(t){return function(n){return e.isNone(n)?e.none:t(n.value)}};e.filterMap=tt;var et=function(t){return function(e){return k.separated(W(e,(function(e){return!t(e)})),W(e,t))}};e.partition=et;var nt=function(t){return d.flow(e.map(t),e.separate)};e.partitionMap=nt;var rt=function(t){return function(n){return function(r){return e.isNone(r)?t.of(e.none):t.map(n(r.value),e.some)}}};e.traverse=rt;var it=function(t){return function(n){return e.isNone(n)?t.of(e.none):t.map(n.value,e.some)}};e.sequence=it;var ot=function(t){return function(n){return function(r){return e.isNone(r)?t.of(e.none):n(r.value)}}};e.wither=ot;var at=function(t){return function(n){return function(r){return e.isNone(r)?t.of(Y):t.map(n(r.value),(function(t){return k.separated(c(t),l(t))}))}}};e.wilt=at;e.URI="Option";function st(t){return{show:function(n){return e.isNone(n)?"none":"some("+t.show(n.value)+")"}}}e.getShow=st;function ut(t){return{equals:function(n,r){return n===r||(e.isNone(n)?e.isNone(r):e.isNone(r)?false:t.equals(n.value,r.value))}}}e.getEq=ut;function ct(t){return{equals:ut(t).equals,compare:function(n,r){return n===r?0:e.isSome(n)?e.isSome(r)?t.compare(n.value,r.value):1:-1}}}e.getOrd=ct;function lt(){return{concat:function(t,n){return e.isNone(t)?n:t},empty:e.none}}e.getFirstMonoid=lt;function ft(){return{concat:function(t,n){return e.isNone(n)?t:n},empty:e.none}}e.getLastMonoid=ft;function ht(t){return{concat:function(n,r){return e.isNone(n)?r:e.isNone(r)?n:e.some(t.concat(n.value,r.value))},empty:e.none}}e.getMonoid=ht;e.Functor={URI:e.URI,map:C};e.flap=g.flap(e.Functor);e.Pointed={URI:e.URI,of:e.of};e.Apply={URI:e.URI,map:C,ap:O};e.apFirst=m.apFirst(e.Apply);e.apSecond=m.apSecond(e.Apply);e.Applicative={URI:e.URI,map:C,ap:O,of:e.of};e.Chain={URI:e.URI,map:C,ap:O,chain:I};e.Monad={URI:e.URI,map:C,ap:O,of:e.of,chain:I};e.chainFirst=w.chainFirst(e.Chain);e.Foldable={URI:e.URI,reduce:R,foldMap:E,reduceRight:P};e.Alt={URI:e.URI,map:C,alt:T};e.Alternative={URI:e.URI,map:C,ap:O,of:e.of,alt:T,zero:e.zero};e.Extend={URI:e.URI,map:C,extend:N};e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate};e.Filterable={URI:e.URI,map:C,compact:e.compact,separate:e.separate,filter:W,filterMap:L,partition:_,partitionMap:B};e.Traversable={URI:e.URI,map:C,reduce:R,foldMap:E,reduceRight:P,traverse:D,sequence:e.sequence};e.Witherable={URI:e.URI,map:C,reduce:R,foldMap:E,reduceRight:P,traverse:D,sequence:e.sequence,compact:e.compact,separate:e.separate,filter:W,filterMap:L,partition:_,partitionMap:B,wither:j,wilt:q};e.MonadThrow={URI:e.URI,map:C,ap:O,of:e.of,chain:I,throwError:e.throwError};function dt(t){return function(n,r){return e.isNone(r)?false:t.equals(n,r.value)}}e.elem=dt;function pt(t){return function(n){return e.isNone(n)?false:t(n.value)}}e.exists=pt;function vt(t){return function(n){return e.isSome(t(n))}}e.getRefinement=vt;e.Do=e.of({});e.bindTo=g.bindTo(e.Functor);e.bind=w.bind(e.Chain);e.apS=m.apS(e.Apply);var mt=function(t){return function(n){var r=[];for(var i=0;i<n.length;i++){var o=t(i,n[i]);if(e.isNone(o)){return e.none}r.push(o.value)}return e.some(r)}};e.traverseArrayWithIndex=mt;var gt=function(t){return e.traverseArrayWithIndex((function(e,n){return t(n)}))};e.traverseArray=gt;e.sequenceArray=e.traverseArray(d.identity);e.mapNullable=e.chainNullableK;e.option={URI:e.URI,map:C,of:e.of,ap:O,chain:I,reduce:R,foldMap:E,reduceRight:P,traverse:D,sequence:e.sequence,zero:e.zero,alt:T,extend:N,compact:e.compact,separate:e.separate,filter:W,filterMap:L,partition:_,partitionMap:B,wither:j,wilt:q,throwError:e.throwError};e.getApplySemigroup=m.getApplySemigroup(e.Apply);e.getApplyMonoid=b.getApplicativeMonoid(e.Applicative)}));var A=".sc-stencila-action-menu-default-h{--background:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0);background-color:var(--background);border-bottom-left-radius:.25rem;border-color:var(--border);border-style:solid;border-width:0 0 1px 1px;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.75rem;line-height:1rem;line-height:1;padding:1px .25rem;position:absolute;right:0;top:0;z-index:1}.sc-stencila-action-menu-default-h .hidden.sc-stencila-action-menu-default{display:none}.sc-stencila-action-menu-default-h nav.sc-stencila-action-menu-default>*.sc-stencila-action-menu-default{vertical-align:middle}.sc-stencila-action-menu-default-h ul.sc-stencila-action-menu-default{list-style-type:none;margin:0;padding:0}.sc-stencila-action-menu-default-h li.sc-stencila-action-menu-default{display:inline;padding-right:.25rem}.sc-stencila-action-menu-default-h li.sc-stencila-action-menu-default:last-child{padding-right:0}.sc-stencila-action-menu-default-h .sc-stencila-action-menu-default-s>stencila-button,.sc-stencila-action-menu-default-h stencila-button.sc-stencila-action-menu-default{display:inline-block}.sc-stencila-action-menu-default-h .actionContainer.sc-stencila-action-menu-default{display:inline-block;overflow:hidden;-webkit-transition:width .12s ease-in-out;transition:width .12s ease-in-out;vertical-align:middle;white-space:nowrap;width:var(--max-width)}.sc-stencila-action-menu-default-h .actionContainer.sc-stencila-action-menu-default:not(.isAnimating):not(.isCollapsed){width:auto}.sc-stencila-action-menu-default-h .secondaryActions.sc-stencila-action-menu-default:not(:hover):not(:focus) .actionContainer.isCollapsed.sc-stencila-action-menu-default{width:0}";var M=".sc-stencila-action-menu-material-h{--background:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0);background-color:var(--background);border-bottom-left-radius:.25rem;border-color:var(--border);border-style:solid;border-width:0 0 1px 1px;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.75rem;line-height:1rem;line-height:1;padding:1px .25rem;position:absolute;right:0;top:0;z-index:1}.sc-stencila-action-menu-material-h .hidden.sc-stencila-action-menu-material{display:none}.sc-stencila-action-menu-material-h nav.sc-stencila-action-menu-material>*.sc-stencila-action-menu-material{vertical-align:middle}.sc-stencila-action-menu-material-h ul.sc-stencila-action-menu-material{list-style-type:none;margin:0;padding:0}.sc-stencila-action-menu-material-h li.sc-stencila-action-menu-material{display:inline;padding-right:.25rem}.sc-stencila-action-menu-material-h li.sc-stencila-action-menu-material:last-child{padding-right:0}.sc-stencila-action-menu-material-h .sc-stencila-action-menu-material-s>stencila-button,.sc-stencila-action-menu-material-h stencila-button.sc-stencila-action-menu-material{display:inline-block}.sc-stencila-action-menu-material-h .actionContainer.sc-stencila-action-menu-material{display:inline-block;overflow:hidden;-webkit-transition:width .12s ease-in-out;transition:width .12s ease-in-out;vertical-align:middle;white-space:nowrap;width:var(--max-width)}.sc-stencila-action-menu-material-h .actionContainer.sc-stencila-action-menu-material:not(.isAnimating):not(.isCollapsed){width:auto}.sc-stencila-action-menu-material-h .secondaryActions.sc-stencila-action-menu-material:not(:hover):not(:focus) .actionContainer.isCollapsed.sc-stencila-action-menu-material{width:0}";var C={default:"",persistentActions:"persistentActions"};var O=t("B",function(){function t(t){var e=this;n(this,t);this.isCollapsed=false;this.toggleActionMenu=function(){return e.isCollapsed=!e.isCollapsed};this.width="auto";this.isAnimating=false;this.isTransitioning=false;this.calculateWidth=function(){if(e.actionContainerRef&&e.isTransitioning===false){e.width="auto";var t=e.actionContainerRef.getBoundingClientRect().width;e.width=t+"px"}};this.observer=new window.MutationObserver(this.calculateWidth);this.checkForSecondaryActions=function(){e.hasSecondaryActions=Array.from(e.el.children).some((function(t){return t.slot===""}));return e.hasSecondaryActions}}t.prototype.componentWillLoad=function(){this.checkForSecondaryActions()};t.prototype.componentDidLoad=function(){var t=this;if(this.actionContainerRef){window.requestAnimationFrame((function(){if(t.actionContainerRef&&t.hasSecondaryActions){t.actionContainerRef.addEventListener("transitionstart",(function(){return t.isTransitioning=true}));t.actionContainerRef.addEventListener("transitionend",(function(){return t.isTransitioning=false}));t.observer.observe(t.el,{characterData:true,subtree:true});t.calculateWidth();t.isCollapsed=true}}))}};t.prototype.disconnectedCallback=function(){this.observer.disconnect()};t.prototype.render=function(){var t=this;if(this.el.children.length<=0)return null;return r("nav",null,r("span",{class:"persistentActions"},r("slot",{name:C.persistentActions})),r("span",{class:{secondaryActions:true,hidden:!this.hasSecondaryActions}},r("stencila-button",{onClick:this.toggleActionMenu,icon:"more",color:"key",minimal:true,size:"xsmall",iconOnly:true,ariaLabel:"Toggle Action Menu"}),r("span",{class:{actionContainer:true,isAnimating:this.isAnimating,isCollapsed:this.isCollapsed},ref:function(e){return t.actionContainerRef=e},style:{"--max-width":this.width}},r("slot",null))))};Object.defineProperty(t.prototype,"el",{get:function(){return i(this)},enumerable:false,configurable:true});return t}());O.style={default:A,material:M};var I="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((function(t){return t?parseInt(t,36):1}));for(var R=1;R<I.length;R++)I[R]+=I[R-1];function E(t){for(var e=1;e<I.length;e+=2)if(I[e]>t)return I[e-1]<=t;return false}function P(t){return t>=127462&&t<=127487}var D=8205;function T(t,e,n){if(n===void 0){n=true}return(n?W:L)(t,e)}function W(t,e){if(e==t.length)return e;if(e&&N(t.charCodeAt(e))&&_(t.charCodeAt(e-1)))e--;var n=B(t,e);e+=q(n);while(e<t.length){var r=B(t,e);if(n==D||r==D||E(r)){e+=q(r);n=r}else if(P(r)){var i=0,o=e-2;while(o>=0&&P(B(t,o))){i++;o-=2}if(i%2==0)break;else e+=2}else{break}}return e}function L(t,e){while(e>0){var n=W(t,e-2);if(n<e)return n;e--}return 0}function N(t){return t>=56320&&t<57344}function _(t){return t>=55296&&t<56320}function B(t,e){var n=t.charCodeAt(e);if(!_(n)||e+1==t.length)return n;var r=t.charCodeAt(e+1);if(!N(r))return n;return(n-55296<<10)+(r-56320)+65536}function j(t){if(t<=65535)return String.fromCharCode(t);t-=65536;return String.fromCharCode((t>>10)+55296,(t&1023)+56320)}function q(t){return t<65536?1:2}function U(t,e,n){for(var r=0;r<t.length;){if(t.charCodeAt(r)==9){e+=n-e%n;r++}else{e++;r=T(t,r)}}return e}function F(t,e,n,r){for(var i=0;i<t.length;){if(e>=n)return{offset:i,leftOver:0};e+=t.charCodeAt(i)==9?r-e%r:1;i=T(t,i)}return{offset:t.length,leftOver:n-e}}var z=function(){function t(){}t.prototype.lineAt=function(t){if(t<0||t>this.length)throw new RangeError("Invalid position "+t+" in document of length "+this.length);return this.lineInner(t,false,1,0)};t.prototype.line=function(t){if(t<1||t>this.lines)throw new RangeError("Invalid line number "+t+" in "+this.lines+"-line document");return this.lineInner(t,true,1,0)};t.prototype.replace=function(t,e,n){var r=[];this.decompose(0,t,r,2);if(n.length)n.decompose(0,n.length,r,1|2);this.decompose(e,this.length,r,1);return H.from(r,this.length-(e-t)+n.length)};t.prototype.append=function(t){return this.replace(this.length,this.length,t)};t.prototype.slice=function(t,e){if(e===void 0){e=this.length}var n=[];this.decompose(t,e,n,0);return H.from(n,e-t)};t.prototype.eq=function(t){if(t==this)return true;if(t.length!=this.length||t.lines!=this.lines)return false;var e=new $(this),n=new $(t);for(;;){e.next();n.next();if(e.lineBreak!=n.lineBreak||e.done!=n.done||e.value!=n.value)return false;if(e.done)return true}};t.prototype.iter=function(t){if(t===void 0){t=1}return new $(this,t)};t.prototype.iterRange=function(t,e){if(e===void 0){e=this.length}return new X(this,t,e)};t.prototype.toString=function(){return this.sliceString(0)};t.prototype.toJSON=function(){var t=[];this.flatten(t);return t};t.of=function(e){if(e.length==0)throw new RangeError("A document must have at least one line");if(e.length==1&&!e[0])return t.empty;return e.length<=32?new V(e):H.from(V.split(e,[]))};return t}();t("x",z);if(typeof Symbol!="undefined")z.prototype[Symbol.iterator]=function(){return this.iter()};var V=function(t){__extends(e,t);function e(e,n){if(n===void 0){n=K(e)}var r=t.call(this)||this;r.text=e;r.length=n;return r}Object.defineProperty(e.prototype,"lines",{get:function(){return this.text.length},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"children",{get:function(){return null},enumerable:false,configurable:true});e.prototype.lineInner=function(t,e,n,r){for(var i=0;;i++){var o=this.text[i],a=r+o.length;if((e?n:a)>=t)return new Y(r,a,n,o);r=a+1;n++}};e.prototype.decompose=function(t,n,r,i){var o=t<=0&&n>=this.length?this:new e(J(this.text,t,n),Math.min(n,this.length)-Math.max(0,t));if(i&1){var a=r.pop();var s=G(o.text,a.text.slice(),0,o.length);if(s.length<=32){r.push(new e(s,a.length+o.length))}else{var u=s.length>>1;r.push(new e(s.slice(0,u)),new e(s.slice(u)))}}else{r.push(o)}};e.prototype.replace=function(n,r,i){if(!(i instanceof e))return t.prototype.replace.call(this,n,r,i);var o=G(this.text,G(i.text,J(this.text,0,n)),r);var a=this.length+i.length-(r-n);if(o.length<=32)return new e(o,a);return H.from(e.split(o,[]),a)};e.prototype.sliceString=function(t,e,n){if(e===void 0){e=this.length}if(n===void 0){n="\n"}var r="";for(var i=0,o=0;i<=e&&o<this.text.length;o++){var a=this.text[o],s=i+a.length;if(i>t&&o)r+=n;if(t<s&&e>i)r+=a.slice(Math.max(0,t-i),e-i);i=s+1}return r};e.prototype.flatten=function(t){for(var e=0,n=this.text;e<n.length;e++){var r=n[e];t.push(r)}};e.split=function(t,n){var r=[],i=-1;for(var o=0,a=t;o<a.length;o++){var s=a[o];r.push(s);i+=s.length+1;if(r.length==32){n.push(new e(r,i));r=[];i=-1}}if(i>-1)n.push(new e(r,i));return n};return e}(z);var H=function(t){__extends(e,t);function e(e,n){var r=t.call(this)||this;r.children=e;r.length=n;r.lines=0;for(var i=0,o=e;i<o.length;i++){var a=o[i];r.lines+=a.lines}return r}e.prototype.lineInner=function(t,e,n,r){for(var i=0;;i++){var o=this.children[i],a=r+o.length,s=n+o.lines-1;if((e?s:a)>=t)return o.lineInner(t,e,n,r);r=a+1;n=s+1}};e.prototype.decompose=function(t,e,n,r){for(var i=0,o=0;o<=e&&i<this.children.length;i++){var a=this.children[i],s=o+a.length;if(t<=s&&e>=o){var u=r&((o<=t?1:0)|(s>=e?2:0));if(o>=t&&s<=e&&!u)n.push(a);else a.decompose(t-o,e-o,n,u)}o=s+1}};e.prototype.replace=function(n,r,i){if(i.lines<this.lines)for(var o=0,a=0;o<this.children.length;o++){var s=this.children[o],u=a+s.length;if(n>=a&&r<=u){var c=s.replace(n-a,r-a,i);var l=this.lines-s.lines+c.lines;if(c.lines<l>>5-1&&c.lines>l>>5+1){var f=this.children.slice();f[o]=c;return new e(f,this.length-(r-n)+i.length)}return t.prototype.replace.call(this,a,u,c)}a=u+1}return t.prototype.replace.call(this,n,r,i)};e.prototype.sliceString=function(t,e,n){if(e===void 0){e=this.length}if(n===void 0){n="\n"}var r="";for(var i=0,o=0;i<this.children.length&&o<=e;i++){var a=this.children[i],s=o+a.length;if(o>t&&i)r+=n;if(t<s&&e>o)r+=a.sliceString(t-o,e-o,n);o=s+1}return r};e.prototype.flatten=function(t){for(var e=0,n=this.children;e<n.length;e++){var r=n[e];r.flatten(t)}};e.from=function(t,n){if(n===void 0){n=t.reduce((function(t,e){return t+e.length+1}),-1)}var r=0;for(var i=0,o=t;i<o.length;i++){var a=o[i];r+=a.lines}if(r<32){var s=[];for(var u=0,c=t;u<c.length;u++){var a=c[u];a.flatten(s)}return new V(s,n)}var l=Math.max(32,r>>5),f=l<<1,h=l>>1;var d=[],p=0,v=-1,m=[];function g(t){var n;if(t.lines>f&&t instanceof e){for(var r=0,i=t.children;r<i.length;r++){var o=i[r];g(o)}}else if(t.lines>h&&(p>h||!p)){y();d.push(t)}else if(t instanceof V&&p&&(n=m[m.length-1])instanceof V&&t.lines+n.lines<=32){p+=t.lines;v+=t.length+1;m[m.length-1]=new V(n.text.concat(t.text),n.length+1+t.length)}else{if(p+t.lines>l)y();p+=t.lines;v+=t.length+1;m.push(t)}}function y(){if(p==0)return;d.push(m.length==1?m[0]:e.from(m,v));v=-1;p=m.length=0}for(var b=0,w=t;b<w.length;b++){var x=w[b];g(x)}y();return d.length==1?d[0]:new e(d,n)};return e}(z);z.empty=new V([""],0);function K(t){var e=-1;for(var n=0,r=t;n<r.length;n++){var i=r[n];e+=i.length+1}return e}function G(t,e,n,r){if(n===void 0){n=0}if(r===void 0){r=1e9}for(var i=0,o=0,a=true;o<t.length&&i<=r;o++){var s=t[o],u=i+s.length;if(u>=n){if(u>r)s=s.slice(0,r-i);if(i<n)s=s.slice(n-i);if(a){e[e.length-1]+=s;a=false}else e.push(s)}i=u+1}return e}function J(t,e,n){return G(t,[""],e,n)}var $=function(){function t(t,e){if(e===void 0){e=1}this.dir=e;this.done=false;this.lineBreak=false;this.value="";this.nodes=[t];this.offsets=[e>0?0:t instanceof V?t.text.length:t.children.length]}t.prototype.next=function(t){if(t===void 0){t=0}for(;;){var e=this.nodes.length-1;if(e<0){this.done=true;this.value="";this.lineBreak=false;return this}var n=this.nodes[e],r=this.offsets[e];var i=n instanceof V?n.text.length:n.children.length;if(r==(this.dir>0?i:0)){this.nodes.pop();this.offsets.pop()}else if(!this.lineBreak&&r!=(this.dir>0?0:i)){this.lineBreak=true;if(t==0){this.value="\n";return this}t--}else if(n instanceof V){var o=n.text[r-(this.dir<0?1:0)];this.offsets[e]=r+=this.dir;this.lineBreak=false;if(o.length>Math.max(0,t)){this.value=t==0?o:this.dir>0?o.slice(t):o.slice(0,o.length-t);return this}t-=o.length}else{var o=n.children[this.dir>0?r:r-1];this.offsets[e]=r+this.dir;this.lineBreak=false;if(t>o.length){t-=o.length}else{this.nodes.push(o);this.offsets.push(this.dir>0?0:o instanceof V?o.text.length:o.children.length)}}}};return t}();var X=function(){function t(t,e,n){this.value="";this.cursor=new $(t,e>n?-1:1);if(e>n){this.skip=t.length-e;this.limit=e-n}else{this.skip=e;this.limit=n-e}}t.prototype.next=function(t){if(t===void 0){t=0}if(this.limit<=0){this.limit=-1}else{var e=this.cursor.next(this.skip+t),n=e.value,r=e.lineBreak,i=e.done;this.skip=0;this.value=n;var o=r?1:n.length;if(o>this.limit)this.value=this.cursor.dir>0?n.slice(0,this.limit):n.slice(o-this.limit);if(i||this.value.length==0)this.limit=-1;else this.limit-=this.value.length}return this};Object.defineProperty(t.prototype,"lineBreak",{get:function(){return this.cursor.lineBreak},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"done",{get:function(){return this.limit<0},enumerable:false,configurable:true});return t}();var Y=function(){function t(t,e,n,r){this.from=t;this.to=e;this.number=n;this.text=r}Object.defineProperty(t.prototype,"length",{get:function(){return this.to-this.from},enumerable:false,configurable:true});return t}();var Q=/\r\n?|\n/;var Z=function(t){t[t["Simple"]=0]="Simple";t[t["TrackDel"]=1]="TrackDel";t[t["TrackBefore"]=2]="TrackBefore";t[t["TrackAfter"]=3]="TrackAfter";return t}(Z||(Z={}));var tt=function(){function t(t){this.sections=t}Object.defineProperty(t.prototype,"length",{get:function(){var t=0;for(var e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"newLength",{get:function(){var t=0;for(var e=0;e<this.sections.length;e+=2){var n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"empty",{get:function(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0},enumerable:false,configurable:true});t.prototype.iterGaps=function(t){for(var e=0,n=0,r=0;e<this.sections.length;){var i=this.sections[e++],o=this.sections[e++];if(o<0){t(n,r,i);r+=i}else{r+=o}n+=i}};t.prototype.iterChangedRanges=function(t,e){if(e===void 0){e=false}it(this,t,e)};Object.defineProperty(t.prototype,"invertedDesc",{get:function(){var e=[];for(var n=0;n<this.sections.length;){var r=this.sections[n++],i=this.sections[n++];if(i<0)e.push(r,i);else e.push(i,r)}return new t(e)},enumerable:false,configurable:true});t.prototype.composeDesc=function(t){return this.empty?t:t.empty?this:at(this,t)};t.prototype.mapDesc=function(t,e){if(e===void 0){e=false}return t.empty?this:ot(this,t,e)};t.prototype.mapPos=function(t,e,n){if(e===void 0){e=-1}if(n===void 0){n=Z.Simple}var r=0,i=0;for(var o=0;o<this.sections.length;){var a=this.sections[o++],s=this.sections[o++],u=r+a;if(s<0){if(u>t)return i+(t-r);i+=a}else{if(n!=Z.Simple&&u>=t&&(n==Z.TrackDel&&r<t&&u>t||n==Z.TrackBefore&&r<t||n==Z.TrackAfter&&u>t))return null;if(u>t||u==t&&e<0&&!a)return t==r||e<0?i:i+s;i+=s}r=u}if(t>r)throw new RangeError("Position "+t+" is out of range for changeset of length "+r);return i};t.prototype.touchesRange=function(t,e){if(e===void 0){e=t}for(var n=0,r=0;n<this.sections.length&&r<=e;){var i=this.sections[n++],o=this.sections[n++],a=r+i;if(o>=0&&r<=e&&a>=t)return r<t&&a>e?"cover":true;r=a}return false};t.prototype.toString=function(){var t="";for(var e=0;e<this.sections.length;){var n=this.sections[e++],r=this.sections[e++];t+=(t?" ":"")+n+(r>=0?":"+r:"")}return t};t.prototype.toJSON=function(){return this.sections};t.fromJSON=function(e){if(!Array.isArray(e)||e.length%2||e.some((function(t){return typeof t!="number"})))throw new RangeError("Invalid JSON representation of ChangeDesc");return new t(e)};return t}();var et=function(t){__extends(e,t);function e(e,n){var r=t.call(this,e)||this;r.inserted=n;return r}e.prototype.apply=function(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");it(this,(function(e,n,r,i,o){return t=t.replace(r,r+(n-e),o)}),false);return t};e.prototype.mapDesc=function(t,e){if(e===void 0){e=false}return ot(this,t,e,true)};e.prototype.invert=function(t){var n=this.sections.slice(),r=[];for(var i=0,o=0;i<n.length;i+=2){var a=n[i],s=n[i+1];if(s>=0){n[i]=s;n[i+1]=a;var u=i>>1;while(r.length<u)r.push(z.empty);r.push(a?t.slice(o,o+a):z.empty)}o+=a}return new e(n,r)};e.prototype.compose=function(t){return this.empty?t:t.empty?this:at(this,t,true)};e.prototype.map=function(t,e){if(e===void 0){e=false}return t.empty?this:ot(this,t,e,true)};e.prototype.iterChanges=function(t,e){if(e===void 0){e=false}it(this,t,e)};Object.defineProperty(e.prototype,"desc",{get:function(){return new tt(this.sections)},enumerable:false,configurable:true});e.prototype.filter=function(t){var n=[],r=[],i=[];var o=new st(this);t:for(var a=0,s=0;;){var u=a==t.length?1e9:t[a++];while(s<u||s==u&&o.len==0){if(o.done)break t;var c=Math.min(o.len,u-s);nt(i,c,-1);var l=o.ins==-1?-1:o.off==0?o.ins:0;nt(n,c,l);if(l>0)rt(r,n,o.text);o.forward(c);s+=c}var f=t[a++];while(s<f){if(o.done)break t;var c=Math.min(o.len,f-s);nt(n,c,-1);nt(i,c,o.ins==-1?-1:o.off==0?o.ins:0);o.forward(c);s+=c}}return{changes:new e(n,r),filtered:new tt(i)}};e.prototype.toJSON=function(){var t=[];for(var e=0;e<this.sections.length;e+=2){var n=this.sections[e],r=this.sections[e+1];if(r<0)t.push(n);else if(r==0)t.push([n]);else t.push([n].concat(this.inserted[e>>1].toJSON()))}return t};e.of=function(t,n,r){var i=[],o=[],a=0;var s=null;function u(t){if(t===void 0){t=false}if(!t&&!i.length)return;if(a<n)nt(i,n-a,-1);var r=new e(i,o);s=s?s.compose(r.map(s)):r;i=[];o=[];a=0}function c(t){if(Array.isArray(t)){for(var l=0,f=t;l<f.length;l++){var h=f[l];c(h)}}else if(t instanceof e){if(t.length!=n)throw new RangeError("Mismatched change set length (got "+t.length+", expected "+n+")");u();s=s?s.compose(t.map(s)):t}else{var d=t.from,p=t.to,v=p===void 0?d:p,m=t.insert;if(d>v||d<0||v>n)throw new RangeError("Invalid change range "+d+" to "+v+" (in doc of length "+n+")");var g=!m?z.empty:typeof m=="string"?z.of(m.split(r||Q)):m;var y=g.length;if(d==v&&y==0)return;if(d<a)u();if(d>a)nt(i,d-a,-1);nt(i,v-d,y);rt(o,i,g);a=v}}c(t);u(!s);return s};e.empty=function(t){return new e(t?[t,-1]:[],[])};e.fromJSON=function(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");var n=[],r=[];for(var i=0;i<t.length;i++){var o=t[i];if(typeof o=="number"){n.push(o,-1)}else if(!Array.isArray(o)||typeof o[0]!="number"||o.some((function(t,e){return e&&typeof t!="string"}))){throw new RangeError("Invalid JSON representation of ChangeSet")}else if(o.length==1){n.push(o[0],0)}else{while(r.length<i)r.push(z.empty);r[i]=z.of(o.slice(1));n.push(o[0],r[i].length)}}return new e(n,r)};return e}(tt);function nt(t,e,n,r){if(r===void 0){r=false}if(e==0&&n<=0)return;var i=t.length-2;if(i>=0&&n<=0&&n==t[i+1])t[i]+=e;else if(e==0&&t[i]==0)t[i+1]+=n;else if(r){t[i]+=e;t[i+1]+=n}else t.push(e,n)}function rt(t,e,n){if(n.length==0)return;var r=e.length-2>>1;if(r<t.length){t[t.length-1]=t[t.length-1].append(n)}else{while(t.length<r)t.push(z.empty);t.push(n)}}function it(t,e,n){var r=t.inserted;for(var i=0,o=0,a=0;a<t.sections.length;){var s=t.sections[a++],u=t.sections[a++];if(u<0){i+=s;o+=s}else{var c=i,l=o,f=z.empty;for(;;){c+=s;l+=u;if(u&&r)f=f.append(r[a-2>>1]);if(n||a==t.sections.length||t.sections[a+1]<0)break;s=t.sections[a++];u=t.sections[a++]}e(i,c,o,l,f);i=c;o=l}}}function ot(t,e,n,r){if(r===void 0){r=false}var i=[],o=r?[]:null;var a=new st(t),s=new st(e);for(var u=0,c=0;;){if(a.ins==-1){u+=a.len;a.next()}else if(s.ins==-1&&c<u){var l=Math.min(s.len,u-c);s.forward(l);nt(i,l,-1);c+=l}else if(s.ins>=0&&(a.done||c<u||c==u&&(s.len<a.len||s.len==a.len&&!n))){nt(i,s.ins,-1);while(u>c&&!a.done&&u+a.len<c+s.len){u+=a.len;a.next()}c+=s.len;s.next()}else if(a.ins>=0){var f=0,h=u+a.len;for(;;){if(s.ins>=0&&c>u&&c+s.len<h){f+=s.ins;c+=s.len;s.next()}else if(s.ins==-1&&c<h){var l=Math.min(s.len,h-c);f+=l;s.forward(l);c+=l}else{break}}nt(i,f,a.ins);if(o)rt(o,i,a.text);u=h;a.next()}else if(a.done&&s.done){return o?new et(i,o):new tt(i)}else{throw new Error("Mismatched change set lengths")}}}function at(t,e,n){if(n===void 0){n=false}var r=[];var i=n?[]:null;var o=new st(t),a=new st(e);for(var s=false;;){if(o.done&&a.done){return i?new et(r,i):new tt(r)}else if(o.ins==0){nt(r,o.len,0,s);o.next()}else if(a.len==0&&!a.done){nt(r,0,a.ins,s);if(i)rt(i,r,a.text);a.next()}else if(o.done||a.done){throw new Error("Mismatched change set lengths")}else{var u=Math.min(o.len2,a.len),c=r.length;if(o.ins==-1){var l=a.ins==-1?-1:a.off?0:a.ins;nt(r,u,l,s);if(i&&l)rt(i,r,a.text)}else if(a.ins==-1){nt(r,o.off?0:o.len,u,s);if(i)rt(i,r,o.textBit(u))}else{nt(r,o.off?0:o.len,a.off?0:a.ins,s);if(i&&!a.off)rt(i,r,a.text)}s=(o.ins>u||a.ins>=0&&a.len>u)&&(s||r.length>c);o.forward2(u);a.forward(u)}}}var st=function(){function t(t){this.set=t;this.i=0;this.next()}t.prototype.next=function(){var t=this.set.sections;if(this.i<t.length){this.len=t[this.i++];this.ins=t[this.i++]}else{this.len=0;this.ins=-2}this.off=0};Object.defineProperty(t.prototype,"done",{get:function(){return this.ins==-2},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"len2",{get:function(){return this.ins<0?this.len:this.ins},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"text",{get:function(){var t=this.set.inserted,e=this.i-2>>1;return e>=t.length?z.empty:t[e]},enumerable:false,configurable:true});t.prototype.textBit=function(t){var e=this.set.inserted,n=this.i-2>>1;return n>=e.length&&!t?z.empty:e[n].slice(this.off,t==null?undefined:this.off+t)};t.prototype.forward=function(t){if(t==this.len)this.next();else{this.len-=t;this.off+=t}};t.prototype.forward2=function(t){if(this.ins==-1)this.forward(t);else if(t==this.ins)this.next();else{this.ins-=t;this.off+=t}};return t}();var ut=function(){function t(t,e,n){this.from=t;this.to=e;this.flags=n}Object.defineProperty(t.prototype,"anchor",{get:function(){return this.flags&16?this.to:this.from},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"head",{get:function(){return this.flags&16?this.from:this.to},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"empty",{get:function(){return this.from==this.to},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"assoc",{get:function(){return this.flags&4?-1:this.flags&8?1:0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"bidiLevel",{get:function(){var t=this.flags&3;return t==3?null:t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"goalColumn",{get:function(){var t=this.flags>>5;return t==33554431?undefined:t},enumerable:false,configurable:true});t.prototype.map=function(e,n){if(n===void 0){n=-1}var r=e.mapPos(this.from,n),i=e.mapPos(this.to,n);return r==this.from&&i==this.to?this:new t(r,i,this.flags)};t.prototype.extend=function(t,e){if(e===void 0){e=t}if(t<=this.anchor&&e>=this.anchor)return ct.range(t,e);var n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return ct.range(this.anchor,n)};t.prototype.eq=function(t){return this.anchor==t.anchor&&this.head==t.head};t.prototype.toJSON=function(){return{anchor:this.anchor,head:this.head}};t.fromJSON=function(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ct.range(t.anchor,t.head)};return t}();var ct=function(){function t(t,e){if(e===void 0){e=0}this.ranges=t;this.mainIndex=e}t.prototype.map=function(e,n){if(n===void 0){n=-1}if(e.empty)return this;return t.create(this.ranges.map((function(t){return t.map(e,n)})),this.mainIndex)};t.prototype.eq=function(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return false;for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].eq(t.ranges[e]))return false;return true};Object.defineProperty(t.prototype,"main",{get:function(){return this.ranges[this.mainIndex]},enumerable:false,configurable:true});t.prototype.asSingle=function(){return this.ranges.length==1?this:new t([this.main])};t.prototype.addRange=function(e,n){if(n===void 0){n=true}return t.create([e].concat(this.ranges),n?0:this.mainIndex+1)};t.prototype.replaceRange=function(e,n){if(n===void 0){n=this.mainIndex}var r=this.ranges.slice();r[n]=e;return t.create(r,this.mainIndex)};t.prototype.toJSON=function(){return{ranges:this.ranges.map((function(t){return t.toJSON()})),main:this.mainIndex}};t.fromJSON=function(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new t(e.ranges.map((function(t){return ut.fromJSON(t)})),e.main)};t.single=function(e,n){if(n===void 0){n=e}return new t([t.range(e,n)],0)};t.create=function(e,n){if(n===void 0){n=0}if(e.length==0)throw new RangeError("A selection needs at least one range");for(var r=0,i=0;i<e.length;i++){var o=e[i];if(o.empty?o.from<=r:o.from<r)return lt(e.slice(),n);r=o.to}return new t(e,n)};t.cursor=function(t,e,n,r){if(e===void 0){e=0}return new ut(t,t,(e==0?0:e<0?4:8)|(n==null?3:Math.min(2,n))|(r!==null&&r!==void 0?r:33554431)<<5)};t.range=function(t,e,n){var r=(n!==null&&n!==void 0?n:33554431)<<5;return e<t?new ut(e,t,16|r):new ut(t,e,r)};return t}();t("E",ct);function lt(t,e){if(e===void 0){e=0}var n=t[e];t.sort((function(t,e){return t.from-e.from}));e=t.indexOf(n);for(var r=1;r<t.length;r++){var i=t[r],o=t[r-1];if(i.empty?i.from<=o.to:i.from<o.to){var a=o.from,s=Math.max(i.to,o.to);if(r<=e)e--;t.splice(--r,2,i.anchor>i.head?ct.range(s,a):ct.range(a,s))}}return new ct(t,e)}function ft(t,e){for(var n=0,r=t.ranges;n<r.length;n++){var i=r[n];if(i.to>e)throw new RangeError("Selection points outside of document")}}var ht=0;var dt=function(){function t(t,e,n,r,i){this.combine=t;this.compareInput=e;this.compare=n;this.isStatic=r;this.extensions=i;this.id=ht++;this.default=t([])}t.define=function(e){if(e===void 0){e={}}return new t(e.combine||function(t){return t},e.compareInput||function(t,e){return t===e},e.compare||(!e.combine?pt:function(t,e){return t===e}),!!e.static,e.enables)};t.prototype.of=function(t){return new vt([],this,0,t)};t.prototype.compute=function(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new vt(t,this,1,e)};t.prototype.computeN=function(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new vt(t,this,2,e)};t.prototype.from=function(t,e){if(!e)e=function(t){return t};return this.compute([t],(function(n){return e(n.field(t))}))};return t}();function pt(t,e){return t==e||t.length==e.length&&t.every((function(t,n){return t===e[n]}))}var vt=function(){function t(t,e,n,r){this.dependencies=t;this.facet=e;this.type=n;this.value=r;this.id=ht++}t.prototype.dynamicSlot=function(t){var e;var n=this.value;var r=this.facet.compareInput;var i=t[this.id]>>1,o=this.type==2;var a=false,s=false,u=[];for(var c=0,l=this.dependencies;c<l.length;c++){var f=l[c];if(f=="doc")a=true;else if(f=="selection")s=true;else if((((e=t[f.id])!==null&&e!==void 0?e:1)&1)==0)u.push(t[f.id])}return function(t,e){if(!e||e.reconfigured){t.values[i]=n(t);return 1}else{var c=a&&e.docChanged||s&&(e.docChanged||e.selection)||u.some((function(e){return(Rt(t,e)&1)>0}));if(!c)return 0;var l=n(t),f=e.startState.values[i];if(o?mt(l,f,r):r(l,f))return 0;t.values[i]=l;return 1}}};return t}();function mt(t,e,n){if(t.length!=e.length)return false;for(var r=0;r<t.length;r++)if(!n(t[r],e[r]))return false;return true}function gt(t,e,n){var r=n.map((function(e){return t[e.id]}));var i=n.map((function(t){return t.type}));var o=r.filter((function(t){return!(t&1)}));var a=t[e.id]>>1;return function(t,n){var s=!n?null:n.reconfigured?n.startState.config.address[e.id]:a<<1;var u=s==null;for(var c=0,l=o;c<l.length;c++){var f=l[c];if(Rt(t,f)&1)u=true}if(!u)return 0;var h=[];for(var d=0;d<r.length;d++){var p=Et(t,r[d]);if(i[d]==2)for(var v=0,m=p;v<m.length;v++){var g=m[v];h.push(g)}else h.push(p)}var y=e.combine(h);if(s!=null&&e.compare(y,Et(n.startState,s)))return 0;t.values[a]=y;return 1}}function yt(t,e){var n=t.config.address[e];return n==null?null:n>>1}var bt=dt.define({static:true});var wt=function(){function t(t,e,n,r,i){this.id=t;this.createF=e;this.updateF=n;this.compareF=r;this.spec=i;this.provides=undefined}t.define=function(e){var n=new t(ht++,e.create,e.update,e.compare||function(t,e){return t===e},e);if(e.provide)n.provides=e.provide(n);return n};t.prototype.create=function(t){var e=this;var n=t.facet(bt).find((function(t){return t.field==e}));return((n===null||n===void 0?void 0:n.create)||this.createF)(t)};t.prototype.slot=function(t){var e=this;var n=t[this.id]>>1;return function(t,r){if(!r||r.reconfigured&&yt(r.startState,e.id)==null){t.values[n]=e.create(t);return 1}var i,o=0;if(r.reconfigured){i=r.startState.values[yt(r.startState,e.id)];o=1}else{i=r.startState.values[n]}var a=e.updateF(i,r);if(!o&&!e.compareF(i,a))o=1;if(o)t.values[n]=a;return o}};t.prototype.init=function(t){return[this,bt.of({field:this,create:t})]};Object.defineProperty(t.prototype,"extension",{get:function(){return this},enumerable:false,configurable:true});return t}();var xt={fallback:3,default:2,extend:1,override:0};function kt(t){return function(e){return new At(e,t)}}var St=t("P",{fallback:kt(xt.fallback),default:kt(xt.default),extend:kt(xt.extend),override:kt(xt.override)});var At=function(){function t(t,e){this.inner=t;this.prec=e}return t}();var Mt=function(){function t(){}t.prototype.of=function(t){return new Ct(this,t)};t.prototype.reconfigure=function(e){return t.reconfigure.of({compartment:this,extension:e})};t.prototype.get=function(t){return t.config.compartments.get(this)};return t}();var Ct=function(){function t(t,e){this.compartment=t;this.inner=e}return t}();var Ot=function(){function t(t,e,n,r,i){this.base=t;this.compartments=e;this.dynamicSlots=n;this.address=r;this.staticValues=i;this.statusTemplate=[];while(this.statusTemplate.length<n.length)this.statusTemplate.push(0)}t.prototype.staticFacet=function(t){var e=this.address[t.id];return e==null?t.default:this.staticValues[e>>1]};t.resolve=function(e,n,r){var i=[];var o=Object.create(null);var a=new Map;for(var s=0,u=It(e,n,a);s<u.length;s++){var c=u[s];if(c instanceof wt)i.push(c);else(o[c.facet.id]||(o[c.facet.id]=[])).push(c)}var l=Object.create(null);var f=[];var h=[];var d=function(t){l[t.id]=h.length<<1;h.push((function(e){return t.slot(e)}))};for(var p=0,v=i;p<v.length;p++){var m=v[p];d(m)}var g=function(t){var e=o[t],n=e[0].facet;if(e.every((function(t){return t.type==0}))){l[n.id]=f.length<<1|1;var i=n.combine(e.map((function(t){return t.value})));var a=r?r.config.address[n.id]:null;if(a!=null){var s=Et(r,a);if(n.compare(i,s))i=s}f.push(i)}else{var u=function(t){if(t.type==0){l[t.id]=f.length<<1|1;f.push(t.value)}else{l[t.id]=h.length<<1;h.push((function(e){return t.dynamicSlot(e)}))}};for(var c=0,d=e;c<d.length;c++){var p=d[c];u(p)}l[n.id]=h.length<<1;h.push((function(t){return gt(t,n,e)}))}};for(var y in o){g(y)}return new t(e,a,h.map((function(t){return t(l)})),l,f)};return t}();function It(t,e,n){var r=[[],[],[],[]];var i=new Map;function o(t,a){var s=i.get(t);if(s!=null){if(s>=a)return;var u=r[s].indexOf(t);if(u>-1)r[s].splice(u,1);if(t instanceof Ct)n.delete(t.compartment)}i.set(t,a);if(Array.isArray(t)){for(var c=0,l=t;c<l.length;c++){var f=l[c];o(f,a)}}else if(t instanceof Ct){if(n.has(t.compartment))throw new RangeError("Duplicate use of compartment in extensions");var h=e.get(t.compartment)||t.inner;n.set(t.compartment,h);o(h,a)}else if(t instanceof At){o(t.inner,t.prec)}else if(t instanceof wt){r[a].push(t);if(t.provides)o(t.provides,a)}else if(t instanceof vt){r[a].push(t);if(t.facet.extensions)o(t.facet.extensions,a)}else{var d=t.extension;if(!d)throw new Error("Unrecognized extension value in extension set ("+t+"). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.");o(d,a)}}o(t,xt.default);return r.reduce((function(t,e){return t.concat(e)}))}function Rt(t,e){if(e&1)return 2;var n=e>>1;var r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;var i=t.config.dynamicSlots[n](t,t.applying);return t.status[n]=2|i}function Et(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}var Pt=dt.define();var Dt=dt.define({combine:function(t){return t.some((function(t){return t}))},static:true});var Tt=dt.define({combine:function(t){return t.length?t[0]:undefined},static:true});var Wt=dt.define();var Lt=dt.define();var Nt=dt.define();var _t=function(){function t(t,e){this.type=t;this.value=e}t.define=function(){return new Bt};return t}();var Bt=function(){function t(){}t.prototype.of=function(t){return new _t(this,t)};return t}();var jt=function(){function t(t){this.map=t}t.prototype.of=function(t){return new qt(this,t)};return t}();var qt=function(){function t(t,e){this.type=t;this.value=e}t.prototype.map=function(e){var n=this.type.map(this.value,e);return n===undefined?undefined:n==this.value?this:new t(this.type,n)};t.prototype.is=function(t){return this.type==t};t.define=function(t){if(t===void 0){t={}}return new jt(t.map||function(t){return t})};t.mapEffects=function(t,e){if(!t.length)return t;var n=[];for(var r=0,i=t;r<i.length;r++){var o=i[r];var a=o.map(e);if(a)n.push(a)}return n};return t}();qt.reconfigure=qt.define();qt.appendConfig=qt.define();var Ut=function(){function t(e,n,r,i,o,a){this.startState=e;this.changes=n;this.selection=r;this.effects=i;this.annotations=o;this.scrollIntoView=a;this._doc=null;this._state=null;if(r)ft(r,n.newLength);if(!o.some((function(e){return e.type==t.time})))this.annotations=o.concat(t.time.of(Date.now()))}Object.defineProperty(t.prototype,"newDoc",{get:function(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"newSelection",{get:function(){return this.selection||this.startState.selection.map(this.changes)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"state",{get:function(){if(!this._state)this.startState.applyTransaction(this);return this._state},enumerable:false,configurable:true});t.prototype.annotation=function(t){for(var e=0,n=this.annotations;e<n.length;e++){var r=n[e];if(r.type==t)return r.value}return undefined};Object.defineProperty(t.prototype,"docChanged",{get:function(){return!this.changes.empty},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"reconfigured",{get:function(){return this.startState.config!=this.state.config},enumerable:false,configurable:true});return t}();Ut.time=_t.define();Ut.userEvent=_t.define();Ut.addToHistory=_t.define();Ut.remote=_t.define();function Ft(t,e){var n=[];for(var r=0,i=0;;){var o=void 0,a=void 0;if(r<t.length&&(i==e.length||e[i]>=t[r])){o=t[r++];a=t[r++]}else if(i<e.length){o=e[i++];a=e[i++]}else return n;if(!n.length||n[n.length-1]<o)n.push(o,a);else if(n[n.length-1]<a)n[n.length-1]=a}}function zt(t,e,n){var r;var i,o,a;if(n){i=e.changes;o=et.empty(e.changes.length);a=t.changes.compose(e.changes)}else{i=e.changes.map(t.changes);o=t.changes.mapDesc(e.changes,true);a=t.changes.compose(i)}return{changes:a,selection:e.selection?e.selection.map(o):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:qt.mapEffects(t.effects,i).concat(qt.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Vt(t,e,n){var r=e.selection;return{changes:e.changes instanceof et?e.changes:et.of(e.changes||[],n,t.facet(Tt)),selection:r&&(r instanceof ct?r:ct.single(r.anchor,r.head)),effects:$t(e.effects),annotations:$t(e.annotations),scrollIntoView:!!e.scrollIntoView}}function Ht(t,e,n){var r=Vt(t,e.length?e[0]:{},t.doc.length);if(e.length&&e[0].filter===false)n=false;for(var i=1;i<e.length;i++){if(e[i].filter===false)n=false;var o=!!e[i].sequential;r=zt(r,Vt(t,e[i],o?r.changes.newLength:t.doc.length),o)}var a=new Ut(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return Gt(n?Kt(a):a)}function Kt(t){var e=t.startState;var n=true;for(var r=0,i=e.facet(Wt);r<i.length;r++){var o=i[r];var a=o(t);if(a===false){n=false;break}if(Array.isArray(a))n=n===true?a:Ft(n,a)}if(n!==true){var s=void 0,u=void 0;if(n===false){u=t.changes.invertedDesc;s=et.empty(e.doc.length)}else{var c=t.changes.filter(n);s=c.changes;u=c.filtered.invertedDesc}t=new Ut(e,s,t.selection&&t.selection.map(u),qt.mapEffects(t.effects,u),t.annotations,t.scrollIntoView)}var l=e.facet(Lt);for(var f=l.length-1;f>=0;f--){var c=l[f](t);if(c instanceof Ut)t=c;else if(Array.isArray(c)&&c.length==1&&c[0]instanceof Ut)t=c[0];else t=Ht(e,$t(c),false)}return t}function Gt(t){var e=t.startState,n=e.facet(Nt),r=t;for(var i=n.length-1;i>=0;i--){var o=n[i](t);if(o&&Object.keys(o).length)r=zt(t,Vt(e,o,t.changes.newLength),true)}return r==t?t:new Ut(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}var Jt=[];function $t(t){return t==null?Jt:Array.isArray(t)?t:[t]}var Xt=function(t){t[t["Word"]=0]="Word";t[t["Space"]=1]="Space";t[t["Other"]=2]="Other";return t}(Xt||(Xt={}));var Yt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var Qt;try{Qt=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(ev){}function Zt(t){if(Qt)return Qt.test(t);for(var e=0;e<t.length;e++){var n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Yt.test(n)))return true}return false}function te(t){return function(e){if(!/\S/.test(e))return Xt.Space;if(Zt(e))return Xt.Word;for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Xt.Word;return Xt.Other}}var ee=function(){function t(t,e,n,r){if(r===void 0){r=null}this.config=t;this.doc=e;this.selection=n;this.applying=null;this.status=t.statusTemplate.slice();if(r&&r.startState.config==t){this.values=r.startState.values.slice()}else{this.values=t.dynamicSlots.map((function(t){return null}));if(r)for(var i in t.address){var o=t.address[i],a=r.startState.config.address[i];if(a!=null&&(o&1)==0)this.values[o>>1]=Et(r.startState,a)}}this.applying=r;if(r)r._state=this;for(var s=0;s<this.config.dynamicSlots.length;s++)Rt(this,s<<1);this.applying=null}t.prototype.field=function(t,e){if(e===void 0){e=true}var n=this.config.address[t.id];if(n==null){if(e)throw new RangeError("Field is not present in this state");return undefined}Rt(this,n);return Et(this,n)};t.prototype.update=function(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}return Ht(this,t,true)};t.prototype.applyTransaction=function(e){var n=this.config,r=n.base,i=n.compartments;for(var o=0,a=e.effects;o<a.length;o++){var s=a[o];if(s.is(Mt.reconfigure)){if(n){i=new Map;n.compartments.forEach((function(t,e){return i.set(e,t)}));n=null}i.set(s.value.compartment,s.value.extension)}else if(s.is(qt.reconfigure)){n=null;r=s.value}else if(s.is(qt.appendConfig)){n=null;r=$t(r).concat(s.value)}}new t(n||Ot.resolve(r,i,this),e.newDoc,e.newSelection,e)};t.prototype.replaceSelection=function(t){if(typeof t=="string")t=this.toText(t);return this.changeByRange((function(e){return{changes:{from:e.from,to:e.to,insert:t},range:ct.cursor(e.from+t.length)}}))};t.prototype.changeByRange=function(t){var e=this.selection;var n=t(e.ranges[0]);var r=this.changes(n.changes),i=[n.range];var o=$t(n.effects);for(var a=1;a<e.ranges.length;a++){var s=t(e.ranges[a]);var u=this.changes(s.changes),c=u.map(r);for(var l=0;l<a;l++)i[l]=i[l].map(c);var f=r.mapDesc(u,true);i.push(s.range.map(f));r=r.compose(c);o=qt.mapEffects(o,c).concat(qt.mapEffects($t(s.effects),f))}return{changes:r,selection:ct.create(i,e.mainIndex),effects:o}};t.prototype.changes=function(e){if(e===void 0){e=[]}if(e instanceof et)return e;return et.of(e,this.doc.length,this.facet(t.lineSeparator))};t.prototype.toText=function(e){return z.of(e.split(this.facet(t.lineSeparator)||Q))};t.prototype.sliceDoc=function(t,e){if(t===void 0){t=0}if(e===void 0){e=this.doc.length}return this.doc.sliceString(t,e,this.lineBreak)};t.prototype.facet=function(t){var e=this.config.address[t.id];if(e==null)return t.default;Rt(this,e);return Et(this,e)};t.prototype.toJSON=function(t){var e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(var n in t){var r=t[n];if(r instanceof wt)e[n]=r.spec.toJSON(this.field(t[n]),this)}return e};t.fromJSON=function(e,n,r){if(n===void 0){n={}}if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");var i=[];if(r){var o=function(t){var n=r[t],o=e[t];i.push(n.init((function(t){return n.spec.fromJSON(o,t)})))};for(var a in r){o(a)}}return t.create({doc:e.doc,selection:ct.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})};t.create=function(e){if(e===void 0){e={}}var n=Ot.resolve(e.extensions||[],new Map);var r=e.doc instanceof z?e.doc:z.of((e.doc||"").split(n.staticFacet(t.lineSeparator)||Q));var i=!e.selection?ct.single(0):e.selection instanceof ct?e.selection:ct.single(e.selection.anchor,e.selection.head);ft(i,r.length);if(!n.staticFacet(Dt))i=i.asSingle();return new t(n,r,i)};Object.defineProperty(t.prototype,"tabSize",{get:function(){return this.facet(t.tabSize)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"lineBreak",{get:function(){return this.facet(t.lineSeparator)||"\n"},enumerable:false,configurable:true});t.prototype.phrase=function(e){for(var n=0,r=this.facet(t.phrases);n<r.length;n++){var i=r[n];if(Object.prototype.hasOwnProperty.call(i,e))return i[e]}return e};t.prototype.languageDataAt=function(t,e){var n=[];for(var r=0,i=this.facet(Pt);r<i.length;r++){var o=i[r];for(var a=0,s=o(this,e);a<s.length;a++){var u=s[a];if(Object.prototype.hasOwnProperty.call(u,t))n.push(u[t])}}return n};t.prototype.charCategorizer=function(t){return te(this.languageDataAt("wordChars",t).join(""))};t.prototype.wordAt=function(t){var e=this.doc.lineAt(t),n=e.text,r=e.from,i=e.length;var o=this.charCategorizer(t);var a=t-r,s=t-r;while(a>0){var u=T(n,a,false);if(o(n.slice(u,a))!=Xt.Word)break;a=u}while(s<i){var c=T(n,s);if(o(n.slice(s,c))!=Xt.Word)break;s=c}return a==s?ct.range(a+r,s+r):null};return t}();ee.allowMultipleSelections=Dt;ee.tabSize=dt.define({combine:function(t){return t.length?t[0]:4}});ee.lineSeparator=Tt;ee.phrases=dt.define();ee.languageData=Pt;ee.changeFilter=Wt;ee.transactionFilter=Lt;ee.transactionExtender=Nt;Mt.reconfigure=qt.define();function ne(t,e,n){if(n===void 0){n={}}var r={};for(var i=0,o=t;i<o.length;i++){var a=o[i];for(var s=0,u=Object.keys(a);s<u.length;s++){var c=u[s];var l=a[c],f=r[c];if(f===undefined)r[c]=l;else if(f===l||l===undefined);else if(Object.hasOwnProperty.call(n,c))r[c]=n[c](f,l);else throw new Error("Config merge conflict for field "+c)}}for(var c in e)if(r[c]===undefined)r[c]=e[c];return r}var re="ͼ";var ie=typeof Symbol=="undefined"?"__"+re:Symbol.for(re);var oe=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet");var ae=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};var se=function(){function t(t,e){this.rules=[];var n=(e||{}).finish;function r(t){return/^@/.test(t)?[t]:t.split(/,\s*/)}function i(t,e,o,a){var s=[],u=/^@(\w+)\b/.exec(t[0]),c=u&&u[1]=="keyframes";if(u&&e==null)return o.push(t[0]+";");for(var l in e){var f=e[l];if(/&/.test(l)){i(l.split(/,\s*/).map((function(e){return t.map((function(t){return e.replace(/&/,t)}))})).reduce((function(t,e){return t.concat(e)})),f,o)}else if(f&&typeof f=="object"){if(!u)throw new RangeError("The value of a property ("+l+") should be a primitive value.");i(r(l),f,s,c)}else if(f!=null){s.push(l.replace(/_.*/,"").replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))+": "+f+";")}}if(s.length||c){o.push((n&&!u&&!a?t.map(n):t).join(", ")+" {"+s.join(" ")+"}")}}for(var o in t)i(r(o),t[o],this.rules)}t.prototype.getRules=function(){return this.rules.join("\n")};t.newName=function(){var t=ae[ie]||1;ae[ie]=t+1;return re+t.toString(36)};t.mount=function(t,e){(t[oe]||new ce(t)).mount(Array.isArray(e)?e:[e])};return t}();var ue=null;var ce=function(){function t(t){if(!t.head&&t.adoptedStyleSheets&&typeof CSSStyleSheet!="undefined"){if(ue){t.adoptedStyleSheets=[ue.sheet].concat(t.adoptedStyleSheets);return t[oe]=ue}this.sheet=new CSSStyleSheet;t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets);ue=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");var e=t.head||t;e.insertBefore(this.styleTag,e.firstChild)}this.modules=[];t[oe]=this}t.prototype.mount=function(t){var e=this.sheet;var n=0,r=0;for(var i=0;i<t.length;i++){var o=t[i],a=this.modules.indexOf(o);if(a<r&&a>-1){this.modules.splice(a,1);r--;a=-1}if(a==-1){this.modules.splice(r++,0,o);if(e)for(var s=0;s<o.rules.length;s++)e.insertRule(o.rules[s],n++)}else{while(r<a)n+=this.modules[r++].rules.length;n+=o.rules.length;r++}}if(!e){var u="";for(var c=0;c<this.modules.length;c++)u+=this.modules[c].getRules()+"\n";this.styleTag.textContent=u}};return t}();var le=function(){function t(){}t.prototype.eq=function(t){return this==t};t.prototype.range=function(t,e){if(e===void 0){e=t}return new fe(t,e,this)};return t}();le.prototype.startSide=le.prototype.endSide=0;le.prototype.point=false;le.prototype.mapMode=Z.TrackDel;var fe=function(){function t(t,e,n){this.from=t;this.to=e;this.value=n}return t}();function he(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}var de=function(){function t(t,e,n,r){this.from=t;this.to=e;this.value=n;this.maxPoint=r}Object.defineProperty(t.prototype,"length",{get:function(){return this.to[this.to.length-1]},enumerable:false,configurable:true});t.prototype.findIndex=function(t,e,n,r){if(n===void 0){n=e*1e9}if(r===void 0){r=0}if(t<=0)return r;var i=e<0?this.to:this.from;for(var o=r,a=i.length;;){if(o==a)return o;var s=o+a>>1;var u=i[s]-t||(e<0?this.value[s].startSide:this.value[s].endSide)-n;if(s==o)return u>=0?o:a;if(u>=0)a=s;else o=s+1}};t.prototype.between=function(t,e,n,r){for(var i=this.findIndex(e,-1),o=this.findIndex(n,1,undefined,i);i<o;i++)if(r(this.from[i]+t,this.to[i]+t,this.value[i])===false)return false};t.prototype.map=function(e,n){var r=[],i=[],o=[],a=-1,s=-1;for(var u=0;u<this.value.length;u++){var c=this.value[u],l=this.from[u]+e,f=this.to[u]+e,h=void 0,d=void 0;if(l==f){var p=n.mapPos(l,c.startSide,c.mapMode);if(p==null)continue;h=d=p}else{h=n.mapPos(l,c.startSide);d=n.mapPos(f,c.endSide);if(h>d||h==d&&c.startSide>0&&c.endSide<=0)continue}if((d-h||c.endSide-c.startSide)<0)continue;if(a<0)a=h;if(c.point)s=Math.max(s,d-h);r.push(c);i.push(h-a);o.push(d-a)}return{mapped:r.length?new t(i,o,r,s):null,pos:a}};return t}();var pe=function(){function t(e,n,r,i){if(r===void 0){r=t.empty}this.chunkPos=e;this.chunk=n;this.nextLayer=r;this.maxPoint=i}Object.defineProperty(t.prototype,"length",{get:function(){var t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"size",{get:function(){if(this.isEmpty)return 0;var t=this.nextLayer.size;for(var e=0,n=this.chunk;e<n.length;e++){var r=n[e];t+=r.value.length}return t},enumerable:false,configurable:true});t.prototype.chunkEnd=function(t){return this.chunkPos[t]+this.chunk[t].length};t.prototype.update=function(e){var n=e.add,r=n===void 0?[]:n,i=e.sort,o=i===void 0?false:i,a=e.filterFrom,s=a===void 0?0:a,u=e.filterTo,c=u===void 0?this.length:u;var l=e.filter;if(r.length==0&&!l)return this;if(o)r.slice().sort(he);if(this.isEmpty)return r.length?t.of(r):this;var f=new ge(this,null,-1).goto(0),h=0,d=[];var p=new ve;while(f.value||h<r.length){if(h<r.length&&(f.from-r[h].from||f.startSide-r[h].value.startSide)>=0){var v=r[h++];if(!p.addInner(v.from,v.to,v.value))d.push(v)}else if(f.rangeIndex==1&&f.chunkIndex<this.chunk.length&&(h==r.length||this.chunkEnd(f.chunkIndex)<r[h].from)&&(!l||s>this.chunkEnd(f.chunkIndex)||c<this.chunkPos[f.chunkIndex])&&p.addChunk(this.chunkPos[f.chunkIndex],this.chunk[f.chunkIndex])){f.nextChunk()}else{if(!l||s>f.to||c<f.from||l(f.from,f.to,f.value)){if(!p.addInner(f.from,f.to,f.value))d.push(new fe(f.from,f.to,f.value))}f.next()}}return p.finishInner(this.nextLayer.isEmpty&&!d.length?t.empty:this.nextLayer.update({add:d,filter:l,filterFrom:s,filterTo:c}))};t.prototype.map=function(e){if(e.length==0||this.isEmpty)return this;var n=[],r=[],i=-1;for(var o=0;o<this.chunk.length;o++){var a=this.chunkPos[o],s=this.chunk[o];var u=e.touchesRange(a,a+s.length);if(u===false){i=Math.max(i,s.maxPoint);n.push(s);r.push(e.mapPos(a))}else if(u===true){var c=s.map(a,e),l=c.mapped,f=c.pos;if(l){i=Math.max(i,l.maxPoint);n.push(l);r.push(f)}}}var h=this.nextLayer.map(e);return n.length==0?h:new t(r,n,h,i)};t.prototype.between=function(t,e,n){if(this.isEmpty)return;for(var r=0;r<this.chunk.length;r++){var i=this.chunkPos[r],o=this.chunk[r];if(e>=i&&t<=i+o.length&&o.between(i,t-i,e-i,n)===false)return}this.nextLayer.between(t,e,n)};t.prototype.iter=function(t){if(t===void 0){t=0}return ye.from([this]).goto(t)};Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.nextLayer==this},enumerable:false,configurable:true});t.iter=function(t,e){if(e===void 0){e=0}return ye.from(t).goto(e)};t.compare=function(t,e,n,r,i){if(i===void 0){i=-1}var o=t.filter((function(t){return t.maxPoint>=500||!t.isEmpty&&e.indexOf(t)<0&&t.maxPoint>=i}));var a=e.filter((function(e){return e.maxPoint>=500||!e.isEmpty&&t.indexOf(e)<0&&e.maxPoint>=i}));var s=me(o,a);var u=new we(o,s,i);var c=new we(a,s,i);n.iterGaps((function(t,e,n){return xe(u,t,c,e,n,r)}));if(n.empty&&n.length==0)xe(u,0,c,0,0,r)};t.eq=function(t,e,n,r){if(n===void 0){n=0}if(r==null)r=1e9;var i=t.filter((function(t){return!t.isEmpty&&e.indexOf(t)<0}));var o=e.filter((function(e){return!e.isEmpty&&t.indexOf(e)<0}));if(i.length!=o.length)return false;if(!i.length)return true;var a=me(i,o);var s=new we(i,a,0).goto(n),u=new we(o,a,0).goto(n);for(;;){if(s.to!=u.to||!ke(s.active,u.active)||s.point&&(!u.point||!s.point.eq(u.point)))return false;if(s.to>=r)return true;s.next();u.next()}};t.spans=function(t,e,n,r,i){if(i===void 0){i=-1}var o=new we(t,null,i).goto(e),a=e;var s=o.openStart;for(;;){var u=Math.min(o.to,n);if(o.point){r.point(a,u,o.point,o.activeForPoint(o.to),s);s=o.openEnd(u)+(o.to>u?1:0)}else if(u>a){r.span(a,u,o.active,s);s=o.openEnd(u)}if(o.to>n)break;a=o.to;o.next()}return s};t.of=function(t,e){if(e===void 0){e=false}var n=new ve;for(var r=0,i=t instanceof fe?[t]:e?t.slice().sort(he):t;r<i.length;r++){var o=i[r];n.add(o.from,o.to,o.value)}return n.finish()};return t}();pe.empty=new pe([],[],null,-1);pe.empty.nextLayer=pe.empty;var ve=function(){function t(){this.chunks=[];this.chunkPos=[];this.chunkStart=-1;this.last=null;this.lastFrom=-1e9;this.lastTo=-1e9;this.from=[];this.to=[];this.value=[];this.maxPoint=-1;this.setMaxPoint=-1;this.nextLayer=null}t.prototype.finishChunk=function(t){this.chunks.push(new de(this.from,this.to,this.value,this.maxPoint));this.chunkPos.push(this.chunkStart);this.chunkStart=-1;this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint);this.maxPoint=-1;if(t){this.from=[];this.to=[];this.value=[]}};t.prototype.add=function(e,n,r){if(!this.addInner(e,n,r))(this.nextLayer||(this.nextLayer=new t)).add(e,n,r)};t.prototype.addInner=function(t,e,n){var r=t-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");if(r<0)return false;if(this.from.length==250)this.finishChunk(true);if(this.chunkStart<0)this.chunkStart=t;this.from.push(t-this.chunkStart);this.to.push(e-this.chunkStart);this.last=n;this.lastFrom=t;this.lastTo=e;this.value.push(n);if(n.point)this.maxPoint=Math.max(this.maxPoint,e-t);return true};t.prototype.addChunk=function(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return false;if(this.from.length)this.finishChunk(true);this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint);this.chunks.push(e);this.chunkPos.push(t);var n=e.value.length-1;this.last=e.value[n];this.lastFrom=e.from[n]+t;this.lastTo=e.to[n]+t;return true};t.prototype.finish=function(){return this.finishInner(pe.empty)};t.prototype.finishInner=function(t){if(this.from.length)this.finishChunk(false);if(this.chunks.length==0)return t;var e=new pe(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);this.from=null;return e};return t}();function me(t,e){var n=new Map;for(var r=0,i=t;r<i.length;r++){var o=i[r];for(var a=0;a<o.chunk.length;a++)if(o.chunk[a].maxPoint<500)n.set(o.chunk[a],o.chunkPos[a])}var s=new Set;for(var u=0,c=e;u<c.length;u++){var o=c[u];for(var l=0;l<o.chunk.length;l++)if(n.get(o.chunk[l])==o.chunkPos[l])s.add(o.chunk[l])}return s}var ge=function(){function t(t,e,n,r){if(r===void 0){r=0}this.layer=t;this.skip=e;this.minPoint=n;this.rank=r}Object.defineProperty(t.prototype,"startSide",{get:function(){return this.value?this.value.startSide:0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"endSide",{get:function(){return this.value?this.value.endSide:0},enumerable:false,configurable:true});t.prototype.goto=function(t,e){if(e===void 0){e=-1e9}this.chunkIndex=this.rangeIndex=0;this.gotoInner(t,e,false);return this};t.prototype.gotoInner=function(t,e,n){while(this.chunkIndex<this.layer.chunk.length){var r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<t||r.maxPoint<this.minPoint))break;this.chunkIndex++;n=false}var i=this.chunkIndex==this.layer.chunk.length?0:this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],-1,e);if(!n||this.rangeIndex<i)this.rangeIndex=i;this.next()};t.prototype.forward=function(t,e){if((this.to-t||this.endSide-e)<0)this.gotoInner(t,e,true)};t.prototype.next=function(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9;this.value=null;break}else{var t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex];var n=t+e.from[this.rangeIndex];this.from=n;this.to=t+e.to[this.rangeIndex];this.value=e.value[this.rangeIndex];if(++this.rangeIndex==e.value.length){this.chunkIndex++;if(this.skip){while(this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]))this.chunkIndex++}this.rangeIndex=0}if(this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}};t.prototype.nextChunk=function(){this.chunkIndex++;this.rangeIndex=0;this.next()};t.prototype.compare=function(t){return this.from-t.from||this.startSide-t.startSide||this.to-t.to||this.endSide-t.endSide};return t}();var ye=function(){function t(t){this.heap=t}t.from=function(e,n,r){if(n===void 0){n=null}if(r===void 0){r=-1}var i=[];for(var o=0;o<e.length;o++){for(var a=e[o];!a.isEmpty;a=a.nextLayer){if(a.maxPoint>=r)i.push(new ge(a,n,r,o))}}return i.length==1?i[0]:new t(i)};Object.defineProperty(t.prototype,"startSide",{get:function(){return this.value?this.value.startSide:0},enumerable:false,configurable:true});t.prototype.goto=function(t,e){if(e===void 0){e=-1e9}for(var n=0,r=this.heap;n<r.length;n++){var i=r[n];i.goto(t,e)}for(var o=this.heap.length>>1;o>=0;o--)be(this.heap,o);this.next();return this};t.prototype.forward=function(t,e){for(var n=0,r=this.heap;n<r.length;n++){var i=r[n];i.forward(t,e)}for(var o=this.heap.length>>1;o>=0;o--)be(this.heap,o);if((this.to-t||this.value.endSide-e)<0)this.next()};t.prototype.next=function(){if(this.heap.length==0){this.from=this.to=1e9;this.value=null;this.rank=-1}else{var t=this.heap[0];this.from=t.from;this.to=t.to;this.value=t.value;this.rank=t.rank;if(t.value)t.next();be(this.heap,0)}};return t}();function be(t,e){for(var n=t[e];;){var r=(e<<1)+1;if(r>=t.length)break;var i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0){i=t[r+1];r++}if(n.compare(i)<0)break;t[r]=n;t[e]=i;e=r}}var we=function(){function t(t,e,n){this.minPoint=n;this.active=[];this.activeTo=[];this.activeRank=[];this.minActive=-1;this.point=null;this.pointFrom=0;this.pointRank=0;this.to=-1e9;this.endSide=0;this.openStart=-1;this.cursor=ye.from(t,e,n)}t.prototype.goto=function(t,e){if(e===void 0){e=-1e9}this.cursor.goto(t,e);this.active.length=this.activeTo.length=this.activeRank.length=0;this.minActive=-1;this.to=t;this.endSide=e;this.openStart=-1;this.next();return this};t.prototype.forward=function(t,e){while(this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0)this.removeActive(this.minActive);this.cursor.forward(t,e)};t.prototype.removeActive=function(t){Se(this.active,t);Se(this.activeTo,t);Se(this.activeRank,t);this.minActive=Me(this.active,this.activeTo)};t.prototype.addActive=function(t){var e=0,n=this.cursor,r=n.value,i=n.to,o=n.rank;while(e<this.activeRank.length&&this.activeRank[e]<=o)e++;Ae(this.active,e,r);Ae(this.activeTo,e,i);Ae(this.activeRank,e,o);if(t)Ae(t,e,this.cursor.from);this.minActive=Me(this.active,this.activeTo)};t.prototype.next=function(){var t=this.to,e=this.point;this.point=null;var n=this.openStart<0?[]:null,r=0;for(;;){var i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>t){this.to=this.activeTo[i];this.endSide=this.active[i].endSide;break}this.removeActive(i);if(n)Se(n,i)}else if(!this.cursor.value){this.to=this.endSide=1e9;break}else if(this.cursor.from>t){this.to=this.cursor.from;this.endSide=this.cursor.startSide;break}else{var o=this.cursor.value;if(!o.point){this.addActive(n);this.cursor.next()}else if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to&&o.endSide==this.endSide){this.cursor.next()}else{this.point=o;this.pointFrom=this.cursor.from;this.pointRank=this.cursor.rank;this.to=this.cursor.to;this.endSide=o.endSide;if(this.cursor.from<t)r=1;this.cursor.next();if(this.to>t)this.forward(this.to,this.endSide);break}}}if(n){var a=0;while(a<n.length&&n[a]<t)a++;this.openStart=a+r}};t.prototype.activeForPoint=function(t){if(!this.active.length)return this.active;var e=[];for(var n=this.active.length-1;n>=0;n--){if(this.activeRank[n]<this.pointRank)break;if(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>this.point.endSide)e.push(this.active[n])}return e.reverse()};t.prototype.openEnd=function(t){var e=0;for(var n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)e++;return e};return t}();function xe(t,e,n,r,i,o){t.goto(e);n.goto(r);var a=r+i;var s=r,u=r-e;for(;;){var c=t.to+u-n.to||t.endSide-n.endSide;var l=c<0?t.to+u:n.to,f=Math.min(l,a);if(t.point||n.point){if(!(t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))))o.comparePoint(s,f,t.point,n.point)}else{if(f>s&&!ke(t.active,n.active))o.compareRange(s,f,t.active,n.active)}if(l>a)break;s=l;if(c<=0)t.next();if(c>=0)n.next()}}function ke(t,e){if(t.length!=e.length)return false;for(var n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return false;return true}function Se(t,e){for(var n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Ae(t,e,n){for(var r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function Me(t,e){var n=-1,r=1e9;for(var i=0;i<e.length;i++)if((e[i]-r||t[i].endSide-t[n].endSide)<0){n=i;r=e[i]}return n}var Ce={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"};var Oe={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"};var Ie=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent);var Re=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor);var Ee=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent);var Pe=typeof navigator!="undefined"&&/Mac/.test(navigator.platform);var De=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);var Te=Ie&&(Pe||+Ie[1]<57)||Ee&&Pe;for(var We=0;We<10;We++)Ce[48+We]=Ce[96+We]=String(We);for(var We=1;We<=24;We++)Ce[We+111]="F"+We;for(var We=65;We<=90;We++){Ce[We]=String.fromCharCode(We+32);Oe[We]=String.fromCharCode(We)}for(var Le in Ce)if(!Oe.hasOwnProperty(Le))Oe[Le]=Ce[Le];function Ne(t){var e=Te&&(t.ctrlKey||t.altKey||t.metaKey)||(Re||De)&&t.shiftKey&&t.key&&t.key.length==1;var n=!e&&t.key||(t.shiftKey?Oe:Ce)[t.keyCode]||t.key||"Unidentified";if(n=="Esc")n="Escape";if(n=="Del")n="Delete";if(n=="Left")n="ArrowLeft";if(n=="Up")n="ArrowUp";if(n=="Right")n="ArrowRight";if(n=="Down")n="ArrowDown";return n}function _e(t){return t.getSelection?t.getSelection():document.getSelection()}function Be(t,e){return e?t.contains(e.nodeType!=1?e.parentNode:e):false}function je(){var t=document.activeElement;while(t&&t.shadowRoot)t=t.shadowRoot.activeElement;return t}function qe(t,e){if(!e.anchorNode)return false;try{return Be(t,e.anchorNode)}catch(ev){return false}}function Ue(t){if(t.nodeType==3)return en(t,0,t.nodeValue.length).getClientRects();else if(t.nodeType==1)return t.getClientRects();else return[]}function Fe(t,e,n,r){return n?Ve(t,e,n,r,-1)||Ve(t,e,n,r,1):false}function ze(t){for(var e=0;;e++){t=t.previousSibling;if(!t)return e}}function Ve(t,e,n,r,i){for(;;){if(t==n&&e==r)return true;if(e==(i<0?0:He(t))){if(t.nodeName=="DIV")return false;var o=t.parentNode;if(!o||o.nodeType!=1)return false;e=ze(t)+(i<0?0:1);t=o}else if(t.nodeType==1){t=t.childNodes[e+(i<0?-1:0)];if(t.nodeType==1&&t.contentEditable=="false")return false;e=i<0?He(t):0}else{return false}}}function He(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}var Ke={left:0,right:0,top:0,bottom:0};function Ge(t,e){var n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Je(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}var $e=5;function Xe(t,e){var n=t.ownerDocument,r=n.defaultView;for(var i=t.parentNode;i;){if(i.nodeType==1){var o=void 0,a=i==document.body;if(a){o=Je(r)}else{if(i.scrollHeight<=i.clientHeight&&i.scrollWidth<=i.clientWidth){i=i.parentNode;continue}var s=i.getBoundingClientRect();o={left:s.left,right:s.left+i.clientWidth,top:s.top,bottom:s.top+i.clientHeight}}var u=0,c=0;if(e.top<o.top)c=-(o.top-e.top+$e);else if(e.bottom>o.bottom)c=e.bottom-o.bottom+$e;if(e.left<o.left)u=-(o.left-e.left+$e);else if(e.right>o.right)u=e.right-o.right+$e;if(u||c){if(a){r.scrollBy(u,c)}else{if(c){var l=i.scrollTop;i.scrollTop+=c;c=i.scrollTop-l}if(u){var l=i.scrollLeft;i.scrollLeft+=u;u=i.scrollLeft-l}e={left:e.left-u,top:e.top-c,right:e.right-u,bottom:e.bottom-c}}}if(a)break;i=i.assignedSlot||i.parentNode}else if(i.nodeType==11){i=i.host}else{break}}}var Ye=function(){function t(){this.anchorNode=null;this.anchorOffset=0;this.focusNode=null;this.focusOffset=0}t.prototype.eq=function(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset};t.prototype.set=function(t){this.anchorNode=t.anchorNode;this.anchorOffset=t.anchorOffset;this.focusNode=t.focusNode;this.focusOffset=t.focusOffset};return t}();var Qe=null;function Ze(t){if(t.setActive)return t.setActive();if(Qe)return t.focus(Qe);var e=[];for(var n=t;n;n=n.parentNode){e.push(n,n.scrollTop,n.scrollLeft);if(n==n.ownerDocument)break}t.focus(Qe==null?{get preventScroll(){Qe={preventScroll:true};return true}}:undefined);if(!Qe){Qe=false;for(var r=0;r<e.length;){var i=e[r++],o=e[r++],a=e[r++];if(i.scrollTop!=o)i.scrollTop=o;if(i.scrollLeft!=a)i.scrollLeft=a}}}var tn;function en(t,e,n){if(n===void 0){n=e}var r=tn||(tn=document.createRange());r.setEnd(t,n);r.setStart(t,e);return r}function nn(t,e,n){var r={key:e,code:e,keyCode:n,which:n,cancelable:true};var i=new KeyboardEvent("keydown",r);i.synthetic=true;t.dispatchEvent(i);var o=new KeyboardEvent("keyup",r);o.synthetic=true;t.dispatchEvent(o);return i.defaultPrevented||o.defaultPrevented}var rn=function(){function t(t,e,n){if(n===void 0){n=true}this.node=t;this.offset=e;this.precise=n}t.before=function(e,n){return new t(e.parentNode,ze(e),n)};t.after=function(e,n){return new t(e.parentNode,ze(e)+1,n)};return t}();var on=[];var an=function(){function t(){this.parent=null;this.dom=null;this.dirty=2}Object.defineProperty(t.prototype,"editorView",{get:function(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"overrideDOMText",{get:function(){return null},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"posAtStart",{get:function(){return this.parent?this.parent.posBefore(this):0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"posAtEnd",{get:function(){return this.posAtStart+this.length},enumerable:false,configurable:true});t.prototype.posBefore=function(t){var e=this.posAtStart;for(var n=0,r=this.children;n<r.length;n++){var i=r[n];if(i==t)return e;e+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")};t.prototype.posAfter=function(t){return this.posBefore(t)+t.length};t.prototype.coordsAt=function(t,e){return null};t.prototype.sync=function(e){var n;if(this.dirty&2){var r=this.dom,i=null;for(var o=0,a=this.children;o<a.length;o++){var s=a[o];if(s.dirty){var u=i?i.nextSibling:r.firstChild;if(!s.dom&&u&&!((n=t.get(u))===null||n===void 0?void 0:n.parent))s.reuseDOM(u);s.sync(e);s.dirty=0}if(e&&e.node==r&&i!=s.dom)e.written=true;un(r,i,s.dom);i=s.dom}var c=i?i.nextSibling:r.firstChild;if(c&&e&&e.node==r)e.written=true;while(c)c=sn(c)}else if(this.dirty&1){for(var l=0,f=this.children;l<f.length;l++){var s=f[l];if(s.dirty){s.sync(e);s.dirty=0}}}};t.prototype.reuseDOM=function(t){return false};t.prototype.localPosFromDOM=function(e,n){var r;if(e==this.dom){r=this.dom.childNodes[n]}else{var i=He(e)==0?0:n==0?-1:1;for(;;){var o=e.parentNode;if(o==this.dom)break;if(i==0&&o.firstChild!=o.lastChild){if(e==o.firstChild)i=-1;else i=1}e=o}if(i<0)r=e;else r=e.nextSibling}if(r==this.dom.firstChild)return 0;while(r&&!t.get(r))r=r.nextSibling;if(!r)return this.length;for(var a=0,s=0;;a++){var u=this.children[a];if(u.dom==r)return s;s+=u.length+u.breakAfter}};t.prototype.domBoundsAround=function(t,e,n){if(n===void 0){n=0}var r=-1,i=-1,o=-1,a=-1;for(var s=0,u=n,c=n;s<this.children.length;s++){var l=this.children[s],f=u+l.length;if(u<t&&f>e)return l.domBoundsAround(t,e,u);if(f>=t&&r==-1){r=s;i=u}if(u>e&&l.dom.parentNode==this.dom){o=s;a=c;break}c=f;u=f+l.breakAfter}return{from:i,to:a<0?n+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}};t.prototype.markDirty=function(t){if(t===void 0){t=false}if(this.dirty&2)return;this.dirty|=2;this.markParentsDirty(t)};t.prototype.markParentsDirty=function(t){for(var e=this.parent;e;e=e.parent){if(t)e.dirty|=2;if(e.dirty&1)return;e.dirty|=1;t=false}};t.prototype.setParent=function(t){if(this.parent!=t){this.parent=t;if(this.dirty)this.markParentsDirty(true)}};t.prototype.setDOM=function(t){this.dom=t;t.cmView=this};Object.defineProperty(t.prototype,"rootView",{get:function(){for(var t=this;;){var e=t.parent;if(!e)return t;t=e}},enumerable:false,configurable:true});t.prototype.replaceChildren=function(t,e,n){var r;if(n===void 0){n=on}this.markDirty();for(var i=t;i<e;i++){var o=this.children[i];if(o.parent==this)o.parent=null}(r=this.children).splice.apply(r,__spreadArray([t,e-t],n));for(var a=0;a<n.length;a++)n[a].setParent(this)};t.prototype.ignoreMutation=function(t){return false};t.prototype.ignoreEvent=function(t){return false};t.prototype.childCursor=function(t){if(t===void 0){t=this.length}return new cn(this.children,t,this.children.length)};t.prototype.childPos=function(t,e){if(e===void 0){e=1}return this.childCursor().findPos(t,e)};t.prototype.toString=function(){var t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")};t.get=function(t){return t.cmView};return t}();an.prototype.breakAfter=0;function sn(t){var e=t.nextSibling;t.parentNode.removeChild(t);return e}function un(t,e,n){var r=e?e.nextSibling:t.firstChild;if(n.parentNode==t)while(r!=n)r=sn(r);else t.insertBefore(n,r)}var cn=function(){function t(t,e,n){this.children=t;this.pos=e;this.i=n;this.off=0}t.prototype.findPos=function(t,e){if(e===void 0){e=1}for(;;){if(t>this.pos||t==this.pos&&(e>0||this.i==0||this.children[this.i-1].breakAfter)){this.off=t-this.pos;return this}var n=this.children[--this.i];this.pos-=n.length+n.breakAfter}};return t}();var ln=typeof navigator!="undefined"?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}],fn=ln[0],hn=ln[1];var dn=/Edge\/(\d+)/.exec(fn.userAgent);var pn=/MSIE \d/.test(fn.userAgent);var vn=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(fn.userAgent);var mn=!!(pn||vn||dn);var gn=!mn&&/gecko\/(\d+)/i.test(fn.userAgent);var yn=!mn&&/Chrome\/(\d+)/.exec(fn.userAgent);var bn="webkitFontSmoothing"in hn.documentElement.style;var wn=!mn&&/Apple Computer/.test(fn.vendor);var xn={mac:/Mac/.test(fn.platform),ie:mn,ie_version:pn?hn.documentMode||6:vn?+vn[1]:dn?+dn[1]:0,gecko:gn,gecko_version:gn?+(/Firefox\/(\d+)/.exec(fn.userAgent)||[0,0])[1]:0,chrome:!!yn,chrome_version:yn?+yn[1]:0,ios:wn&&(/Mobile\/\w+/.test(fn.userAgent)||fn.maxTouchPoints>2),android:/Android\b/.test(fn.userAgent),webkit:bn,safari:wn,webkit_version:bn?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:hn.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};var kn=[];var Sn=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.become=function(t){return false};e.prototype.getSide=function(){return 0};return e}(an);Sn.prototype.children=kn;var An=256;var Mn=function(t){__extends(e,t);function e(e){var n=t.call(this)||this;n.text=e;return n}Object.defineProperty(e.prototype,"length",{get:function(){return this.text.length},enumerable:false,configurable:true});e.prototype.createDOM=function(t){this.setDOM(t||document.createTextNode(this.text))};e.prototype.sync=function(t){if(!this.dom)this.createDOM();if(this.dom.nodeValue!=this.text){if(t&&t.node==this.dom)t.written=true;this.dom.nodeValue=this.text}};e.prototype.reuseDOM=function(t){if(t.nodeType!=3)return false;this.createDOM(t);return true};e.prototype.merge=function(t,n,r){if(r&&(!(r instanceof e)||this.length-(n-t)+r.length>An))return false;this.text=this.text.slice(0,t)+(r?r.text:"")+this.text.slice(n);this.markDirty();return true};e.prototype.slice=function(t){return new e(this.text.slice(t))};e.prototype.localPosFromDOM=function(t,e){return t==this.dom?e:e?this.text.length:0};e.prototype.domAtPos=function(t){return new rn(this.dom,t)};e.prototype.domBoundsAround=function(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}};e.prototype.coordsAt=function(t,e){return On(this.dom,t,e)};return e}(Sn);var Cn=function(t){__extends(e,t);function e(e,n,r){if(n===void 0){n=[]}if(r===void 0){r=0}var i=t.call(this)||this;i.mark=e;i.children=n;i.length=r;for(var o=0,a=n;o<a.length;o++){var s=a[o];s.setParent(i)}return i}e.prototype.createDOM=function(){var t=document.createElement(this.mark.tagName);if(this.mark.class)t.className=this.mark.class;if(this.mark.attrs)for(var e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);this.setDOM(t)};e.prototype.sync=function(e){if(!this.dom)this.createDOM();t.prototype.sync.call(this,e)};e.prototype.merge=function(t,n,r,i,o){if(r&&(!(r instanceof e&&r.mark.eq(this.mark))||t&&i<=0||n<this.length&&o<=0))return false;En(this,t,n,r?r.children:kn,i-1,o-1);this.markDirty();return true};e.prototype.slice=function(t){return new e(this.mark,Pn(this.children,t),this.length-t)};e.prototype.domAtPos=function(t){return Dn(this.dom,this.children,t)};e.prototype.coordsAt=function(t,e){return Wn(this,t,e)};return e}(Sn);function On(t,e,n){var r=t.nodeValue.length;if(e>r)e=r;var i=e,o=e,a=0;if(e==0&&n<0||e==r&&n>=0){if(!(xn.chrome||xn.gecko)){if(e){i--;a=1}else{o++;a=-1}}}else{if(n<0)i--;else o++}var s=en(t,i,o).getClientRects();if(!s.length)return Ke;var u=s[(a?a<0:n>=0)?0:s.length-1];if(xn.safari&&!a&&u.width==0)u=Array.prototype.find.call(s,(function(t){return t.width}))||u;return a?Ge(u,a<0):u}var In=function(t){__extends(e,t);function e(e,n,r){var i=t.call(this)||this;i.widget=e;i.length=n;i.side=r;return i}e.create=function(t,n,r){return new(t.customView||e)(t,n,r)};e.prototype.slice=function(t){return e.create(this.widget,this.length-t,this.side)};e.prototype.sync=function(){if(!this.dom||!this.widget.updateDOM(this.dom)){this.setDOM(this.widget.toDOM(this.editorView));this.dom.contentEditable="false"}};e.prototype.getSide=function(){return this.side};e.prototype.merge=function(t,n,r,i,o){if(r&&(!(r instanceof e)||!this.widget.compare(r.widget)||t>0&&i<=0||n<this.length&&o<=0))return false;this.length=t+(r?r.length:0)+(this.length-n);return true};e.prototype.become=function(t){if(t.length==this.length&&t instanceof e&&t.side==this.side){if(this.widget.constructor==t.widget.constructor){if(!this.widget.eq(t.widget))this.markDirty(true);this.widget=t.widget;return true}}return false};e.prototype.ignoreMutation=function(){return true};e.prototype.ignoreEvent=function(t){return this.widget.ignoreEvent(t)};Object.defineProperty(e.prototype,"overrideDOMText",{get:function(){if(this.length==0)return z.empty;var t=this;while(t.parent)t=t.parent;var e=t.editorView,n=e&&e.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):z.empty},enumerable:false,configurable:true});e.prototype.domAtPos=function(t){return t==0?rn.before(this.dom):rn.after(this.dom,t==this.length)};e.prototype.domBoundsAround=function(){return null};e.prototype.coordsAt=function(t,e){var n=this.dom.getClientRects(),r=null;if(!n.length)return Ke;for(var i=t>0?n.length-1:0;;i+=t>0?-1:1){r=n[i];if(t>0?i==0:i==n.length-1||r.top<r.bottom)break}return t==0&&e>0||t==this.length&&e<=0?r:Ge(r,t==0)};return e}(Sn);var Rn=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.domAtPos=function(t){return new rn(this.widget.text,t)};e.prototype.sync=function(){if(!this.dom)this.setDOM(this.widget.toDOM())};e.prototype.localPosFromDOM=function(t,e){return!e?0:t.nodeType==3?Math.min(e,this.length):this.length};e.prototype.ignoreMutation=function(){return false};Object.defineProperty(e.prototype,"overrideDOMText",{get:function(){return null},enumerable:false,configurable:true});e.prototype.coordsAt=function(t,e){return On(this.widget.text,t,e)};return e}(In);function En(t,e,n,r,i,o){var a=t.childCursor();var s=a.findPos(n,1),u=s.i,c=s.off;var l=a.findPos(e,-1),f=l.i,h=l.off;var d=e-n;for(var p=0,v=r;p<v.length;p++){var m=v[p];d+=m.length}t.length+=d;var g=t.children;if(f==u&&h){var y=g[f];if(r.length==1&&y.merge(h,c,r[0],i,o))return;if(r.length==0){y.merge(h,c,null,i,o);return}var b=y.slice(c);if(b.merge(0,0,r[r.length-1],0,o))r[r.length-1]=b;else r.push(b);u++;o=c=0}if(c){var w=g[u];if(r.length&&w.merge(0,c,r[r.length-1],0,o)){r.pop();o=r.length?0:i}else{w.merge(0,c,null,0,0)}}else if(u<g.length&&r.length&&g[u].merge(0,0,r[r.length-1],0,o)){r.pop();o=r.length?0:i}if(h){var y=g[f];if(r.length&&y.merge(h,y.length,r[0],i,0)){r.shift();i=r.length?0:o}else{y.merge(h,y.length,null,0,0)}f++}else if(f&&r.length){var w=g[f-1];if(w.merge(w.length,w.length,r[0],i,0)){r.shift();i=r.length?0:o}}while(f<u&&r.length&&g[u-1].become(r[r.length-1])){r.pop();u--;o=r.length?0:i}while(f<u&&r.length&&g[f].become(r[0])){r.shift();f++;i=r.length?0:o}if(!r.length&&f&&u<g.length&&i&&o&&g[u].merge(0,0,g[f-1],i,o))f--;if(r.length||f!=u)t.replaceChildren(f,u,r)}function Pn(t,e){var n=[],r=0;for(var i=0,o=t;i<o.length;i++){var a=o[i];var s=r+a.length;if(s>e)n.push(r<e?a.slice(e-r):a);r=s}return n}function Dn(t,e,n){var r=0;for(var i=0;r<e.length;r++){var o=e[r],a=i+o.length;if(a==i&&o.getSide()<=0)continue;if(n>i&&n<a&&o.dom.parentNode==t)return o.domAtPos(n-i);if(n<=i)break;i=a}for(;r>0;r--){var s=e[r-1].dom;if(s.parentNode==t)return rn.after(s)}return new rn(t,0)}function Tn(t,e,n){var r,i=t.children;if(n>0&&e instanceof Cn&&i.length&&(r=i[i.length-1])instanceof Cn&&r.mark.eq(e.mark)){Tn(r,e.children[0],n-1)}else{i.push(e);e.setParent(t)}t.length+=e.length}function Wn(t,e,n){for(var r=0,i=0;i<t.children.length;i++){var o=t.children[i],a=r+o.length;if(a==r&&o.getSide()<=0)continue;if(n<=0||a==t.length?a>=e:a>e)return o.coordsAt(e-r,n);r=a}var s=t.dom.lastChild;if(!s)return t.dom.getBoundingClientRect();var u=Ue(s);return u[u.length-1]}function Ln(t,e){for(var n in t){if(n=="class"&&e.class)e.class+=" "+t.class;else if(n=="style"&&e.style)e.style+=";"+t.style;else e[n]=t[n]}return e}function Nn(t,e){if(t==e)return true;if(!t||!e)return false;var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return false;for(var i=0,o=n;i<o.length;i++){var a=o[i];if(r.indexOf(a)==-1||t[a]!==e[a])return false}return true}function _n(t,e,n){if(e)for(var r in e)if(!(n&&r in n))t.removeAttribute(r);if(n)for(var i in n)if(!(e&&e[i]==n[i]))t.setAttribute(i,n[i])}var Bn=function(){function t(){}t.prototype.eq=function(t){return false};t.prototype.updateDOM=function(t){return false};t.prototype.compare=function(t){return this==t||this.constructor==t.constructor&&this.eq(t)};Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return-1},enumerable:false,configurable:true});t.prototype.ignoreEvent=function(t){return true};Object.defineProperty(t.prototype,"customView",{get:function(){return null},enumerable:false,configurable:true});return t}();var jn=function(t){t[t["Text"]=0]="Text";t[t["WidgetBefore"]=1]="WidgetBefore";t[t["WidgetAfter"]=2]="WidgetAfter";t[t["WidgetRange"]=3]="WidgetRange";return t}(jn||(jn={}));var qn=function(t){__extends(e,t);function e(e,n,r,i){var o=t.call(this)||this;o.startSide=e;o.endSide=n;o.widget=r;o.spec=i;return o}Object.defineProperty(e.prototype,"heightRelevant",{get:function(){return false},enumerable:false,configurable:true});e.mark=function(t){return new Un(t)};e.widget=function(t){var e=t.side||0;if(t.block)e+=(2e8+1)*(e>0?1:-1);return new zn(t,e,e,!!t.block,t.widget||null,false)};e.replace=function(t){var e=!!t.block;var n=Vn(t),r=n.start,i=n.end;var o=e?-2e8*(r?2:1):1e8*(r?-1:1);var a=e?2e8*(i?2:1):1e8*(i?1:-1);return new zn(t,o,a,e,t.widget||null,true)};e.line=function(t){return new Fn(t)};e.set=function(t,e){if(e===void 0){e=false}return pe.of(t,e)};e.prototype.hasHeight=function(){return this.widget?this.widget.estimatedHeight>-1:false};return e}(le);qn.none=pe.empty;var Un=function(t){__extends(e,t);function e(e){var n=this;var r=Vn(e),i=r.start,o=r.end;n=t.call(this,1e8*(i?-1:1),1e8*(o?1:-1),null,e)||this;n.tagName=e.tagName||"span";n.class=e.class||"";n.attrs=e.attributes||null;return n}e.prototype.eq=function(t){return this==t||t instanceof e&&this.tagName==t.tagName&&this.class==t.class&&Nn(this.attrs,t.attrs)};e.prototype.range=function(e,n){if(n===void 0){n=e}if(e>=n)throw new RangeError("Mark decorations may not be empty");return t.prototype.range.call(this,e,n)};return e}(qn);Un.prototype.point=false;var Fn=function(t){__extends(e,t);function e(e){return t.call(this,-1e8,-1e8,null,e)||this}e.prototype.eq=function(t){return t instanceof e&&Nn(this.spec.attributes,t.spec.attributes)};e.prototype.range=function(e,n){if(n===void 0){n=e}if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return t.prototype.range.call(this,e,n)};return e}(qn);Fn.prototype.mapMode=Z.TrackBefore;Fn.prototype.point=true;var zn=function(t){__extends(e,t);function e(e,n,r,i,o,a){var s=t.call(this,n,r,o,e)||this;s.block=i;s.isReplace=a;s.mapMode=!i?Z.TrackDel:n<0?Z.TrackBefore:Z.TrackAfter;return s}Object.defineProperty(e.prototype,"type",{get:function(){return this.startSide<this.endSide?jn.WidgetRange:this.startSide<0?jn.WidgetBefore:jn.WidgetAfter},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"heightRelevant",{get:function(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5},enumerable:false,configurable:true});e.prototype.eq=function(t){return t instanceof e&&Hn(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide};e.prototype.range=function(e,n){if(n===void 0){n=e}if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return t.prototype.range.call(this,e,n)};return e}(qn);zn.prototype.point=true;function Vn(t){var e=t.inclusiveStart,n=t.inclusiveEnd;if(e==null)e=t.inclusive;if(n==null)n=t.inclusive;return{start:e||false,end:n||false}}function Hn(t,e){return t==e||!!(t&&e&&t.compare(e))}function Kn(t,e,n,r){if(r===void 0){r=0}var i=n.length-1;if(i>=0&&n[i]+r>t)n[i]=Math.max(n[i],e);else n.push(t,e)}var Gn=function(t){__extends(e,t);function e(){var e=t.apply(this,arguments)||this;e.children=[];e.length=0;e.prevAttrs=undefined;e.attrs=null;e.breakAfter=0;return e}e.prototype.merge=function(t,n,r,i,o,a){if(r){if(!(r instanceof e))return false;if(!this.dom)r.transferDOM(this)}if(i)this.setDeco(r?r.attrs:null);En(this,t,n,r?r.children:Jn,o,a);return true};e.prototype.split=function(t){var n=new e;n.breakAfter=this.breakAfter;if(this.length==0)return n;var r=this.childPos(t),i=r.i,o=r.off;if(o){n.append(this.children[i].slice(o),0);this.children[i].merge(o,this.children[i].length,null,0,0);i++}for(var a=i;a<this.children.length;a++)n.append(this.children[a],0);while(i>0&&this.children[i-1].length==0){this.children[i-1].parent=null;i--}this.children.length=i;this.markDirty();this.length=t;return n};e.prototype.transferDOM=function(t){if(!this.dom)return;t.setDOM(this.dom);t.prevAttrs=this.prevAttrs===undefined?this.attrs:this.prevAttrs;this.prevAttrs=undefined;this.dom=null};e.prototype.setDeco=function(t){if(!Nn(this.attrs,t)){if(this.dom){this.prevAttrs=this.attrs;this.markDirty()}this.attrs=t}};e.prototype.append=function(t,e){Tn(this,t,e)};e.prototype.addLineDeco=function(t){var e=t.spec.attributes;if(e)this.attrs=Ln(e,this.attrs||{})};e.prototype.domAtPos=function(t){return Dn(this.dom,this.children,t)};e.prototype.sync=function(e){if(!this.dom){this.setDOM(document.createElement("div"));this.dom.className="cm-line";this.prevAttrs=this.attrs?null:undefined}if(this.prevAttrs!==undefined){_n(this.dom,this.prevAttrs,this.attrs);this.dom.classList.add("cm-line");this.prevAttrs=undefined}t.prototype.sync.call(this,e);var n=this.dom.lastChild;if(!n||n.nodeName!="BR"&&an.get(n)instanceof In&&(!xn.ios||!this.children.some((function(t){return t instanceof Mn})))){var r=document.createElement("BR");r.cmIgnore=true;this.dom.appendChild(r)}};e.prototype.measureTextSize=function(){if(this.children.length==0||this.length>20)return null;var t=0;for(var e=0,n=this.children;e<n.length;e++){var r=n[e];if(!(r instanceof Mn))return null;var i=Ue(r.dom);if(i.length!=1)return null;t+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}};e.prototype.coordsAt=function(t,e){return Wn(this,t,e)};e.prototype.match=function(t){return false};Object.defineProperty(e.prototype,"type",{get:function(){return jn.Text},enumerable:false,configurable:true});e.find=function(t,n){for(var r=0,i=0;;r++){var o=t.children[r],a=i+o.length;if(a>=n){if(o instanceof e)return o;if(o.length)return null}i=a+o.breakAfter}};return e}(an);var Jn=[];var $n=function(t){__extends(e,t);function e(e,n,r){var i=t.call(this)||this;i.widget=e;i.length=n;i.type=r;i.breakAfter=0;return i}e.prototype.merge=function(t,n,r,i,o,a){if(r&&(!(r instanceof e)||!this.widget.compare(r.widget)||t>0&&o<=0||n<this.length&&a<=0))return false;this.length=t+(r?r.length:0)+(this.length-n);return true};e.prototype.domAtPos=function(t){return t==0?rn.before(this.dom):rn.after(this.dom,t==this.length)};e.prototype.split=function(t){var n=this.length-t;this.length=t;return new e(this.widget,n,this.type)};Object.defineProperty(e.prototype,"children",{get:function(){return Jn},enumerable:false,configurable:true});e.prototype.sync=function(){if(!this.dom||!this.widget.updateDOM(this.dom)){this.setDOM(this.widget.toDOM(this.editorView));this.dom.contentEditable="false"}};Object.defineProperty(e.prototype,"overrideDOMText",{get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):z.empty},enumerable:false,configurable:true});e.prototype.domBoundsAround=function(){return null};e.prototype.match=function(t){if(t instanceof e&&t.type==this.type&&t.widget.constructor==this.widget.constructor){if(!t.widget.eq(this.widget))this.markDirty(true);this.widget=t.widget;this.length=t.length;this.breakAfter=t.breakAfter;return true}return false};e.prototype.ignoreMutation=function(){return true};e.prototype.ignoreEvent=function(t){return this.widget.ignoreEvent(t)};return e}(an);var Xn=function(){function t(t,e,n){this.doc=t;this.pos=e;this.end=n;this.content=[];this.curLine=null;this.breakAtStart=0;this.openStart=-1;this.openEnd=-1;this.text="";this.textOff=0;this.cursor=t.iter();this.skip=e}t.prototype.posCovered=function(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var t=this.content[this.content.length-1];return!t.breakAfter&&!(t instanceof $n&&t.type==jn.WidgetBefore)};t.prototype.getLine=function(){if(!this.curLine)this.content.push(this.curLine=new Gn);return this.curLine};t.prototype.addWidget=function(t){this.curLine=null;this.content.push(t)};t.prototype.finish=function(){if(!this.posCovered())this.getLine()};t.prototype.wrapMarks=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];t=new Cn(i,[t],t.length)}return t};t.prototype.buildText=function(t,e,n){while(t>0){if(this.textOff==this.text.length){var r=this.cursor.next(this.skip),i=r.value,o=r.lineBreak,a=r.done;this.skip=0;if(a)throw new Error("Ran out of text content when drawing inline views");if(o){if(!this.posCovered())this.getLine();if(this.content.length)this.content[this.content.length-1].breakAfter=1;else this.breakAtStart=1;this.curLine=null;t--;continue}else{this.text=i;this.textOff=0}}var s=Math.min(this.text.length-this.textOff,t,512);this.getLine().append(this.wrapMarks(new Mn(this.text.slice(this.textOff,this.textOff+s)),e),n);this.textOff+=s;t-=s;n=0}};t.prototype.span=function(t,e,n,r){this.buildText(e-t,n,r);this.pos=e;if(this.openStart<0)this.openStart=r};t.prototype.point=function(t,e,n,r,i){var o=e-t;if(n instanceof zn){if(n.block){var a=n.type;if(a==jn.WidgetAfter&&!this.posCovered())this.getLine();this.addWidget(new $n(n.widget||new Yn("div"),o,a))}else{var s=this.wrapMarks(In.create(n.widget||new Yn("span"),o,n.startSide),r);this.getLine().append(s,i)}}else if(this.doc.lineAt(this.pos).from==this.pos){this.getLine().addLineDeco(n)}if(o){if(this.textOff+o<=this.text.length){this.textOff+=o}else{this.skip+=o-(this.text.length-this.textOff);this.text="";this.textOff=0}this.pos=e}if(this.openStart<0)this.openStart=i};t.build=function(e,n,r,i){var o=new t(e,n,r);o.openEnd=pe.spans(i,n,r,o);if(o.openStart<0)o.openStart=o.openEnd;o.finish();return o};return t}();var Yn=function(t){__extends(e,t);function e(e){var n=t.call(this)||this;n.tag=e;return n}e.prototype.eq=function(t){return t.tag==this.tag};e.prototype.toDOM=function(){return document.createElement(this.tag)};e.prototype.updateDOM=function(t){return t.nodeName.toLowerCase()==this.tag};return e}(Bn);var Qn=[];var Zn=dt.define();var tr=dt.define();var er=dt.define();var nr=dt.define();var rr=dt.define();var ir=dt.define();function or(t,e,n){var r=t.facet(nr);if(r.length)r[0](e);else if(window.onerror)window.onerror(String(e),n,undefined,undefined,e);else if(n)console.error(n+":",e);else console.error(e)}var ar=dt.define({combine:function(t){return t.length?t[0]:true}});var sr=function(){function t(t,e){this.field=t;this.get=e}return t}();var ur=function(){function t(){}t.prototype.from=function(t){return new sr(this,t)};t.define=function(){return new t};return t}();ur.decorations=ur.define();ur.atomicRanges=ur.define();ur.scrollMargins=ur.define();var cr=0;var lr=dt.define();var fr=function(){function t(t,e,n){this.id=t;this.create=e;this.fields=n;this.extension=lr.of(this)}t.define=function(e,n){var r=n||{},i=r.eventHandlers,o=r.provide,a=r.decorations;var s=[];if(o)for(var u=0,c=Array.isArray(o)?o:[o];u<c.length;u++){var l=c[u];s.push(l)}if(i)s.push(hr.from((function(t){return{plugin:t,handlers:i}})));if(a)s.push(ur.decorations.from(a));return new t(cr++,e,s)};t.fromClass=function(e,n){return t.define((function(t){return new e(t)}),n)};return t}();var hr=ur.define();var dr=function(){function t(t){this.spec=t;this.mustUpdate=null;this.value=null}t.prototype.takeField=function(t,e){for(var n=0,r=this.spec.fields;n<r.length;n++){var i=r[n],o=i.field,a=i.get;if(o==t)e.push(a(this.value))}};t.prototype.update=function(e){if(!this.value){try{this.value=this.spec.create(e)}catch(r){or(e.state,r,"CodeMirror plugin crashed");return t.dummy}}else if(this.mustUpdate){var n=this.mustUpdate;this.mustUpdate=null;if(!this.value.update)return this;try{this.value.update(n)}catch(r){or(n.state,r,"CodeMirror plugin crashed");if(this.value.destroy)try{this.value.destroy()}catch(ev){}return t.dummy}}return this};t.prototype.destroy=function(t){var e;if((e=this.value)===null||e===void 0?void 0:e.destroy){try{this.value.destroy()}catch(n){or(t.state,n,"CodeMirror plugin crashed")}}};return t}();dr.dummy=new dr(fr.define((function(){return{}})));var pr=dt.define({combine:function(t){return t.reduce((function(t,e){return Ln(e,t)}),{})}});var vr=dt.define({combine:function(t){return t.reduce((function(t,e){return Ln(e,t)}),{})}});var mr=dt.define();var gr=dt.define();var yr=function(){function t(t,e,n,r){this.fromA=t;this.toA=e;this.fromB=n;this.toB=r}t.prototype.join=function(e){return new t(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))};t.prototype.addToSet=function(t){var e=t.length,n=this;for(;e>0;e--){var r=t[e-1];if(r.fromA>n.toA)continue;if(r.toA<n.fromA)break;n=n.join(r);t.splice(e-1,1)}t.splice(e,0,n);return t};t.extendWithRanges=function(e,n){if(n.length==0)return e;var r=[];for(var i=0,o=0,a=0,s=0;;i++){var u=i==e.length?null:e[i],c=a-s;var l=u?u.fromB:1e9;while(o<n.length&&n[o]<l){var f=n[o],h=n[o+1];var d=Math.max(s,f),p=Math.min(l,h);if(d<=p)new t(d+c,p+c,d,p).addToSet(r);if(h>l)break;else o+=2}if(!u)return r;new t(u.fromA,u.toA,u.fromB,u.toB).addToSet(r);a=u.toA;s=u.toB}};return t}();var br=function(){function t(t,e,n){if(n===void 0){n=Qn}this.view=t;this.state=e;this.transactions=n;this.flags=0;this.startState=t.state;this.changes=et.empty(this.startState.doc.length);for(var r=0,i=n;r<i.length;r++){var o=i[r];this.changes=this.changes.compose(o.changes)}var a=[];this.changes.iterChangedRanges((function(t,e,n,r){return a.push(new yr(t,e,n,r))}));this.changedRanges=a;var s=t.hasFocus;if(s!=t.inputState.notifiedFocused){t.inputState.notifiedFocused=s;this.flags|=1}if(this.docChanged)this.flags|=2}Object.defineProperty(t.prototype,"viewportChanged",{get:function(){return(this.flags&4)>0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"heightChanged",{get:function(){return(this.flags&2)>0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"geometryChanged",{get:function(){return this.docChanged||(this.flags&(16|2))>0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"focusChanged",{get:function(){return(this.flags&1)>0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"docChanged",{get:function(){return this.transactions.some((function(t){return t.docChanged}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"selectionSet",{get:function(){return this.transactions.some((function(t){return t.selection}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"empty",{get:function(){return this.flags==0&&this.transactions.length==0},enumerable:false,configurable:true});return t}();var wr=function(t){__extends(e,t);function e(e){var n=t.call(this)||this;n.view=e;n.compositionDeco=qn.none;n.decorations=[];n.minWidth=0;n.minWidthFrom=0;n.minWidthTo=0;n.impreciseAnchor=null;n.impreciseHead=null;n.setDOM(e.contentDOM);n.children=[new Gn];n.children[0].setParent(n);n.updateInner([new yr(0,0,0,e.state.doc.length)],n.updateDeco(),0);return n}Object.defineProperty(e.prototype,"root",{get:function(){return this.view.root},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"editorView",{get:function(){return this.view},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"length",{get:function(){return this.view.state.doc.length},enumerable:false,configurable:true});e.prototype.update=function(t){var e=this;var n=t.changedRanges;if(this.minWidth>0&&n.length){if(!n.every((function(t){var n=t.fromA,r=t.toA;return r<e.minWidthFrom||n>e.minWidthTo}))){this.minWidth=0}else{this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1);this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)}}if(this.view.inputState.composing<0)this.compositionDeco=qn.none;else if(t.transactions.length)this.compositionDeco=Sr(this.view,t.changes);var r=(xn.ie||xn.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines;var i=this.decorations,o=this.updateDeco();var a=Ir(i,o,t.changes);n=yr.extendWithRanges(n,a);var s=t.transactions.some((function(t){return t.annotation(Ut.userEvent)=="pointerselection"}));if(this.dirty==0&&n.length==0&&!(t.flags&(4|8))&&t.state.selection.main.from>=this.view.viewport.from&&t.state.selection.main.to<=this.view.viewport.to){this.updateSelection(r,s);return false}else{this.updateInner(n,o,t.startState.doc.length,r,s);return true}};e.prototype.updateInner=function(t,e,n,r,i){var o=this;if(r===void 0){r=false}if(i===void 0){i=false}this.updateChildren(t,e,n);var a=this.view.observer;a.ignore((function(){o.dom.style.height=o.view.viewState.domHeight+"px";o.dom.style.minWidth=o.minWidth?o.minWidth+"px":"";var t=xn.chrome||xn.ios?{node:a.selectionRange.focusNode,written:false}:undefined;o.sync(t);o.dirty=0;if(t&&(t.written||a.selectionRange.focusNode!=t.node))r=true;o.updateSelection(r,i);o.dom.style.height=""}))};e.prototype.updateChildren=function(t,e,n){var r=this.childCursor(n);for(var i=t.length-1;;i--){var o=i>=0?t[i]:null;if(!o)break;var a=o.fromA,s=o.toA,u=o.fromB,c=o.toB;var l=Xn.build(this.view.state.doc,u,c,e),f=l.content,h=l.breakAtStart,d=l.openStart,p=l.openEnd;var v=r.findPos(s,1),m=v.i,g=v.off;var y=r.findPos(a,-1),b=y.i,w=y.off;this.replaceRange(b,w,m,g,f,h,d,p)}};e.prototype.replaceRange=function(t,e,n,r,i,o,a,s){var u=this.children[t],c=i.length?i[i.length-1]:null;var l=c?c.breakAfter:o;if(t==n&&!o&&!l&&i.length<2&&u.merge(e,r,i.length?c:null,e==0,a,s))return;var f=this.children[n];if(r<f.length||f.children.length&&f.children[f.children.length-1].length==0){if(t==n){f=f.split(r);r=0}if(!l&&c&&f.merge(0,r,c,true,0,s)){i[i.length-1]=f}else{if(r||f.children.length&&f.children[0].length==0)f.merge(0,r,null,false,0,s);i.push(f)}}else if(f.breakAfter){if(c)c.breakAfter=1;else o=1}n++;u.breakAfter=o;if(e>0){if(!o&&i.length&&u.merge(e,u.length,i[0],false,a,0)){u.breakAfter=i.shift().breakAfter}else if(e<u.length||u.children.length&&u.children[u.children.length-1].length==0){u.merge(e,u.length,null,false,a,0)}t++}while(t<n&&i.length){if(this.children[n-1].match(i[i.length-1]))n--,i.pop();else if(this.children[t].match(i[0]))t++,i.shift();else break}if(t<n||i.length)this.replaceChildren(t,n,i)};e.prototype.updateSelection=function(t,e){var n=this;if(t===void 0){t=false}if(e===void 0){e=false}if(!(e||this.mayControlSelection())||xn.ios&&this.view.inputState.rapidCompositionStart)return;var r=this.view.state.selection.main;var i=this.domAtPos(r.anchor);var o=r.empty?i:this.domAtPos(r.head);if(xn.gecko&&r.empty&&xr(i)){var a=document.createTextNode("");this.view.observer.ignore((function(){return i.node.insertBefore(a,i.node.childNodes[i.offset]||null)}));i=o=new rn(a,0);t=true}var s=this.view.observer.selectionRange;if(t||!s.focusNode||!Fe(i.node,i.offset,s.anchorNode,s.anchorOffset)||!Fe(o.node,o.offset,s.focusNode,s.focusOffset)){this.view.observer.ignore((function(){var t;var e=_e(n.root);if(r.empty){if(xn.gecko){var a=Cr(i.node,i.offset);if(a&&a!=(1|2)){var u=Mr(i.node,i.offset,a==1?1:-1);if(u)i=new rn(u,a==1?0:u.nodeValue.length)}}e.collapse(i.node,i.offset);if(r.bidiLevel!=null&&s.cursorBidiLevel!=null)s.cursorBidiLevel=r.bidiLevel}else if(e.extend){e.collapse(i.node,i.offset);e.extend(o.node,o.offset)}else{var c=document.createRange();if(r.anchor>r.head)t=[o,i],i=t[0],o=t[1];c.setEnd(o.node,o.offset);c.setStart(i.node,i.offset);e.removeAllRanges();e.addRange(c)}}));this.view.observer.setSelectionRange(i,o)}this.impreciseAnchor=i.precise?null:new rn(s.anchorNode,s.anchorOffset);this.impreciseHead=o.precise?null:new rn(s.focusNode,s.focusOffset)};e.prototype.enforceCursorAssoc=function(){if(this.view.composing)return;var t=this.view.state.selection.main;var e=_e(this.root);if(!t.empty||!t.assoc||!e.modify)return;var n=Gn.find(this,t.head);if(!n)return;var r=n.posAtStart;if(t.head==r||t.head==r+n.length)return;var i=this.coordsAt(t.head,-1),o=this.coordsAt(t.head,1);if(!i||!o||i.bottom>o.top)return;var a=this.domAtPos(t.head+t.assoc);e.collapse(a.node,a.offset);e.modify("move",t.assoc<0?"forward":"backward","lineboundary")};e.prototype.mayControlSelection=function(){return this.view.state.facet(ar)?this.root.activeElement==this.dom:qe(this.dom,this.view.observer.selectionRange)};e.prototype.nearest=function(t){for(var e=t;e;){var n=an.get(e);if(n&&n.rootView==this)return n;e=e.parentNode}return null};e.prototype.posFromDOM=function(t,e){var n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart};e.prototype.domAtPos=function(t){var e=this.childCursor().findPos(t,-1),n=e.i,r=e.off;for(;n<this.children.length-1;){var i=this.children[n];if(r<i.length||i instanceof Gn)break;n++;r=0}return this.children[n].domAtPos(r)};e.prototype.coordsAt=function(t,e){for(var n=this.length,r=this.children.length-1;;r--){var i=this.children[r],o=n-i.breakAfter-i.length;if(t>o||t==o&&i.type!=jn.WidgetBefore&&i.type!=jn.WidgetAfter&&(!r||e==2||this.children[r-1].breakAfter||this.children[r-1].type==jn.WidgetBefore&&e>-2))return i.coordsAt(t-o,e);n=o}};e.prototype.measureVisibleLineHeights=function(){var t=[],e=this.view.viewState.viewport,n=e.from,r=e.to;var i=Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1;for(var o=0,a=0;a<this.children.length;a++){var s=this.children[a],u=o+s.length;if(u>r)break;if(o>=n){t.push(s.dom.getBoundingClientRect().height);var c=s.dom.scrollWidth;if(c>i){this.minWidth=i=c;this.minWidthFrom=o;this.minWidthTo=u}}o=u+s.breakAfter}return t};e.prototype.measureTextSize=function(){var t=this;for(var e=0,n=this.children;e<n.length;e++){var r=n[e];if(r instanceof Gn){var i=r.measureTextSize();if(i)return i}}var o=document.createElement("div"),a,s;o.className="cm-line";o.textContent="abc def ghi jkl mno pqr stu";this.view.observer.ignore((function(){t.dom.appendChild(o);var e=Ue(o.firstChild)[0];a=o.getBoundingClientRect().height;s=e?e.width/27:7;o.remove()}));return{lineHeight:a,charWidth:s}};e.prototype.childCursor=function(t){if(t===void 0){t=this.length}var e=this.children.length;if(e)t-=this.children[--e].length;return new cn(this.children,t,e)};e.prototype.computeBlockGapDeco=function(){var t=[],e=this.view.viewState;for(var n=0,r=0;;r++){var i=r==e.viewports.length?null:e.viewports[r];var o=i?i.from-1:this.length;if(o>n){var a=e.lineAt(o,0).bottom-e.lineAt(n,0).top;t.push(qn.replace({widget:new kr(a),block:true,inclusive:true}).range(n,o))}if(!i)break;n=i.to+1}return qn.set(t)};e.prototype.updateDeco=function(){return this.decorations=__spreadArray(__spreadArray(__spreadArray([],this.view.pluginField(ur.decorations)),this.view.state.facet(mr)),[this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco])};e.prototype.scrollPosIntoView=function(t,e){var n=this.coordsAt(t,e);if(!n)return;var r=0,i=0,o=0,a=0;for(var s=0,u=this.view.pluginField(ur.scrollMargins);s<u.length;s++){var c=u[s];if(c){var l=c.left,f=c.right,h=c.top,d=c.bottom;if(l!=null)r=Math.max(r,l);if(f!=null)i=Math.max(i,f);if(h!=null)o=Math.max(o,h);if(d!=null)a=Math.max(a,d)}}Xe(this.dom,{left:n.left-r,top:n.top-o,right:n.right+i,bottom:n.bottom+a})};return e}(an);function xr(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}var kr=function(t){__extends(e,t);function e(e){var n=t.call(this)||this;n.height=e;return n}e.prototype.toDOM=function(){var t=document.createElement("div");this.updateDOM(t);return t};e.prototype.eq=function(t){return t.height==this.height};e.prototype.updateDOM=function(t){t.style.height=this.height+"px";return true};Object.defineProperty(e.prototype,"estimatedHeight",{get:function(){return this.height},enumerable:false,configurable:true});return e}(Bn);function Sr(t,e){var n=t.observer.selectionRange;var r=n.focusNode&&Mr(n.focusNode,n.focusOffset,0);if(!r)return qn.none;var i=t.docView.nearest(r);var o,a,s=r;if(i instanceof Sn){while(i.parent instanceof Sn)i=i.parent;o=i.posAtStart;a=o+i.length;s=i.dom}else if(i instanceof Gn){while(s.parentNode!=i.dom)s=s.parentNode;var u=s.previousSibling;while(u&&!an.get(u))u=u.previousSibling;o=a=u?an.get(u).posAtEnd:i.posAtStart}else{return qn.none}var c=e.mapPos(o,1),l=Math.max(c,e.mapPos(a,-1));var f=r.nodeValue,h=t.state;if(l-c<f.length){if(h.sliceDoc(c,Math.min(h.doc.length,c+f.length))==f)l=c+f.length;else if(h.sliceDoc(Math.max(0,l-f.length),l)==f)c=l-f.length;else return qn.none}else if(h.sliceDoc(c,l)!=f){return qn.none}return qn.set(qn.replace({widget:new Ar(s,r)}).range(c,l))}var Ar=function(t){__extends(e,t);function e(e,n){var r=t.call(this)||this;r.top=e;r.text=n;return r}e.prototype.eq=function(t){return this.top==t.top&&this.text==t.text};e.prototype.toDOM=function(){return this.top};e.prototype.ignoreEvent=function(){return false};Object.defineProperty(e.prototype,"customView",{get:function(){return Rn},enumerable:false,configurable:true});return e}(Bn);function Mr(t,e,n){for(;;){if(t.nodeType==3)return t;if(t.nodeType==1&&e>0&&n<=0){t=t.childNodes[e-1];e=He(t)}else if(t.nodeType==1&&e<t.childNodes.length&&n>=0){t=t.childNodes[e];e=0}else{return null}}}function Cr(t,e){if(t.nodeType!=1)return 0;return(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}var Or=function(){function t(){this.changes=[]}t.prototype.compareRange=function(t,e){Kn(t,e,this.changes)};t.prototype.comparePoint=function(t,e){Kn(t,e,this.changes)};return t}();function Ir(t,e,n){var r=new Or;pe.compare(t,e,n,r);return r.changes}var Rr=function(t){t[t["LTR"]=0]="LTR";t[t["RTL"]=1]="RTL";return t}(Rr||(Rr={}));var Er=Rr.LTR,Pr=Rr.RTL;function Dr(t){var e=[];for(var n=0;n<t.length;n++)e.push(1<<+t[n]);return e}var Tr=Dr("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008");var Wr=Dr("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333");var Lr=Object.create(null),Nr=[];for(var _r=0,Br=["()","[]","{}"];_r<Br.length;_r++){var jr=Br[_r];var qr=jr.charCodeAt(0),Ur=jr.charCodeAt(1);Lr[qr]=Ur;Lr[Ur]=-qr}function Fr(t){return t<=247?Tr[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Wr[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:t==8204?256:1}var zr=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var Vr=function(){function t(t,e,n){this.from=t;this.to=e;this.level=n}Object.defineProperty(t.prototype,"dir",{get:function(){return this.level%2?Pr:Er},enumerable:false,configurable:true});t.prototype.side=function(t,e){return this.dir==e==t?this.to:this.from};t.find=function(t,e,n,r){var i=-1;for(var o=0;o<t.length;o++){var a=t[o];if(a.from<=e&&a.to>=e){if(a.level==n)return o;if(i<0||(r!=0?r<0?a.from<e:a.to>e:t[i].level>a.level))i=o}}if(i<0)throw new RangeError("Index out of range");return i};return t}();var Hr=[];function Kr(t,e){var n=t.length,r=e==Er?1:2,i=e==Er?2:1;if(!t||r==1&&!zr.test(t))return Gr(n);for(var o=0,a=r,s=r;o<n;o++){var u=Fr(t.charCodeAt(o));if(u==512)u=a;else if(u==8&&s==4)u=16;Hr[o]=u==4?2:u;if(u&7)s=u;a=u}for(var c=0,a=r,s=r;c<n;c++){var u=Hr[c];if(u==128){if(c<n-1&&a==Hr[c+1]&&a&24)u=Hr[c]=a;else Hr[c]=256}else if(u==64){var l=c+1;while(l<n&&Hr[l]==64)l++;var f=c&&a==8||l<n&&Hr[l]==8?s==1?1:8:256;for(var h=c;h<l;h++)Hr[h]=f;c=l-1}else if(u==8&&s==1){Hr[c]=1}a=u;if(u&7)s=u}for(var d=0,p=0,v=0,m=void 0,g=void 0,u=void 0;d<n;d++){if(g=Lr[m=t.charCodeAt(d)]){if(g<0){for(var y=p-3;y>=0;y-=3){if(Nr[y+1]==-g){var b=Nr[y+2];var w=b&2?r:!(b&4)?0:b&1?i:r;if(w)Hr[d]=Hr[Nr[y]]=w;p=y;break}}}else if(Nr.length==189){break}else{Nr[p++]=d;Nr[p++]=m;Nr[p++]=v}}else if((u=Hr[d])==2||u==1){var x=u==r;v=x?0:1;for(var y=p-3;y>=0;y-=3){var k=Nr[y+2];if(k&2)break;if(x){Nr[y+2]|=2}else{if(k&4)break;Nr[y+2]|=4}}}}for(var S=0;S<n;S++){if(Hr[S]==256){var l=S+1;while(l<n&&Hr[l]==256)l++;var A=(S?Hr[S-1]:r)==1;var M=(l<n?Hr[l]:r)==1;var f=A==M?A?1:2:r;for(var h=S;h<l;h++)Hr[h]=f;S=l-1}}var C=[];if(r==1){for(var O=0;O<n;){var I=O,R=Hr[O++]!=1;while(O<n&&R==(Hr[O]!=1))O++;if(R){for(var h=O;h>I;){var l=h,E=Hr[--h]!=2;while(h>I&&E==(Hr[h-1]!=2))h--;C.push(new Vr(h,l,E?2:1))}}else{C.push(new Vr(I,O,0))}}}else{for(var P=0;P<n;){var I=P,R=Hr[P++]==2;while(P<n&&R==(Hr[P]==2))P++;C.push(new Vr(I,P,R?1:2))}}return C}function Gr(t){return[new Vr(0,t,0)]}var Jr="";function $r(t,e,n,r,i){var o;var a=r.head-t.from,s=-1;if(a==0){if(!i||!t.length)return null;if(e[0].level!=n){a=e[0].side(false,n);s=0}}else if(a==t.length){if(i)return null;var u=e[e.length-1];if(u.level!=n){a=u.side(true,n);s=e.length-1}}if(s<0)s=Vr.find(e,a,(o=r.bidiLevel)!==null&&o!==void 0?o:-1,r.assoc);var c=e[s];if(a==c.side(i,n)){c=e[s+=i?1:-1];a=c.side(!i,n)}var l=i==(c.dir==n);var f=T(t.text,a,l);Jr=t.text.slice(Math.min(a,f),Math.max(a,f));if(f!=c.side(i,n))return ct.cursor(f+t.from,l?-1:1,c.level);var h=s==(i?e.length-1:0)?null:e[s+(i?1:-1)];if(!h&&c.level!=n)return ct.cursor(i?t.to:t.from,i?-1:1,n);if(h&&h.level<c.level)return ct.cursor(h.side(!i,n)+t.from,i?1:-1,h.level);return ct.cursor(f+t.from,i?-1:1,c.level)}function Xr(t,e,n){if(n===void 0){n=1}var r=t.charCategorizer(e);var i=t.doc.lineAt(e),o=e-i.from;if(i.length==0)return ct.cursor(e);if(o==0)n=1;else if(o==i.length)n=-1;var a=o,s=o;if(n<0)a=T(i.text,o,false);else s=T(i.text,o);var u=r(i.text.slice(a,s));while(a>0){var c=T(i.text,a,false);if(r(i.text.slice(c,a))!=u)break;a=c}while(s<i.length){var l=T(i.text,s);if(r(i.text.slice(s,l))!=u)break;s=l}return ct.range(a+i.from,s+i.from)}function Yr(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Qr(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Zr(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function ti(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function ei(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function ni(t,e,n){var r,i,o,a;var s,u,c,l;for(var f=t.firstChild;f;f=f.nextSibling){var h=Ue(f);for(var d=0;d<h.length;d++){var p=h[d];if(i&&Zr(i,p))p=ti(ei(p,i.bottom),i.top);var v=Yr(e,p),m=Qr(n,p);if(v==0&&m==0)return f.nodeType==3?ri(f,e,n):ni(f,e,n);if(!r||a>m||a==m&&o>v){r=f;i=p;o=v;a=m}if(v==0){if(n>p.bottom&&(!c||c.bottom<p.bottom)){s=f;c=p}else if(n<p.top&&(!l||l.top>p.top)){u=f;l=p}}else if(c&&Zr(c,p)){c=ei(c,p.bottom)}else if(l&&Zr(l,p)){l=ti(l,p.top)}}}if(c&&c.bottom>=n){r=s;i=c}else if(l&&l.top<=n){r=u;i=l}if(!r)return{node:t,offset:0};var g=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return ri(r,g,n);if(!o&&r.contentEditable=="true")return ni(r,g,n);var y=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:y}}function ri(t,e,n){var r=t.nodeValue.length;var i=-1,o=1e9,a=0;for(var s=0;s<r;s++){var u=en(t,s,s+1).getClientRects();for(var c=0;c<u.length;c++){var l=u[c];if(l.top==l.bottom)continue;if(!a)a=e-l.left;var f=(l.top>n?l.top-n:n-l.bottom)-1;if(l.left-1<=e&&l.right+1>=e&&f<o){var h=e>=(l.left+l.right)/2,d=h;if(xn.chrome||xn.gecko){var p=en(t,s).getBoundingClientRect();if(p.left==l.right)d=!h}if(f<=0)return{node:t,offset:s+(d?1:0)};i=s+(d?1:0);o=f}}}return{node:t,offset:i>-1?i:a>0?t.nodeValue.length:0}}function ii(t,e,n){var r;var i=e.x,o=e.y;if(n===void 0){n=-1}var a=t.contentDOM.getBoundingClientRect(),s;var u=t.defaultLineHeight/2;for(var c=false;;){s=t.blockAtHeight(o,a.top);if(s.top>o||s.bottom<o){n=s.top>o?-1:1;o=Math.min(s.bottom-u,Math.max(s.top+u,o));if(c)return null;else c=true}if(s.type==jn.Text)break;o=n>0?s.bottom+u:s.top-u}var l=s.from;if(l<t.viewport.from)return t.viewport.from==0?0:null;if(l>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:null;i=Math.max(a.left+1,Math.min(a.right-1,i));var f=t.root,h=f.elementFromPoint(i,o);var d,p=-1;if(h&&t.contentDOM.contains(h)&&!(t.docView.nearest(h)instanceof In)){if(f.caretPositionFromPoint){var v=f.caretPositionFromPoint(i,o);if(v)d=v.offsetNode,p=v.offset}else if(f.caretRangeFromPoint){var m=f.caretRangeFromPoint(i,o);if(m){d=m.startContainer,p=m.startOffset;if(xn.safari&&oi(d,p,i))d=undefined}}}if(!d||!t.docView.dom.contains(d)){var g=Gn.find(t.docView,l);r=ni(g.dom,i,o),d=r.node,p=r.offset}return t.docView.posFromDOM(d,p)}function oi(t,e,n){var r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return false;for(var i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return false;return en(t,r-1,r).getBoundingClientRect().left>n}function ai(t,e,n,r){var i=t.state.doc.lineAt(e.head);var o=!r||!t.lineWrapping?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){var a=t.dom.getBoundingClientRect();var s=t.posAtCoords({x:n==(t.textDirection==Rr.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(s!=null)return ct.cursor(s,n?-1:1)}var u=Gn.find(t.docView,e.head);var c=u?n?u.posAtEnd:u.posAtStart:n?i.to:i.from;return ct.cursor(c,n?-1:1)}function si(t,e,n,r){var i=t.state.doc.lineAt(e.head),o=t.bidiSpans(i);for(var a=e,s=null;;){var u=$r(i,o,t.textDirection,a,n),c=Jr;if(!u){if(i.number==(n?t.state.doc.lines:1))return a;c="\n";i=t.state.doc.line(i.number+(n?1:-1));o=t.bidiSpans(i);u=ct.cursor(n?i.from:i.to)}if(!s){if(!r)return u;s=r(c)}else if(!s(c)){return a}a=u}}function ui(t,e,n){var r=t.state.charCategorizer(e);var i=r(n);return function(t){var e=r(t);if(i==Xt.Space)i=e;return i==e}}function ci(t,e,n,r){var i;var o=e.head,a=n?1:-1;if(o==(n?t.state.doc.length:0))return ct.cursor(o);var s=t.coordsAtPos(o);if(s){var u=t.dom.getBoundingClientRect();var c=(i=e.goalColumn)!==null&&i!==void 0?i:s.left-u.left;var l=u.left+c;var f=r!==null&&r!==void 0?r:t.defaultLineHeight>>1;for(var h=a<0?s.top:s.bottom,d=0;d<50;d+=10){var p=ii(t,{x:l,y:h+(f+d)*a},a);if(p==null)break;if(p!=o)return ct.cursor(p,undefined,undefined,c)}}var v=t.state.doc,m=v.lineAt(o),g=t.state.tabSize;var y=e.goalColumn,b=0;if(y==null){for(var w=v.iterRange(m.from,o);!w.next().done;)b=U(w.value,b,g);y=b*t.defaultCharacterWidth}else{b=Math.round(y/t.defaultCharacterWidth)}if(a<0&&m.from==0)return ct.cursor(0);else if(a>0&&m.to==v.length)return ct.cursor(m.to);var x=v.line(m.number+a);var k=x.from;var S=0;for(var w=v.iterRange(x.from,x.to);S>=b&&!w.next().done;){var A=F(w.value,S,b,g),M=A.offset,C=A.leftOver;S=b-C;k+=M}return ct.cursor(k,undefined,undefined,y)}function li(t,e,n){var r=t.pluginField(ur.atomicRanges);var i=function(){var t=false;for(var i=0,o=r;i<o.length;i++){var a=o[i];a.between(n.from-1,n.from+1,(function(r,i,o){if(n.from>r&&n.from<i){n=e.from>n.from?ct.cursor(r,1):ct.cursor(i,-1);t=true}}))}if(!t)return{value:n}};for(;;){var o=i();if(typeof o==="object")return o.value}}var fi=function(){function t(t){var e=this;this.lastKeyCode=0;this.lastKeyTime=0;this.pendingIOSKey=null;this.lastSelectionOrigin=null;this.lastSelectionTime=0;this.lastEscPress=0;this.lastContextMenu=0;this.scrollHandlers=[];this.registeredEvents=[];this.customHandlers=[];this.composing=-1;this.compositionEndedAt=0;this.rapidCompositionStart=false;this.mouseSelection=null;var n=function(n){var i=yi[n];t.contentDOM.addEventListener(n,(function(r){if(n=="keydown"&&e.keydown(t,r))return;if(!gi(t,r)||e.ignoreDuringComposition(r))return;if(e.mustFlushObserver(r))t.observer.forceFlush();if(e.runCustomHandlers(n,t,r))r.preventDefault();else i(t,r)}));r.registeredEvents.push(n)};var r=this;for(var i in yi){n(i)}this.notifiedFocused=t.hasFocus;this.ensureHandlers(t);if(xn.safari)t.contentDOM.addEventListener("input",(function(){return null}))}t.prototype.setSelectionOrigin=function(t){this.lastSelectionOrigin=t;this.lastSelectionTime=Date.now()};t.prototype.ensureHandlers=function(t){var e=this;var n=this.customHandlers=t.pluginField(hr);for(var r=0,i=n;r<i.length;r++){var o=i[r];var a=function(n){if(s.registeredEvents.indexOf(n)<0&&n!="scroll"){s.registeredEvents.push(n);t.contentDOM.addEventListener(n,(function(r){if(!gi(t,r))return;if(e.runCustomHandlers(n,t,r))r.preventDefault()}))}};var s=this;for(var u in o.handlers){a(u)}}};t.prototype.runCustomHandlers=function(t,e,n){for(var r=0,i=this.customHandlers;r<i.length;r++){var o=i[r];var a=o.handlers[t],s=false;if(a){try{s=a.call(o.plugin,n,e)}catch(u){or(e.state,u)}if(s||n.defaultPrevented){if(xn.android&&t=="keydown"&&n.keyCode==13)e.observer.flushSoon();return true}}}return false};t.prototype.runScrollHandlers=function(t,e){for(var n=0,r=this.customHandlers;n<r.length;n++){var i=r[n];var o=i.handlers.scroll;if(o){try{o.call(i.plugin,e,t)}catch(a){or(t.state,a)}}}};t.prototype.keydown=function(t,e){var n=this;this.lastKeyCode=e.keyCode;this.lastKeyTime=Date.now();if(this.screenKeyEvent(t,e))return true;if(xn.ios&&(e.keyCode==13||e.keyCode==8)&&!(e.ctrlKey||e.altKey||e.metaKey)&&!e.synthetic){this.pendingIOSKey=e.keyCode==13?"enter":"backspace";setTimeout((function(){return n.flushIOSKey(t)}),250);return true}return false};t.prototype.flushIOSKey=function(t){if(!this.pendingIOSKey)return false;var e=t.contentDOM,n=this.pendingIOSKey;this.pendingIOSKey=null;return n=="enter"?nn(e,"Enter",13):nn(e,"Backspace",8)};t.prototype.ignoreDuringComposition=function(t){if(!/^key/.test(t.type))return false;if(this.composing>0)return true;if(xn.safari&&Date.now()-this.compositionEndedAt<500){this.compositionEndedAt=0;return true}return false};t.prototype.screenKeyEvent=function(t,e){var n=e.keyCode==9&&Date.now()<this.lastEscPress+2e3;if(e.keyCode==27)this.lastEscPress=Date.now();else if(hi.indexOf(e.keyCode)<0)this.lastEscPress=0;return n};t.prototype.mustFlushObserver=function(t){return t.type=="keydown"&&t.keyCode!=229||t.type=="compositionend"&&!xn.ios};t.prototype.startMouseSelection=function(t,e,n){if(this.mouseSelection)this.mouseSelection.destroy();this.mouseSelection=new di(this,t,e,n)};t.prototype.update=function(t){if(this.mouseSelection)this.mouseSelection.update(t);if(t.transactions.length)this.lastKeyCode=this.lastSelectionTime=0};t.prototype.destroy=function(){if(this.mouseSelection)this.mouseSelection.destroy()};return t}();var hi=[16,17,18,20,91,92,224,225];var di=function(){function t(t,e,n,r){this.inputState=t;this.view=e;this.style=r;this.lastEvent=n;var i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this));i.addEventListener("mouseup",this.up=this.up.bind(this));this.extend=n.shiftKey;this.multiple=e.state.facet(ee.allowMultipleSelections)&&pi(e,n);this.dragMove=vi(e,n);this.dragging=mi(e,n)?null:false;if(this.dragging===false){n.preventDefault();this.select(n)}}t.prototype.move=function(t){if(t.buttons==0)return this.destroy();if(this.dragging!==false)return;this.select(this.lastEvent=t)};t.prototype.up=function(t){if(this.dragging==null)this.select(this.lastEvent);if(!this.dragging)t.preventDefault();this.destroy()};t.prototype.destroy=function(){var t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move);t.removeEventListener("mouseup",this.up);this.inputState.mouseSelection=null};t.prototype.select=function(t){var e=this.style.get(t,this.extend,this.multiple);if(!e.eq(this.view.state.selection)||e.main.assoc!=this.view.state.selection.main.assoc)this.view.dispatch({selection:e,annotations:Ut.userEvent.of("pointerselection"),scrollIntoView:true})};t.prototype.update=function(t){var e=this;if(t.docChanged&&this.dragging)this.dragging=this.dragging.map(t.changes);if(this.style.update(t))setTimeout((function(){return e.select(e.lastEvent)}),20)};return t}();function pi(t,e){var n=t.state.facet(Zn);return n.length?n[0](e):xn.mac?e.metaKey:e.ctrlKey}function vi(t,e){var n=t.state.facet(tr);return n.length?n[0](e):xn.mac?!e.altKey:!e.ctrlKey}function mi(t,e){var n=t.state.selection.main;if(n.empty)return false;var r=_e(t.root);if(r.rangeCount==0)return true;var i=r.getRangeAt(0).getClientRects();for(var o=0;o<i.length;o++){var a=i[o];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return true}return false}function gi(t,e){if(!e.bubbles)return true;if(e.defaultPrevented)return false;for(var n=e.target,r=void 0;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=an.get(n))&&r.ignoreEvent(e))return false;return true}var yi=Object.create(null);var bi=xn.ie&&xn.ie_version<15||xn.ios&&xn.webkit_version<604;function wi(t){var e=t.dom.parentNode;if(!e)return;var n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px";n.focus();setTimeout((function(){t.focus();n.remove();xi(t,n.value)}),50)}function xi(t,e){var n=t.state,r,i=1,o=n.toText(e);var a=o.lines==n.selection.ranges.length;var s=_i&&n.selection.ranges.every((function(t){return t.empty}))&&_i==o.toString();if(s){var u=-1;r=n.changeByRange((function(t){var r=n.doc.lineAt(t.from);if(r.from==u)return{range:t};u=r.from;var s=n.toText((a?o.line(i++).text:e)+n.lineBreak);return{changes:{from:r.from,insert:s},range:ct.cursor(t.from+s.length)}}))}else if(a){r=n.changeByRange((function(t){var e=o.line(i++);return{changes:{from:t.from,to:t.to,insert:e.text},range:ct.cursor(t.from+e.length)}}))}else{r=n.replaceSelection(o)}t.dispatch(r,{annotations:Ut.userEvent.of("paste"),scrollIntoView:true})}yi.keydown=function(t,e){t.inputState.setSelectionOrigin("keyboardselection")};var ki=0;yi.touchstart=function(t,e){ki=Date.now();t.inputState.setSelectionOrigin("pointerselection")};yi.touchmove=function(t){t.inputState.setSelectionOrigin("pointerselection")};yi.mousedown=function(t,e){t.observer.flush();if(ki>Date.now()-2e3)return;var n=null;for(var r=0,i=t.state.facet(er);r<i.length;r++){var o=i[r];n=o(t,e);if(n)break}if(!n&&e.button==0)n=Ti(t,e);if(n){if(t.root.activeElement!=t.contentDOM)t.observer.ignore((function(){return Ze(t.contentDOM)}));t.inputState.startMouseSelection(t,e,n)}};function Si(t,e,n,r){if(r==1){return ct.cursor(e,n)}else if(r==2){return Xr(t.state,e,n)}else{var i=Gn.find(t.docView,e),o=t.state.doc.lineAt(i?i.posAtEnd:e);var a=i?i.posAtStart:o.from,s=i?i.posAtEnd:o.to;if(s<t.state.doc.length&&s==o.to)s++;return ct.range(a,s)}}var Ai=function(t,e){return t>=e.top&&t<=e.bottom};var Mi=function(t,e,n){return Ai(e,n)&&t>=n.left&&t<=n.right};function Ci(t,e,n,r){var i=Gn.find(t.docView,e);if(!i)return 1;var o=e-i.posAtStart;if(o==0)return 1;if(o==i.length)return-1;var a=i.coordsAt(o,-1);if(a&&Mi(n,r,a))return-1;var s=i.coordsAt(o,1);if(s&&Mi(n,r,s))return 1;return a&&Ai(r,a)?-1:1}function Oi(t,e){var n=t.posAtCoords({x:e.clientX,y:e.clientY});if(n==null)return null;return{pos:n,bias:Ci(t,n,e.clientX,e.clientY)}}var Ii=xn.ie&&xn.ie_version<=11;var Ri=null,Ei=0,Pi=0;function Di(t){if(!Ii)return t.detail;var e=Ri,n=Pi;Ri=t;Pi=Date.now();return Ei=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Ei+1)%3:1}function Ti(t,e){var n=Oi(t,e),r=Di(e);var i=t.state.selection;var o=n,a=e;return{update:function(t){if(t.changes){if(n)n.pos=t.changes.mapPos(n.pos);i=i.map(t.changes);a=null}},get:function(e,s,u){var c;if(a&&e.clientX==a.clientX&&e.clientY==a.clientY)c=o;else{c=o=Oi(t,e);a=e}if(!c||!n)return i;var l=Si(t,c.pos,c.bias,r);if(n.pos!=c.pos&&!s){var f=Si(t,n.pos,n.bias,r);var h=Math.min(f.from,l.from),d=Math.max(f.to,l.to);l=h<l.from?ct.range(h,d):ct.range(d,h)}if(s)return i.replaceRange(i.main.extend(l.from,l.to));else if(u)return i.addRange(l);else return ct.create([l])}}}yi.dragstart=function(t,e){var n=t.state.selection.main;var r=t.inputState.mouseSelection;if(r)r.dragging=n;if(e.dataTransfer){e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to));e.dataTransfer.effectAllowed="copyMove"}};function Wi(t,e,n,r){var i=t.posAtCoords({x:e.clientX,y:e.clientY});if(i==null||!n)return;e.preventDefault();var o=t.inputState.mouseSelection;var a=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null;var s={from:i,insert:n};var u=t.state.changes(a?[a,s]:s);t.focus();t.dispatch({changes:u,selection:{anchor:u.mapPos(i,-1),head:u.mapPos(i,1)},annotations:Ut.userEvent.of("drop")})}yi.drop=function(t,e){if(!e.dataTransfer||!t.state.facet(ar))return;var n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();var r=Array(n.length),i=0;var o=function(){if(++i==n.length)Wi(t,e,r.filter((function(t){return t!=null})).join(t.state.lineBreak),false)};var a=function(t){var e=new FileReader;e.onerror=o;e.onload=function(){if(!/[\x00-\x08\x0e-\x1f]{2}/.test(e.result))r[t]=e.result;o()};e.readAsText(n[t])};for(var s=0;s<n.length;s++){a(s)}}else{Wi(t,e,e.dataTransfer.getData("Text"),true)}};yi.paste=function(t,e){if(!t.state.facet(ar))return;t.observer.flush();var n=bi?null:e.clipboardData;var r=n&&n.getData("text/plain");if(r){xi(t,r);e.preventDefault()}else{wi(t)}};function Li(t,e){var n=t.dom.parentNode;if(!n)return;var r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px";r.value=e;r.focus();r.selectionEnd=e.length;r.selectionStart=0;setTimeout((function(){r.remove();t.focus()}),50)}function Ni(t){var e=[],n=[],r=false;for(var i=0,o=t.selection.ranges;i<o.length;i++){var a=o[i];if(!a.empty){e.push(t.sliceDoc(a.from,a.to));n.push(a)}}if(!e.length){var s=-1;for(var u=0,c=t.selection.ranges;u<c.length;u++){var l=c[u].from;var f=t.doc.lineAt(l);if(f.number>s){e.push(f.text);n.push({from:f.from,to:Math.min(t.doc.length,f.to+1)})}s=f.number}r=true}return{text:e.join(t.lineBreak),ranges:n,linewise:r}}var _i=null;yi.copy=yi.cut=function(t,e){var n=Ni(t.state),r=n.text,i=n.ranges,o=n.linewise;if(!r)return;_i=o?r:null;var a=bi?null:e.clipboardData;if(a){e.preventDefault();a.clearData();a.setData("text/plain",r)}else{Li(t,r)}if(e.type=="cut"&&t.state.facet(ar))t.dispatch({changes:i,scrollIntoView:true,annotations:Ut.userEvent.of("cut")})};yi.focus=yi.blur=function(t){setTimeout((function(){if(t.hasFocus!=t.inputState.notifiedFocused)t.update([])}),10)};yi.beforeprint=function(t){t.viewState.printing=true;t.requestMeasure();setTimeout((function(){t.viewState.printing=false;t.requestMeasure()}),2e3)};function Bi(t,e){if(t.docView.compositionDeco.size){t.inputState.rapidCompositionStart=e;try{t.update([])}finally{t.inputState.rapidCompositionStart=false}}}yi.compositionstart=yi.compositionupdate=function(t){if(t.inputState.composing<0){if(t.docView.compositionDeco.size){t.observer.flush();Bi(t,true)}t.inputState.composing=0}};yi.compositionend=function(t){t.inputState.composing=-1;t.inputState.compositionEndedAt=Date.now();setTimeout((function(){if(t.inputState.composing<0)Bi(t,false)}),50)};yi.contextmenu=function(t){t.inputState.lastContextMenu=Date.now()};var ji=["pre-wrap","normal","pre-line"];var qi=function(){function t(){this.doc=z.empty;this.lineWrapping=false;this.direction=Rr.LTR;this.heightSamples={};this.lineHeight=14;this.charWidth=7;this.lineLength=30;this.heightChanged=false}t.prototype.heightForGap=function(t,e){var n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;if(this.lineWrapping)n+=Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength);return this.lineHeight*n};t.prototype.heightForLine=function(t){if(!this.lineWrapping)return this.lineHeight;var e=1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5)));return e*this.lineHeight};t.prototype.setDoc=function(t){this.doc=t;return this};t.prototype.mustRefresh=function(t,e,n){var r=false;for(var i=0;i<t.length;i++){var o=t[i];if(o<0){i++}else if(!this.heightSamples[Math.floor(o*10)]){r=true;this.heightSamples[Math.floor(o*10)]=true}}return r||ji.indexOf(e)>-1!=this.lineWrapping||this.direction!=n};t.prototype.refresh=function(t,e,n,r,i,o){var a=ji.indexOf(t)>-1;var s=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a||this.direction!=e;this.lineWrapping=a;this.direction=e;this.lineHeight=n;this.charWidth=r;this.lineLength=i;if(s){this.heightSamples={};for(var u=0;u<o.length;u++){var c=o[u];if(c<0)u++;else this.heightSamples[Math.floor(c*10)]=true}}return s};return t}();var Ui=function(){function t(t,e){this.from=t;this.heights=e;this.index=0}Object.defineProperty(t.prototype,"more",{get:function(){return this.index<this.heights.length},enumerable:false,configurable:true});return t}();var Fi=function(){function t(t,e,n,r,i){this.from=t;this.length=e;this.top=n;this.height=r;this.type=i}Object.defineProperty(t.prototype,"to",{get:function(){return this.from+this.length},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:false,configurable:true});t.prototype.join=function(e){var n=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new t(this.from,this.length+e.length,this.top,this.height+e.height,n)};return t}();var zi=function(t){t[t["ByPos"]=0]="ByPos";t[t["ByHeight"]=1]="ByHeight";t[t["ByPosNoHeight"]=2]="ByPosNoHeight";return t}(zi||(zi={}));var Vi=1e-4;var Hi=function(){function t(t,e,n){if(n===void 0){n=2}this.length=t;this.height=e;this.flags=n}Object.defineProperty(t.prototype,"outdated",{get:function(){return(this.flags&2)>0},set:function(t){this.flags=(t?2:0)|this.flags&~2},enumerable:false,configurable:true});t.prototype.setHeight=function(t,e){if(this.height!=e){if(Math.abs(this.height-e)>Vi)t.heightChanged=true;this.height=e}};t.prototype.replace=function(e,n,r){return t.of(r)};t.prototype.decomposeLeft=function(t,e){e.push(this)};t.prototype.decomposeRight=function(t,e){e.push(this)};t.prototype.applyChanges=function(t,e,n,r){var i=this;for(var o=r.length-1;o>=0;o--){var a=r[o],s=a.fromA,u=a.toA,c=a.fromB,l=a.toB;var f=i.lineAt(s,zi.ByPosNoHeight,e,0,0);var h=f.to>=u?f:i.lineAt(u,zi.ByPosNoHeight,e,0,0);l+=h.to-u;u=h.to;while(o>0&&f.from<=r[o-1].toA){s=r[o-1].fromA;c=r[o-1].fromB;o--;if(s<f.from)f=i.lineAt(s,zi.ByPosNoHeight,e,0,0)}c+=f.from-s;s=f.from;var d=Qi.build(n,t,c,l);i=i.replace(s,u,d)}return i.updateHeight(n,0)};t.empty=function(){return new Gi(0,0)};t.of=function(e){if(e.length==1)return e[0];var n=0,r=e.length,i=0,o=0;for(;;){if(n==r){if(i>o*2){var a=e[n-1];if(a.break)e.splice(--n,1,a.left,null,a.right);else e.splice(--n,1,a.left,a.right);r+=1+a.break;i-=a.size}else if(o>i*2){var a=e[r];if(a.break)e.splice(r,1,a.left,null,a.right);else e.splice(r,1,a.left,a.right);r+=2+a.break;o-=a.size}else{break}}else if(i<o){var s=e[n++];if(s)i+=s.size}else{var s=e[--r];if(s)o+=s.size}}var u=0;if(e[n-1]==null){u=1;n--}else if(e[n]==null){u=1;r++}return new $i(t.of(e.slice(0,n)),u,t.of(e.slice(r)))};return t}();Hi.prototype.size=1;var Ki=function(t){__extends(e,t);function e(e,n,r){var i=t.call(this,e,n)||this;i.type=r;return i}e.prototype.blockAt=function(t,e,n,r){return new Fi(r,this.length,n,this.height,this.type)};e.prototype.lineAt=function(t,e,n,r,i){return this.blockAt(0,n,r,i)};e.prototype.forEachLine=function(t,e,n,r,i,o){o(this.blockAt(0,n,r,i))};e.prototype.updateHeight=function(t,e,n,r){if(e===void 0){e=0}if(n===void 0){n=false}if(r&&r.from<=e&&r.more)this.setHeight(t,r.heights[r.index++]);this.outdated=false;return this};e.prototype.toString=function(){return"block("+this.length+")"};return e}(Hi);var Gi=function(t){__extends(e,t);function e(e,n){var r=t.call(this,e,n,jn.Text)||this;r.collapsed=0;r.widgetHeight=0;return r}e.prototype.replace=function(t,n,r){var i=r[0];if(r.length==1&&(i instanceof e||i instanceof Ji&&i.flags&4)&&Math.abs(this.length-i.length)<10){if(i instanceof Ji)i=new e(i.length,this.height);else i.height=this.height;if(!this.outdated)i.outdated=false;return i}else{return Hi.of(r)}};e.prototype.updateHeight=function(t,e,n,r){if(e===void 0){e=0}if(n===void 0){n=false}if(r&&r.from<=e&&r.more)this.setHeight(t,r.heights[r.index++]);else if(n||this.outdated)this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed)));this.outdated=false;return this};e.prototype.toString=function(){return"line("+this.length+(this.collapsed?-this.collapsed:"")+(this.widgetHeight?":"+this.widgetHeight:"")+")"};return e}(Ki);var Ji=function(t){__extends(e,t);function e(e){return t.call(this,e,0)||this}e.prototype.lines=function(t,e){var n=t.lineAt(e).number,r=t.lineAt(e+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}};e.prototype.blockAt=function(t,e,n,r){var i=this.lines(e,r),o=i.firstLine,a=i.lastLine,s=i.lineHeight;var u=Math.max(0,Math.min(a-o,Math.floor((t-n)/s)));var c=e.line(o+u),l=c.from,f=c.length;return new Fi(l,f,n+s*u,s,jn.Text)};e.prototype.lineAt=function(t,e,n,r,i){if(e==zi.ByHeight)return this.blockAt(t,n,r,i);if(e==zi.ByPosNoHeight){var o=n.lineAt(t),a=o.from,s=o.to;return new Fi(a,s-a,0,0,jn.Text)}var u=this.lines(n,i),c=u.firstLine,l=u.lineHeight;var f=n.lineAt(t),h=f.from,d=f.length,p=f.number;return new Fi(h,d,r+l*(p-c),l,jn.Text)};e.prototype.forEachLine=function(t,e,n,r,i,o){var a=this.lines(n,i),s=a.firstLine,u=a.lineHeight;for(var c=Math.max(t,i),l=Math.min(i+this.length,e);c<=l;){var f=n.lineAt(c);if(c==t)r+=u*(f.number-s);o(new Fi(f.from,f.length,r,u,jn.Text));r+=u;c=f.to+1}};e.prototype.replace=function(t,n,r){var i=this.length-n;if(i>0){var o=r[r.length-1];if(o instanceof e)r[r.length-1]=new e(o.length+i);else r.push(null,new e(i-1))}if(t>0){var a=r[0];if(a instanceof e)r[0]=new e(t+a.length);else r.unshift(new e(t-1),null)}return Hi.of(r)};e.prototype.decomposeLeft=function(t,n){n.push(new e(t-1),null)};e.prototype.decomposeRight=function(t,n){n.push(null,new e(this.length-t-1))};e.prototype.updateHeight=function(t,n,r,i){if(n===void 0){n=0}if(r===void 0){r=false}var o=n+this.length;if(i&&i.from<=n+this.length&&i.more){var a=[],s=Math.max(n,i.from);if(i.from>n)a.push(new e(i.from-n-1).updateHeight(t,n));while(s<=o&&i.more){var u=t.doc.lineAt(s).length;if(a.length)a.push(null);var c=new Gi(u,i.heights[i.index++]);c.outdated=false;a.push(c);s+=u+1}if(s<=o)a.push(null,new e(o-s).updateHeight(t,s));t.heightChanged=true;return Hi.of(a)}else if(r||this.outdated){this.setHeight(t,t.heightForGap(n,n+this.length));this.outdated=false}return this};e.prototype.toString=function(){return"gap("+this.length+")"};return e}(Hi);var $i=function(t){__extends(e,t);function e(e,n,r){var i=t.call(this,e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0))||this;i.left=e;i.right=r;i.size=e.size+r.size;return i}Object.defineProperty(e.prototype,"break",{get:function(){return this.flags&1},enumerable:false,configurable:true});e.prototype.blockAt=function(t,e,n,r){var i=n+this.left.height;return t<i||this.right.height==0?this.left.blockAt(t,e,n,r):this.right.blockAt(t,e,i,r+this.left.length+this.break)};e.prototype.lineAt=function(t,e,n,r,i){var o=r+this.left.height,a=i+this.left.length+this.break;var s=e==zi.ByHeight?t<o||this.right.height==0:t<a;var u=s?this.left.lineAt(t,e,n,r,i):this.right.lineAt(t,e,n,o,a);if(this.break||(s?u.to<a:u.from>a))return u;var c=e==zi.ByPosNoHeight?zi.ByPosNoHeight:zi.ByPos;if(s)return u.join(this.right.lineAt(a,c,n,o,a));else return this.left.lineAt(a,c,n,r,i).join(u)};e.prototype.forEachLine=function(t,e,n,r,i,o){var a=r+this.left.height,s=i+this.left.length+this.break;if(this.break){if(t<s)this.left.forEachLine(t,e,n,r,i,o);if(e>=s)this.right.forEachLine(t,e,n,a,s,o)}else{var u=this.lineAt(s,zi.ByPos,n,r,i);if(t<u.from)this.left.forEachLine(t,u.from-1,n,r,i,o);if(u.to>=t&&u.from<=e)o(u);if(e>u.to)this.right.forEachLine(u.to+1,e,n,a,s,o)}};e.prototype.replace=function(t,e,n){var r=this.left.length+this.break;if(e<r)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-r,e-r,n));var i=[];if(t>0)this.decomposeLeft(t,i);var o=i.length;for(var a=0,s=n;a<s.length;a++){var u=s[a];i.push(u)}if(t>0)Xi(i,o-1);if(e<this.length){var c=i.length;this.decomposeRight(e,i);Xi(i,c)}return Hi.of(i)};e.prototype.decomposeLeft=function(t,e){var n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left);if(this.break){n++;if(t>=n)e.push(null)}if(t>n)this.right.decomposeLeft(t-n,e)};e.prototype.decomposeRight=function(t,e){var n=this.left.length,r=n+this.break;if(t>=r)return this.right.decomposeRight(t-r,e);if(t<n)this.left.decomposeRight(t,e);if(this.break&&t<r)e.push(null);e.push(this.right)};e.prototype.balanced=function(t,e){if(t.size>2*e.size||e.size>2*t.size)return Hi.of(this.break?[t,null,e]:[t,e]);this.left=t;this.right=e;this.height=t.height+e.height;this.outdated=t.outdated||e.outdated;this.size=t.size+e.size;this.length=t.length+this.break+e.length;return this};e.prototype.updateHeight=function(t,e,n,r){if(e===void 0){e=0}if(n===void 0){n=false}var i=this,o=i.left,a=i.right,s=e+o.length+this.break,u=null;if(r&&r.from<=e+o.length&&r.more)u=o=o.updateHeight(t,e,n,r);else o.updateHeight(t,e,n);if(r&&r.from<=s+a.length&&r.more)u=a=a.updateHeight(t,s,n,r);else a.updateHeight(t,s,n);if(u)return this.balanced(o,a);this.height=this.left.height+this.right.height;this.outdated=false;return this};e.prototype.toString=function(){return this.left+(this.break?" ":"-")+this.right};return e}(Hi);function Xi(t,e){var n,r;if(t[e]==null&&(n=t[e-1])instanceof Ji&&(r=t[e+1])instanceof Ji)t.splice(e-1,3,new Ji(n.length+1+r.length))}var Yi=5;var Qi=function(){function t(t,e){this.pos=t;this.oracle=e;this.nodes=[];this.lineStart=-1;this.lineEnd=-1;this.covering=null;this.writtenTo=t}Object.defineProperty(t.prototype,"isCovered",{get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering},enumerable:false,configurable:true});t.prototype.span=function(t,e){if(this.lineStart>-1){var n=Math.min(e,this.lineEnd),r=this.nodes[this.nodes.length-1];if(r instanceof Gi)r.length+=n-this.pos;else if(n>this.pos||!this.isCovered)this.nodes.push(new Gi(n-this.pos,-1));this.writtenTo=n;if(e>n){this.nodes.push(null);this.writtenTo++;this.lineStart=-1}}this.pos=e};t.prototype.point=function(t,e,n){if(t<e||n.heightRelevant){var r=n.widget?Math.max(0,n.widget.estimatedHeight):0;var i=e-t;if(n.block){this.addBlock(new Ki(i,r,n.type))}else if(i||r>=Yi){this.addLineDeco(r,i)}}else if(e>t){this.span(t,e)}if(this.lineEnd>-1&&this.lineEnd<this.pos)this.lineEnd=this.oracle.doc.lineAt(this.pos).to};t.prototype.enterLine=function(){if(this.lineStart>-1)return;var t=this.oracle.doc.lineAt(this.pos),e=t.from,n=t.to;this.lineStart=e;this.lineEnd=n;if(this.writtenTo<e){if(this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)this.nodes.push(this.blankContent(this.writtenTo,e-1));this.nodes.push(null)}if(this.pos>e)this.nodes.push(new Gi(this.pos-e,-1));this.writtenTo=this.pos};t.prototype.blankContent=function(t,e){var n=new Ji(e-t);if(this.oracle.doc.lineAt(t).to==e)n.flags|=4;return n};t.prototype.ensureLine=function(){this.enterLine();var t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Gi)return t;var e=new Gi(0,-1);this.nodes.push(e);return e};t.prototype.addBlock=function(t){this.enterLine();if(t.type==jn.WidgetAfter&&!this.isCovered)this.ensureLine();this.nodes.push(t);this.writtenTo=this.pos=this.pos+t.length;if(t.type!=jn.WidgetBefore)this.covering=t};t.prototype.addLineDeco=function(t,e){var n=this.ensureLine();n.length+=e;n.collapsed+=e;n.widgetHeight=Math.max(n.widgetHeight,t);this.writtenTo=this.pos=this.pos+e};t.prototype.finish=function(t){var e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];if(this.lineStart>-1&&!(e instanceof Gi)&&!this.isCovered)this.nodes.push(new Gi(0,-1));else if(this.writtenTo<this.pos||e==null)this.nodes.push(this.blankContent(this.writtenTo,this.pos));var n=t;for(var r=0,i=this.nodes;r<i.length;r++){var o=i[r];if(o instanceof Gi)o.updateHeight(this.oracle,n);n+=o?o.length:1}return this.nodes};t.build=function(e,n,r,i){var o=new t(r,e);pe.spans(n,r,i,o,0);return o.finish(r)};return t}();function Zi(t,e,n){var r=new to;pe.compare(t,e,n,r,0);return r.changes}var to=function(){function t(){this.changes=[]}t.prototype.compareRange=function(){};t.prototype.comparePoint=function(t,e,n,r){if(t<e||n&&n.heightRelevant||r&&r.heightRelevant)Kn(t,e,this.changes,5)};return t}();function eo(t,e){var n=t.getBoundingClientRect();var r=Math.max(0,n.left),i=Math.min(innerWidth,n.right);var o=Math.max(0,n.top),a=Math.min(innerHeight,n.bottom);for(var s=t.parentNode;s;){if(s.nodeType==1){var u=window.getComputedStyle(s);if((s.scrollHeight>s.clientHeight||s.scrollWidth>s.clientWidth)&&u.overflow!="visible"){var c=s.getBoundingClientRect();r=Math.max(r,c.left);i=Math.min(i,c.right);o=Math.max(o,c.top);a=Math.min(a,c.bottom)}s=u.position=="absolute"||u.position=="fixed"?s.offsetParent:s.parentNode}else if(s.nodeType==11){s=s.host}else{break}}return{left:r-n.left,right:i-n.left,top:o-(n.top+e),bottom:a-(n.top+e)}}var no=function(){function t(t,e,n){this.from=t;this.to=e;this.size=n}t.same=function(t,e){if(t.length!=e.length)return false;for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return false}return true};t.prototype.draw=function(t){return qn.replace({widget:new ro(this.size,t)}).range(this.from,this.to)};return t}();var ro=function(t){__extends(e,t);function e(e,n){var r=t.call(this)||this;r.size=e;r.vertical=n;return r}e.prototype.eq=function(t){return t.size==this.size&&t.vertical==this.vertical};e.prototype.toDOM=function(){var t=document.createElement("div");if(this.vertical){t.style.height=this.size+"px"}else{t.style.width=this.size+"px";t.style.height="2px";t.style.display="inline-block"}return t};Object.defineProperty(e.prototype,"estimatedHeight",{get:function(){return this.vertical?this.size:-1},enumerable:false,configurable:true});return e}(Bn);var io=function(){function t(t){this.state=t;this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0};this.inView=true;this.paddingTop=0;this.paddingBottom=0;this.contentWidth=0;this.heightOracle=new qi;this.scaler=lo;this.scrollTo=null;this.printing=false;this.visibleRanges=[];this.mustEnforceCursorAssoc=false;this.heightMap=Hi.empty().applyChanges(t.facet(mr),z.empty,this.heightOracle.setDoc(t.doc),[new yr(0,0,0,t.doc.length)]);this.viewport=this.getViewport(0,null);this.updateForViewport();this.lineGaps=this.ensureLineGaps([]);this.lineGapDeco=qn.set(this.lineGaps.map((function(t){return t.draw(false)})));this.computeVisibleRanges()}t.prototype.updateForViewport=function(){var t=[this.viewport],e=this.state.selection.main;var n=function(n){var i=n?e.head:e.anchor;if(!t.some((function(t){var e=t.from,n=t.to;return i>=e&&i<=n}))){var o=r.lineAt(i,0),a=o.from,s=o.to;t.push(new oo(a,s))}};var r=this;for(var i=0;i<=1;i++){n(i)}this.viewports=t.sort((function(t,e){return t.from-e.from}));this.scaler=this.heightMap.height<=7e6?lo:new fo(this.heightOracle.doc,this.heightMap,this.viewports)};t.prototype.update=function(t,e){if(e===void 0){e=null}var n=this.state;this.state=t.state;var r=this.state.facet(mr);var i=t.changedRanges;var o=yr.extendWithRanges(i,Zi(t.startState.facet(mr),r,t?t.changes:et.empty(this.state.doc.length)));var a=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(r,n.doc,this.heightOracle.setDoc(this.state.doc),o);if(this.heightMap.height!=a)t.flags|=2;var s=o.length?this.mapViewport(this.viewport,t.changes):this.viewport;if(e&&(e.head<s.from||e.head>s.to)||!this.viewportIsAppropriate(s))s=this.getViewport(0,e);if(!s.eq(this.viewport)){this.viewport=s;t.flags|=4}this.updateForViewport();if(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)t.flags|=this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes)));this.computeVisibleRanges();if(e)this.scrollTo=e;if(!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc)this.mustEnforceCursorAssoc=true};t.prototype.measure=function(t,e){var n=t.dom,r="",i=Rr.LTR;if(!e){var o=window.getComputedStyle(n);r=o.whiteSpace,i=o.direction=="rtl"?Rr.RTL:Rr.LTR;this.paddingTop=parseInt(o.paddingTop)||0;this.paddingBottom=parseInt(o.paddingBottom)||0}var a=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:eo(n,this.paddingTop);var s=a.top-this.pixelViewport.top,u=a.bottom-this.pixelViewport.bottom;this.pixelViewport=a;this.inView=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(!this.inView)return 0;var c=t.measureVisibleLineHeights();var l=false,f=0,h=0,d=this.heightOracle;if(!e){var p=t.dom.clientWidth;if(d.mustRefresh(c,r,i)||d.lineWrapping&&Math.abs(p-this.contentWidth)>d.charWidth){var v=t.measureTextSize(),m=v.lineHeight,g=v.charWidth;l=d.refresh(r,i,m,g,p/g,c);if(l){t.minWidth=0;h|=16}}if(this.contentWidth!=p){this.contentWidth=p;h|=16}if(s>0&&u>0)f=Math.max(s,u);else if(s<0&&u<0)f=Math.min(s,u)}d.heightChanged=false;this.heightMap=this.heightMap.updateHeight(d,0,l,new Ui(this.viewport.from,c));if(d.heightChanged)h|=2;if(!this.viewportIsAppropriate(this.viewport,f)||this.scrollTo&&(this.scrollTo.head<this.viewport.from||this.scrollTo.head>this.viewport.to)){var y=this.getViewport(f,this.scrollTo);if(y.from!=this.viewport.from||y.to!=this.viewport.to){this.viewport=y;h|=4}}this.updateForViewport();if(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)h|=this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps));this.computeVisibleRanges();if(this.mustEnforceCursorAssoc){this.mustEnforceCursorAssoc=false;t.enforceCursorAssoc()}return h};Object.defineProperty(t.prototype,"visibleTop",{get:function(){return this.scaler.fromDOM(this.pixelViewport.top,0)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"visibleBottom",{get:function(){return this.scaler.fromDOM(this.pixelViewport.bottom,0)},enumerable:false,configurable:true});t.prototype.getViewport=function(t,e){var n=.5-Math.max(-.5,Math.min(.5,t/1e3/2));var r=this.heightMap,i=this.state.doc,o=this,a=o.visibleTop,s=o.visibleBottom;var u=new oo(r.lineAt(a-n*1e3,zi.ByHeight,i,0,0).from,r.lineAt(s+(1-n)*1e3,zi.ByHeight,i,0,0).to);if(e){if(e.head<u.from){var c=r.lineAt(e.head,zi.ByPos,i,0,0).top;u=new oo(r.lineAt(c-1e3/2,zi.ByHeight,i,0,0).from,r.lineAt(c+(s-a)+1e3/2,zi.ByHeight,i,0,0).to)}else if(e.head>u.to){var l=r.lineAt(e.head,zi.ByPos,i,0,0).bottom;u=new oo(r.lineAt(l-(s-a)-1e3/2,zi.ByHeight,i,0,0).from,r.lineAt(l+1e3/2,zi.ByHeight,i,0,0).to)}}return u};t.prototype.mapViewport=function(t,e){var n=e.mapPos(t.from,-1),r=e.mapPos(t.to,1);return new oo(this.heightMap.lineAt(n,zi.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,zi.ByPos,this.state.doc,0,0).to)};t.prototype.viewportIsAppropriate=function(t,e){var n=t.from,r=t.to;if(e===void 0){e=0}var i=this.heightMap.lineAt(n,zi.ByPos,this.state.doc,0,0).top;var o=this.heightMap.lineAt(r,zi.ByPos,this.state.doc,0,0).bottom;var a=this,s=a.visibleTop,u=a.visibleBottom;return(n==0||i<=s-Math.max(10,Math.min(-e,250)))&&(r==this.state.doc.length||o>=u+Math.max(10,Math.min(e,250)))&&(i>s-2*1e3&&o<u+2*1e3)};t.prototype.mapLineGaps=function(t,e){if(!t.length||e.empty)return t;var n=[];for(var r=0,i=t;r<i.length;r++){var o=i[r];if(!e.touchesRange(o.from,o.to))n.push(new no(e.mapPos(o.from),e.mapPos(o.to),o.size))}return n};t.prototype.ensureLineGaps=function(t){var e=this;var n=[];if(this.heightOracle.direction!=Rr.LTR)return n;this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(function(r){if(r.length<1e4)return;var i=ao(r.from,r.to,e.state);if(i.total<1e4)return;var o,a;if(e.heightOracle.lineWrapping){if(r.from!=e.viewport.from)o=r.from;else o=so(i,(e.visibleTop-r.top)/r.height);if(r.to!=e.viewport.to)a=r.to;else a=so(i,(e.visibleBottom-r.top)/r.height)}else{var s=i.total*e.heightOracle.charWidth;o=so(i,e.pixelViewport.left/s);a=so(i,e.pixelViewport.right/s)}var u=e.state.selection.main;if(u.from<=o&&u.to>=r.from)o=u.from;if(u.from<=r.to&&u.to>=a)a=u.to;var c=o-1e4,l=a+1e4;if(c>r.from+5e3)n.push(co(t,(function(t){return t.from==r.from&&t.to>c-5e3&&t.to<c+5e3}))||new no(r.from,c,e.gapSize(r,c,true,i)));if(l<r.to-5e3)n.push(co(t,(function(t){return t.to==r.to&&t.from>l-5e3&&t.from<l+5e3}))||new no(l,r.to,e.gapSize(r,l,false,i)))}));return n};t.prototype.gapSize=function(t,e,n,r){if(this.heightOracle.lineWrapping){var i=t.height*uo(r,e);return n?i:t.height-i}else{var o=uo(r,e);return r.total*this.heightOracle.charWidth*(n?o:1-o)}};t.prototype.updateLineGaps=function(t){var e=this;if(!no.same(t,this.lineGaps)){this.lineGaps=t;this.lineGapDeco=qn.set(t.map((function(t){return t.draw(e.heightOracle.lineWrapping)})));return 8}return 0};t.prototype.computeVisibleRanges=function(){var t=this.state.facet(mr);if(this.lineGaps.length)t=t.concat(this.lineGapDeco);var e=[];pe.spans(t,this.viewport.from,this.viewport.to,{span:function(t,n){e.push({from:t,to:n})},point:function(){}},20);this.visibleRanges=e};t.prototype.lineAt=function(t,e){e+=this.paddingTop;return ho(this.heightMap.lineAt(t,zi.ByPos,this.state.doc,e,0),this.scaler,e)};t.prototype.lineAtHeight=function(t,e){e+=this.paddingTop;return ho(this.heightMap.lineAt(this.scaler.fromDOM(t,e),zi.ByHeight,this.state.doc,e,0),this.scaler,e)};t.prototype.blockAtHeight=function(t,e){e+=this.paddingTop;return ho(this.heightMap.blockAt(this.scaler.fromDOM(t,e),this.state.doc,e,0),this.scaler,e)};t.prototype.forEachLine=function(t,e,n,r){var i=this;r+=this.paddingTop;return this.heightMap.forEachLine(t,e,this.state.doc,r,0,this.scaler.scale==1?n:function(t){return n(ho(t,i.scaler,r))})};Object.defineProperty(t.prototype,"contentHeight",{get:function(){return this.domHeight+this.paddingTop+this.paddingBottom},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"domHeight",{get:function(){return this.scaler.toDOM(this.heightMap.height,this.paddingTop)},enumerable:false,configurable:true});return t}();var oo=function(){function t(t,e){this.from=t;this.to=e}t.prototype.eq=function(t){return this.from==t.from&&this.to==t.to};return t}();function ao(t,e,n){var r=[],i=t,o=0;pe.spans(n.facet(mr),t,e,{span:function(){},point:function(t,e){if(t>i){r.push({from:i,to:t});o+=t-i}i=e}},20);if(i<e){r.push({from:i,to:e});o+=e-i}return{total:o,ranges:r}}function so(t,e){var n=t.total,r=t.ranges;if(e<=0)return r[0].from;if(e>=1)return r[r.length-1].to;var i=Math.floor(n*e);for(var o=0;;o++){var a=r[o],s=a.from,u=a.to,c=u-s;if(i<=c)return s+i;i-=c}}function uo(t,e){var n=0;for(var r=0,i=t.ranges;r<i.length;r++){var o=i[r],a=o.from,s=o.to;if(e<=s){n+=e-a;break}n+=s-a}return n/t.total}function co(t,e){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(e(i))return i}return undefined}var lo={toDOM:function(t){return t},fromDOM:function(t){return t},scale:1};var fo=function(){function t(t,e,n){var r=0,i=0,o=0;this.viewports=n.map((function(n){var i=n.from,o=n.to;var a=e.lineAt(i,zi.ByPos,t,0,0).top;var s=e.lineAt(o,zi.ByPos,t,0,0).bottom;r+=s-a;return{from:i,to:o,top:a,bottom:s,domTop:0,domBottom:0}}));this.scale=(7e6-r)/(e.height-r);for(var a=0,s=this.viewports;a<s.length;a++){var u=s[a];u.domTop=o+(u.top-i)*this.scale;o=u.domBottom=u.domTop+(u.bottom-u.top);i=u.bottom}}t.prototype.toDOM=function(t,e){t-=e;for(var n=0,r=0,i=0;;n++){var o=n<this.viewports.length?this.viewports[n]:null;if(!o||t<o.top)return i+(t-r)*this.scale+e;if(t<=o.bottom)return o.domTop+(t-o.top)+e;r=o.bottom;i=o.domBottom}};t.prototype.fromDOM=function(t,e){t-=e;for(var n=0,r=0,i=0;;n++){var o=n<this.viewports.length?this.viewports[n]:null;if(!o||t<o.domTop)return r+(t-i)/this.scale+e;if(t<=o.domBottom)return o.top+(t-o.domTop)+e;r=o.bottom;i=o.domBottom}};return t}();function ho(t,e,n){if(e.scale==1)return t;var r=e.toDOM(t.top,n),i=e.toDOM(t.bottom,n);return new Fi(t.from,t.length,r,i-r,Array.isArray(t.type)?t.type.map((function(t){return ho(t,e,n)})):t.type)}var po=dt.define({combine:function(t){return t.join(" ")}});var vo=dt.define({combine:function(t){return t.indexOf(true)>-1}});var mo=se.newName(),go=se.newName(),yo=se.newName();var bo={"&light":"."+go,"&dark":"."+yo};function wo(t,e,n){return new se(e,{finish:function(e){return/&/.test(e)?e.replace(/&\w*/,(function(e){if(e=="&")return t;if(!n||!n[e])throw new RangeError("Unsupported selector: "+e);return n[e]})):t+" "+e}})}var xo=wo("."+mo,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none"},".cm-lineWrapping":{whiteSpace:"pre-wrap",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none",display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-placeholder":{color:"#888",display:"inline-block"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"3px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},bo);var ko={childList:true,characterData:true,subtree:true,characterDataOldValue:true};var So=xn.ie&&xn.ie_version<=11;var Ao=function(){function t(t,e,n){var r=this;this.view=t;this.onChange=e;this.onScrollChanged=n;this.active=false;this.ignoreSelection=new Ye;this.delayedFlush=-1;this.queue=[];this.lastFlush=0;this.scrollTargets=[];this.intersection=null;this.intersecting=false;this._selectionRange=null;this.parentCheck=-1;this.dom=t.contentDOM;this.observer=new MutationObserver((function(e){for(var n=0,i=e;n<i.length;n++){var o=i[n];r.queue.push(o)}r._selectionRange=null;if((xn.ie&&xn.ie_version<=11||xn.ios&&t.composing)&&e.some((function(t){return t.type=="childList"&&t.removedNodes.length||t.type=="characterData"&&t.oldValue.length>t.target.nodeValue.length})))r.flushSoon();else r.flush()}));if(So)this.onCharData=function(t){r.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue});r.flushSoon()};this.onSelectionChange=this.onSelectionChange.bind(this);this.start();this.onScroll=this.onScroll.bind(this);window.addEventListener("scroll",this.onScroll);if(typeof IntersectionObserver=="function"){this.intersection=new IntersectionObserver((function(t){if(r.parentCheck<0)r.parentCheck=setTimeout(r.listenForScroll.bind(r),1e3);if(t[t.length-1].intersectionRatio>0!=r.intersecting){r.intersecting=!r.intersecting;if(r.intersecting!=r.view.inView)r.onScrollChanged(document.createEvent("Event"))}}),{});this.intersection.observe(this.dom)}this.listenForScroll()}t.prototype.onScroll=function(t){if(this.intersecting)this.flush();this.onScrollChanged(t)};t.prototype.onSelectionChange=function(t){if(this.lastFlush<Date.now()-50)this._selectionRange=null;var e=this.view,n=this.selectionRange;if(e.state.facet(ar)?e.root.activeElement!=this.dom:!qe(e.dom,n))return;var r=n.anchorNode&&e.docView.nearest(n.anchorNode);if(r&&r.ignoreEvent(t))return;if(xn.ie&&xn.ie_version<=11&&!e.state.selection.main.empty&&n.focusNode&&Fe(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset))this.flushSoon();else this.flush()};Object.defineProperty(t.prototype,"selectionRange",{get:function(){if(!this._selectionRange){var t=this.view.root,e=_e(t);if(xn.safari&&t.nodeType==11&&je()==this.view.contentDOM)e=Co(this.view)||e;this._selectionRange=e}return this._selectionRange},enumerable:false,configurable:true});t.prototype.setSelectionRange=function(t,e){var n;if(!((n=this._selectionRange)===null||n===void 0?void 0:n.type))this._selectionRange={anchorNode:t.node,anchorOffset:t.offset,focusNode:e.node,focusOffset:e.offset}};t.prototype.listenForScroll=function(){this.parentCheck=-1;var t=0,e=null;for(var n=this.dom;n;){if(n.nodeType==1){if(!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n)t++;else if(!e)e=this.scrollTargets.slice(0,t);if(e)e.push(n);n=n.assignedSlot||n.parentNode}else if(n.nodeType==11){n=n.host}else{break}}if(t<this.scrollTargets.length&&!e)e=this.scrollTargets.slice(0,t);if(e){for(var r=0,i=this.scrollTargets;r<i.length;r++){var n=i[r];n.removeEventListener("scroll",this.onScroll)}for(var o=0,a=this.scrollTargets=e;o<a.length;o++){var n=a[o];n.addEventListener("scroll",this.onScroll)}}};t.prototype.ignore=function(t){if(!this.active)return t();try{this.stop();return t()}finally{this.start();this.clear()}};t.prototype.start=function(){if(this.active)return;this.observer.observe(this.dom,ko);this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange);if(So)this.dom.addEventListener("DOMCharacterDataModified",this.onCharData);this.active=true};t.prototype.stop=function(){if(!this.active)return;this.active=false;this.observer.disconnect();this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange);if(So)this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)};t.prototype.clearSelection=function(){this.ignoreSelection.set(this.selectionRange)};t.prototype.clear=function(){this.observer.takeRecords();this.queue.length=0;this.clearSelection()};t.prototype.flushSoon=function(){var t=this;if(this.delayedFlush<0)this.delayedFlush=window.setTimeout((function(){t.delayedFlush=-1;t.flush()}),20)};t.prototype.forceFlush=function(){if(this.delayedFlush>=0){window.clearTimeout(this.delayedFlush);this.delayedFlush=-1;this.flush()}};t.prototype.flush=function(){var t=this;if(this.delayedFlush>=0)return;this.lastFlush=Date.now();var e=this.queue;for(var n=0,r=this.observer.takeRecords();n<r.length;n++){var i=r[n];e.push(i)}if(e.length)this.queue=[];var o=this.selectionRange;var a=!this.ignoreSelection.eq(o)&&qe(this.dom,o);if(e.length==0&&!a)return;var s=-1,u=-1,c=false;for(var l=0,f=e;l<f.length;l++){var h=f[l];var d=this.readMutation(h);if(!d)continue;if(d.typeOver)c=true;if(s==-1){s=d.from,u=d.to}else{s=Math.min(d.from,s);u=Math.max(d.to,u)}}var p=this.view.state;if(s>-1||a)this.onChange(s,u,c);if(this.view.state==p){if(this.view.docView.dirty){this.ignore((function(){return t.view.docView.sync()}));this.view.docView.dirty=0}this.view.docView.updateSelection()}this.clearSelection()};t.prototype.readMutation=function(t){var e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;e.markDirty();if(t.type=="childList"){var n=Mo(e,t.previousSibling||t.target.previousSibling,-1);var r=Mo(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:r?e.posBefore(r):e.posAtEnd,typeOver:false}}else{return{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}};t.prototype.destroy=function(){this.stop();if(this.intersection)this.intersection.disconnect();for(var t=0,e=this.scrollTargets;t<e.length;t++){var n=e[t];n.removeEventListener("scroll",this.onScroll)}window.removeEventListener("scroll",this.onScroll);clearTimeout(this.parentCheck)};return t}();function Mo(t,e,n){while(e){var r=an.get(e);if(r&&r.parent==t)return r;var i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function Co(t){var e;var n=null;function r(t){t.preventDefault();t.stopImmediatePropagation();n=t.getTargetRanges()[0]}t.contentDOM.addEventListener("beforeinput",r,true);document.execCommand("indent");t.contentDOM.removeEventListener("beforeinput",r,true);if(!n)return null;var i=n.startContainer,o=n.startOffset;var a=n.endContainer,s=n.endOffset;var u=t.docView.domAtPos(t.state.selection.main.anchor);if(Fe(u.node,u.offset,a,s))e=[a,s,i,o],i=e[0],o=e[1],a=e[2],s=e[3];return{anchorNode:i,anchorOffset:o,focusNode:a,focusOffset:s}}function Oo(t,e,n,r){var i,o;var a=t.state.selection.main,s;if(e>-1&&(s=t.docView.domBoundsAround(e,n,0))){var u=s.from,c=s.to;var l=t.docView.impreciseHead||t.docView.impreciseAnchor?[]:Do(t);var f=new Ro(l,t);f.readRange(s.startDOM,s.endDOM);o=To(l,u);var h=a.from,d=null;if(t.inputState.lastKeyCode===8&&t.inputState.lastKeyTime>Date.now()-100||xn.android&&f.text.length<c-u){h=a.to;d="end"}var p=Io(t.state.sliceDoc(u,c),f.text,h-u,d);if(p)i={from:u+p.from,to:u+p.toA,insert:t.state.toText(f.text.slice(p.from,p.toB))}}else if(t.hasFocus||!t.state.facet(ar)){var v=t.observer.selectionRange;var m=t.docView,g=m.impreciseHead,y=m.impreciseAnchor;var b=g&&g.node==v.focusNode&&g.offset==v.focusOffset||!Be(t.contentDOM,v.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(v.focusNode,v.focusOffset);var w=y&&y.node==v.anchorNode&&y.offset==v.anchorOffset||!Be(t.contentDOM,v.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(v.anchorNode,v.anchorOffset);if(b!=a.head||w!=a.anchor)o=ct.single(w,b)}if(!i&&!o)return;if(!i&&r&&!a.empty&&o&&o.main.empty)i={from:a.from,to:a.to,insert:t.state.doc.slice(a.from,a.to)};else if(i&&i.from>=a.from&&i.to<=a.to&&(i.from!=a.from||i.to!=a.to)&&a.to-a.from-(i.to-i.from)<=4)i={from:a.from,to:a.to,insert:t.state.doc.slice(a.from,i.from).append(i.insert).append(t.state.doc.slice(i.to,a.to))};if(i){var x=t.state;if(xn.android&&(i.from==a.from&&i.to==a.to&&i.insert.length==1&&i.insert.lines==2&&nn(t.contentDOM,"Enter",13)||i.from==a.from-1&&i.to==a.to&&i.insert.length==0&&nn(t.contentDOM,"Backspace",8)||i.from==a.from&&i.to==a.to+1&&i.insert.length==0&&nn(t.contentDOM,"Delete",46))||xn.ios&&t.inputState.flushIOSKey(t))return;var k=i.insert.toString();if(t.state.facet(ir).some((function(e){return e(t,i.from,i.to,k)})))return;if(t.inputState.composing>=0)t.inputState.composing++;var S=void 0;if(i.from>=a.from&&i.to<=a.to&&i.to-i.from>=(a.to-a.from)/3&&(!o||o.main.empty&&o.main.from==i.from+i.insert.length)){var A=a.from<i.from?x.sliceDoc(a.from,i.from):"";var M=a.to>i.to?x.sliceDoc(i.to,a.to):"";S=x.replaceSelection(t.state.toText(A+i.insert.sliceString(0,undefined,t.state.lineBreak)+M))}else{var C=x.changes(i);S={changes:C,selection:o&&!x.selection.main.eq(o.main)&&o.main.to<=C.newLength?x.selection.replaceRange(o.main):undefined}}t.dispatch(S,{scrollIntoView:true,annotations:Ut.userEvent.of("input")})}else if(o&&!o.main.eq(a)){var O=false,I=void 0;if(t.inputState.lastSelectionTime>Date.now()-50){if(t.inputState.lastSelectionOrigin=="keyboardselection")O=true;else I=Ut.userEvent.of(t.inputState.lastSelectionOrigin)}t.dispatch({selection:o,scrollIntoView:O,annotations:I})}}function Io(t,e,n,r){var i=Math.min(t.length,e.length);var o=0;while(o<i&&t.charCodeAt(o)==e.charCodeAt(o))o++;if(o==i&&t.length==e.length)return null;var a=t.length,s=e.length;while(a>0&&s>0&&t.charCodeAt(a-1)==e.charCodeAt(s-1)){a--;s--}if(r=="end"){var u=Math.max(0,o-Math.min(a,s));n-=a+u-o}if(a<o&&t.length<e.length){var c=n<=o&&n>=a?o-n:0;o-=c;s=o+(s-a);a=o}else if(s<o){var c=n<=o&&n>=s?o-n:0;o-=c;a=o+(a-s);s=o}return{from:o,toA:a,toB:s}}var Ro=function(){function t(t,e){this.points=t;this.view=e;this.text="";this.lineBreak=e.state.lineBreak}t.prototype.readRange=function(t,e){if(!t)return;var n=t.parentNode;for(var r=t;;){this.findPointBefore(n,r);this.readNode(r);var i=r.nextSibling;if(i==e)break;var o=an.get(r),a=an.get(i);if((o?o.breakAfter:Eo(r))||(a?a.breakAfter:Eo(i))&&!(r.nodeName=="BR"&&!r.cmIgnore))this.text+=this.lineBreak;r=i}this.findPointBefore(n,e)};t.prototype.readNode=function(t){if(t.cmIgnore)return;var e=an.get(t);var n=e&&e.overrideDOMText;var r;if(n!=null)r=n.sliceString(0,undefined,this.lineBreak);else if(t.nodeType==3)r=t.nodeValue;else if(t.nodeName=="BR")r=t.nextSibling?this.lineBreak:"";else if(t.nodeType==1)this.readRange(t.firstChild,null);if(r!=null){this.findPointIn(t,r.length);this.text+=r;if(xn.chrome&&this.view.inputState.lastKeyCode==13&&!t.nextSibling&&/\n\n$/.test(this.text))this.text=this.text.slice(0,-1)}};t.prototype.findPointBefore=function(t,e){for(var n=0,r=this.points;n<r.length;n++){var i=r[n];if(i.node==t&&t.childNodes[i.offset]==e)i.pos=this.text.length}};t.prototype.findPointIn=function(t,e){for(var n=0,r=this.points;n<r.length;n++){var i=r[n];if(i.node==t)i.pos=this.text.length+Math.min(i.offset,e)}};return t}();function Eo(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}var Po=function(){function t(t,e){this.node=t;this.offset=e;this.pos=-1}return t}();function Do(t){var e=[];if(t.root.activeElement!=t.contentDOM)return e;var n=t.observer.selectionRange,r=n.anchorNode,i=n.anchorOffset,o=n.focusNode,a=n.focusOffset;if(r){e.push(new Po(r,i));if(o!=r||a!=i)e.push(new Po(o,a))}return e}function To(t,e){if(t.length==0)return null;var n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?ct.single(n+e,r+e):null}var Wo=function(){function t(t){var e=this;if(t===void 0){t={}}this.plugins=[];this.editorAttrs={};this.contentAttrs={};this.bidiCache=[];this.updateState=2;this.measureScheduled=-1;this.measureRequests=[];this.contentDOM=document.createElement("div");this.scrollDOM=document.createElement("div");this.scrollDOM.tabIndex=-1;this.scrollDOM.className="cm-scroller";this.scrollDOM.appendChild(this.contentDOM);this.announceDOM=document.createElement("div");this.announceDOM.style.cssText="position: absolute; top: -10000px";this.announceDOM.setAttribute("aria-live","polite");this.dom=document.createElement("div");this.dom.appendChild(this.announceDOM);this.dom.appendChild(this.scrollDOM);this._dispatch=t.dispatch||function(t){return e.update([t])};this.dispatch=this.dispatch.bind(this);this.root=t.root||document;this.viewState=new io(t.state||ee.create());this.plugins=this.state.facet(lr).map((function(t){return new dr(t).update(e)}));this.observer=new Ao(this,(function(t,n,r){Oo(e,t,n,r)}),(function(t){e.inputState.runScrollHandlers(e,t);if(e.observer.intersecting)e.measure()}));this.inputState=new fi(this);this.docView=new wr(this);this.mountStyles();this.updateAttrs();this.updateState=0;Bo();this.requestMeasure();if(t.parent)t.parent.appendChild(this.dom)}Object.defineProperty(t.prototype,"state",{get:function(){return this.viewState.state},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"viewport",{get:function(){return this.viewState.viewport},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"visibleRanges",{get:function(){return this.viewState.visibleRanges},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"inView",{get:function(){return this.viewState.inView},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"composing",{get:function(){return this.inputState.composing>0},enumerable:false,configurable:true});t.prototype.dispatch=function(){var t;var e=[];for(var n=0;n<arguments.length;n++){e[n]=arguments[n]}this._dispatch(e.length==1&&e[0]instanceof Ut?e[0]:(t=this.state).update.apply(t,e))};t.prototype.update=function(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");var e=false,n;var r=this.state;for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=a.state}if(r.facet(ee.phrases)!=this.state.facet(ee.phrases))return this.setState(r);n=new br(this,r,t);var s;try{this.updateState=2;s=t.some((function(t){return t.scrollIntoView}))?r.selection.main:null;this.viewState.update(n,s);this.bidiCache=Uo.update(this.bidiCache,n.changes);if(!n.empty){this.updatePlugins(n);this.inputState.update(n)}e=this.docView.update(n);if(this.state.facet(gr)!=this.styleModules)this.mountStyles();this.updateAttrs();this.showAnnouncements(t)}finally{this.updateState=0}if(e||s||this.viewState.mustEnforceCursorAssoc)this.requestMeasure();if(!n.empty)for(var u=0,c=this.state.facet(rr);u<c.length;u++){var l=c[u];l(n)}};t.prototype.setState=function(t){var e=this;if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");this.updateState=2;try{for(var n=0,r=this.plugins;n<r.length;n++){var i=r[n];i.destroy(this)}this.viewState=new io(t);this.plugins=t.facet(lr).map((function(t){return new dr(t).update(e)}));this.docView=new wr(this);this.inputState.ensureHandlers(this);this.mountStyles();this.updateAttrs();this.bidiCache=[]}finally{this.updateState=0}this.requestMeasure()};t.prototype.updatePlugins=function(t){var e=t.startState.facet(lr),n=t.state.facet(lr);if(e!=n){var r=[];for(var i=0,o=n;i<o.length;i++){var a=o[i];var s=e.indexOf(a);if(s<0){r.push(new dr(a))}else{var u=this.plugins[s];u.mustUpdate=t;r.push(u)}}for(var c=0,l=this.plugins;c<l.length;c++){var u=l[c];if(u.mustUpdate!=t)u.destroy(this)}this.plugins=r;this.inputState.ensureHandlers(this)}else{for(var f=0,h=this.plugins;f<h.length;f++){var d=h[f];d.mustUpdate=t}}for(var p=0;p<this.plugins.length;p++)this.plugins[p]=this.plugins[p].update(this)};t.prototype.measure=function(){var t=this;if(this.measureScheduled>-1)cancelAnimationFrame(this.measureScheduled);this.measureScheduled=-1;var e=null;try{for(var n=0;;n++){this.updateState=1;var r=this.viewState.measure(this.docView,n>0);var i=this.measureRequests;if(!r&&!i.length&&this.viewState.scrollTo==null)break;this.measureRequests=[];if(n>5){console.warn("Viewport failed to stabilize");break}var o=i.map((function(e){try{return e.read(t)}catch(n){or(t.state,n);return qo}}));var a=new br(this,this.state);a.flags|=r;if(!e)e=a;else e.flags|=r;this.updateState=2;if(!a.empty){this.updatePlugins(a);this.inputState.update(a)}this.updateAttrs();if(r)this.docView.update(a);for(var s=0;s<i.length;s++)if(o[s]!=qo){try{i[s].write(o[s],this)}catch(f){or(this.state,f)}}if(this.viewState.scrollTo){this.docView.scrollPosIntoView(this.viewState.scrollTo.head,this.viewState.scrollTo.assoc);this.viewState.scrollTo=null}if(!(r&4)&&this.measureRequests.length==0)break}}finally{this.updateState=0}this.measureScheduled=-1;if(e&&!e.empty)for(var u=0,c=this.state.facet(rr);u<c.length;u++){var l=c[u];l(e)}};Object.defineProperty(t.prototype,"themeClasses",{get:function(){return mo+" "+(this.state.facet(vo)?yo:go)+" "+this.state.facet(po)},enumerable:false,configurable:true});t.prototype.updateAttrs=function(){var t=Ln(this.state.facet(pr),{class:"cm-editor cm-wrap"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses});_n(this.dom,this.editorAttrs,t);this.editorAttrs=t;var e=Ln(this.state.facet(vr),{spellcheck:"false",autocorrect:"off",autocapitalize:"off",contenteditable:String(this.state.facet(ar)),class:"cm-content",style:xn.tabSize+": "+this.state.tabSize,role:"textbox","aria-multiline":"true"});_n(this.contentDOM,this.contentAttrs,e);this.contentAttrs=e};t.prototype.showAnnouncements=function(e){var n=true;for(var r=0,i=e;r<i.length;r++){var o=i[r];for(var a=0,s=o.effects;a<s.length;a++){var u=s[a];if(u.is(t.announce)){if(n)this.announceDOM.textContent="";n=false;var c=this.announceDOM.appendChild(document.createElement("div"));c.textContent=u.value}}}};t.prototype.mountStyles=function(){this.styleModules=this.state.facet(gr);se.mount(this.root,this.styleModules.concat(xo).reverse())};t.prototype.readMeasured=function(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");if(this.updateState==0&&this.measureScheduled>-1)this.measure()};t.prototype.requestMeasure=function(t){var e=this;if(this.measureScheduled<0)this.measureScheduled=requestAnimationFrame((function(){return e.measure()}));if(t){if(t.key!=null)for(var n=0;n<this.measureRequests.length;n++){if(this.measureRequests[n].key===t.key){this.measureRequests[n]=t;return}}this.measureRequests.push(t)}};t.prototype.pluginField=function(t){var e=[];for(var n=0,r=this.plugins;n<r.length;n++){var i=r[n];i.update(this).takeField(t,e)}return e};t.prototype.plugin=function(t){for(var e=0,n=this.plugins;e<n.length;e++){var r=n[e];if(r.spec==t)return r.update(this).value}return null};t.prototype.blockAtHeight=function(t,e){this.readMeasured();return this.viewState.blockAtHeight(t,No(e,this.contentDOM))};t.prototype.visualLineAtHeight=function(t,e){this.readMeasured();return this.viewState.lineAtHeight(t,No(e,this.contentDOM))};t.prototype.viewportLines=function(t,e){var n=this.viewport,r=n.from,i=n.to;this.viewState.forEachLine(r,i,t,No(e,this.contentDOM))};t.prototype.visualLineAt=function(t,e){if(e===void 0){e=0}return this.viewState.lineAt(t,e)};Object.defineProperty(t.prototype,"contentHeight",{get:function(){return this.viewState.contentHeight},enumerable:false,configurable:true});t.prototype.moveByChar=function(t,e,n){return li(this,t,si(this,t,e,n))};t.prototype.moveByGroup=function(t,e){var n=this;return li(this,t,si(this,t,e,(function(e){return ui(n,t.head,e)})))};t.prototype.moveToLineBoundary=function(t,e,n){if(n===void 0){n=true}return ai(this,t,e,n)};t.prototype.moveVertically=function(t,e,n){return li(this,t,ci(this,t,e,n))};t.prototype.scrollPosIntoView=function(t){this.viewState.scrollTo=ct.cursor(t);this.requestMeasure()};t.prototype.domAtPos=function(t){return this.docView.domAtPos(t)};t.prototype.posAtDOM=function(t,e){if(e===void 0){e=0}return this.docView.posFromDOM(t,e)};t.prototype.posAtCoords=function(t){this.readMeasured();return ii(this,t)};t.prototype.coordsAtPos=function(t,e){if(e===void 0){e=1}this.readMeasured();var n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;var r=this.state.doc.lineAt(t),i=this.bidiSpans(r);var o=i[Vr.find(i,t-r.from,-1,e)];return Ge(n,o.dir==Rr.LTR==e>0)};Object.defineProperty(t.prototype,"defaultCharacterWidth",{get:function(){return this.viewState.heightOracle.charWidth},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"defaultLineHeight",{get:function(){return this.viewState.heightOracle.lineHeight},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"textDirection",{get:function(){return this.viewState.heightOracle.direction},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"lineWrapping",{get:function(){return this.viewState.heightOracle.lineWrapping},enumerable:false,configurable:true});t.prototype.bidiSpans=function(t){if(t.length>Lo)return Gr(t.length);var e=this.textDirection;for(var n=0,r=this.bidiCache;n<r.length;n++){var i=r[n];if(i.from==t.from&&i.dir==e)return i.order}var o=Kr(t.text,this.textDirection);this.bidiCache.push(new Uo(t.from,t.to,e,o));return o};Object.defineProperty(t.prototype,"hasFocus",{get:function(){var t;return(document.hasFocus()||xn.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM},enumerable:false,configurable:true});t.prototype.focus=function(){var t=this;this.observer.ignore((function(){Ze(t.contentDOM);t.docView.updateSelection()}))};t.prototype.destroy=function(){for(var t=0,e=this.plugins;t<e.length;t++){var n=e[t];n.destroy(this)}this.inputState.destroy();this.dom.remove();this.observer.destroy();if(this.measureScheduled>-1)cancelAnimationFrame(this.measureScheduled)};t.domEventHandlers=function(t){return fr.define((function(){return{}}),{eventHandlers:t})};t.theme=function(t,e){var n=se.newName();var r=[po.of(n),gr.of(wo("."+n,t))];if(e&&e.dark)r.push(vo.of(true));return r};t.baseTheme=function(t){return St.fallback(gr.of(wo("."+mo,t,bo)))};return t}();Wo.styleModule=gr;Wo.inputHandler=ir;Wo.exceptionSink=nr;Wo.updateListener=rr;Wo.editable=ar;Wo.mouseSelectionStyle=er;Wo.dragMovesSelection=tr;Wo.clickAddsSelectionRange=Zn;Wo.decorations=mr;Wo.contentAttributes=vr;Wo.editorAttributes=pr;Wo.lineWrapping=Wo.contentAttributes.of({class:"cm-lineWrapping"});Wo.announce=qt.define();var Lo=4096;function No(t,e){return t==null?e.getBoundingClientRect().top:t}var _o=-1;function Bo(){window.addEventListener("resize",(function(){if(_o==-1)_o=setTimeout(jo,50)}))}function jo(){_o=-1;var t=document.querySelectorAll(".cm-content");for(var e=0;e<t.length;e++){var n=an.get(t[e]);if(n)n.editorView.requestMeasure()}}var qo={};var Uo=function(){function t(t,e,n,r){this.from=t;this.to=e;this.dir=n;this.order=r}t.update=function(e,n){if(n.empty)return e;var r=[],i=e.length?e[e.length-1].dir:Rr.LTR;for(var o=Math.max(0,e.length-10);o<e.length;o++){var a=e[o];if(a.dir==i&&!n.touchesRange(a.from,a.to))r.push(new t(n.mapPos(a.from,1),n.mapPos(a.to,-1),a.dir,a.order))}return r};return t}();var Fo=typeof navigator=="undefined"?"key":/Mac/.test(navigator.platform)?"mac":/Win/.test(navigator.platform)?"win":/Linux|X11/.test(navigator.platform)?"linux":"key";function zo(t,e){var n=t.split(/-(?!$)/);var r=n[n.length-1];if(r=="Space")r=" ";var i,o,a,s;for(var u=0;u<n.length-1;++u){var c=n[u];if(/^(cmd|meta|m)$/i.test(c))s=true;else if(/^a(lt)?$/i.test(c))i=true;else if(/^(c|ctrl|control)$/i.test(c))o=true;else if(/^s(hift)?$/i.test(c))a=true;else if(/^mod$/i.test(c)){if(e=="mac")s=true;else o=true}else throw new Error("Unrecognized modifier name: "+c)}if(i)r="Alt-"+r;if(o)r="Ctrl-"+r;if(s)r="Meta-"+r;if(a)r="Shift-"+r;return r}function Vo(t,e,n){if(e.altKey)t="Alt-"+t;if(e.ctrlKey)t="Ctrl-"+t;if(e.metaKey)t="Meta-"+t;if(n!==false&&e.shiftKey)t="Shift-"+t;return t}var Ho=Wo.domEventHandlers({keydown:function(t,e){return Zo(Jo(e.state),t,e,"editor")}});var Ko=t("y",dt.define({enables:Ho}));var Go=new WeakMap;function Jo(t){var e=t.facet(Ko);var n=Go.get(e);if(!n)Go.set(e,n=Qo(e.reduce((function(t,e){return t.concat(e)}),[])));return n}function $o(t,e,n){return Zo(Jo(t.state),e,t,n)}var Xo=null;var Yo=4e3;function Qo(t,e){if(e===void 0){e=Fo}var n=Object.create(null);var r=Object.create(null);var i=function(t,e){var n=r[t];if(n==null)r[t]=e;else if(n!=e)throw new Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix")};var o=function(t,r,o,a){var s=n[t]||(n[t]=Object.create(null));var u=r.split(/ (?!$)/).map((function(t){return zo(t,e)}));var c=function(e){var n=u.slice(0,e).join(" ");i(n,true);if(!s[n])s[n]={preventDefault:true,commands:[function(e){var r=Xo={view:e,prefix:n,scope:t};setTimeout((function(){if(Xo==r)Xo=null}),Yo);return true}]}};for(var l=1;l<u.length;l++){c(l)}var f=u.join(" ");i(f,false);var h=s[f]||(s[f]={preventDefault:false,commands:[]});h.commands.push(o);if(a)h.preventDefault=true};for(var a=0,s=t;a<s.length;a++){var u=s[a];var c=u[e]||u.key;if(!c)continue;for(var l=0,f=u.scope?u.scope.split(" "):["editor"];l<f.length;l++){var h=f[l];o(h,c,u.run,u.preventDefault);if(u.shift)o(h,"Shift-"+c,u.shift,u.preventDefault)}}return n}function Zo(t,e,n,r){var i=Ne(e),o=i.length==1&&i!=" ";var a="",s=false;if(Xo&&Xo.view==n&&Xo.scope==r){a=Xo.prefix+" ";if(s=hi.indexOf(e.keyCode)<0)Xo=null}var u=function(t){if(t){for(var e=0,r=t.commands;e<r.length;e++){var i=r[e];if(i(n))return true}if(t.preventDefault)s=true}return false};var c=t[r],l;if(c){if(u(c[a+Vo(i,e,!o)]))return true;if(o&&(e.shiftKey||e.altKey||e.metaKey)&&(l=Ce[e.keyCode])&&l!=i){if(u(c[a+Vo(l,e,true)]))return true}else if(o&&e.shiftKey){if(u(c[a+Vo(i,e,true)]))return true}}return s}var ta=!xn.ios;var ea=dt.define({combine:function(t){return ne(t,{cursorBlinkRate:1200,drawRangeCursor:true},{cursorBlinkRate:function(t,e){return Math.min(t,e)},drawRangeCursor:function(t,e){return t||e}})}});function na(t){if(t===void 0){t={}}return[ea.of(t),ia,aa]}var ra=function(){function t(t,e,n,r,i){this.left=t;this.top=e;this.width=n;this.height=r;this.className=i}t.prototype.draw=function(){var t=document.createElement("div");t.className=this.className;this.adjust(t);return t};t.prototype.adjust=function(t){t.style.left=this.left+"px";t.style.top=this.top+"px";if(this.width>=0)t.style.width=this.width+"px";t.style.height=this.height+"px"};t.prototype.eq=function(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className};return t}();var ia=fr.fromClass(function(){function t(t){this.view=t;this.rangePieces=[];this.cursors=[];this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)};this.selectionLayer=t.scrollDOM.appendChild(document.createElement("div"));this.selectionLayer.className="cm-selectionLayer";this.selectionLayer.setAttribute("aria-hidden","true");this.cursorLayer=t.scrollDOM.appendChild(document.createElement("div"));this.cursorLayer.className="cm-cursorLayer";this.cursorLayer.setAttribute("aria-hidden","true");t.requestMeasure(this.measureReq);this.setBlinkRate()}t.prototype.setBlinkRate=function(){this.cursorLayer.style.animationDuration=this.view.state.facet(ea).cursorBlinkRate+"ms"};t.prototype.update=function(t){var e=t.startState.facet(ea)!=t.state.facet(ea);if(e||t.selectionSet||t.geometryChanged||t.viewportChanged)this.view.requestMeasure(this.measureReq);if(t.transactions.some((function(t){return t.scrollIntoView})))this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink";if(e)this.setBlinkRate()};t.prototype.readPos=function(){var t=this;var e=this.view.state,n=e.facet(ea);var r=e.selection.ranges.map((function(e){return e.empty?[]:la(t.view,e)})).reduce((function(t,e){return t.concat(e)}));var i=[];for(var o=0,a=e.selection.ranges;o<a.length;o++){var s=a[o];var u=s==e.selection.main;if(s.empty?!u||ta:n.drawRangeCursor){var c=fa(this.view,s,u);if(c)i.push(c)}}return{rangePieces:r,cursors:i}};t.prototype.drawSel=function(t){var e=this;var n=t.rangePieces,r=t.cursors;if(n.length!=this.rangePieces.length||n.some((function(t,n){return!t.eq(e.rangePieces[n])}))){this.selectionLayer.textContent="";for(var i=0,o=n;i<o.length;i++){var a=o[i];this.selectionLayer.appendChild(a.draw())}this.rangePieces=n}if(r.length!=this.cursors.length||r.some((function(t,n){return!t.eq(e.cursors[n])}))){var s=this.cursorLayer.children;if(s.length!==r.length){this.cursorLayer.textContent="";for(var u=0,c=r;u<c.length;u++){var l=c[u];this.cursorLayer.appendChild(l.draw())}}else{r.forEach((function(t,e){return t.adjust(s[e])}))}this.cursors=r}};t.prototype.destroy=function(){this.selectionLayer.remove();this.cursorLayer.remove()};return t}());var oa={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};if(ta)oa[".cm-line"].caretColor="transparent !important";var aa=St.override(Wo.theme(oa));function sa(t){var e=t.scrollDOM.getBoundingClientRect();var n=t.textDirection==Rr.LTR?e.left:e.right-t.scrollDOM.clientWidth;return{left:n-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function ua(t,e,n){var r=ct.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(r,false,true).from),to:Math.min(n.to,t.moveToLineBoundary(r,true,true).from),type:jn.Text}}function ca(t,e){var n=t.visualLineAt(e);if(Array.isArray(n.type))for(var r=0,i=n.type;r<i.length;r++){var o=i[r];if(o.to>e||o.to==e&&(o.to==n.to||o.type==jn.Text))return o}return n}function la(t,e){if(e.to<=t.viewport.from||e.from>=t.viewport.to)return[];var n=Math.max(e.from,t.viewport.from),r=Math.min(e.to,t.viewport.to);var i=t.textDirection==Rr.LTR;var o=t.contentDOM,a=o.getBoundingClientRect(),s=sa(t);var u=window.getComputedStyle(o.firstChild);var c=a.left+parseInt(u.paddingLeft);var l=a.right-parseInt(u.paddingRight);var f=ca(t,n),h=ca(t,r);var d=f.type==jn.Text?f:null;var p=h.type==jn.Text?h:null;if(t.lineWrapping){if(d)d=ua(t,n,d);if(p)p=ua(t,r,p)}if(d&&p&&d.from==p.from){return b(w(e.from,e.to,d))}else{var v=d?w(e.from,null,d):x(f,false);var m=p?w(null,e.to,p):x(h,true);var g=[];if((d||f).to<(p||h).from-1)g.push(y(c,v.bottom,l,m.top));else if(v.bottom<m.top&&ca(t,(v.bottom+m.top)/2).type==jn.Text)v.bottom=m.top=(v.bottom+m.top)/2;return b(v).concat(g).concat(b(m))}function y(t,e,n,r){return new ra(t-s.left,e-s.top,n-t,r-e,"cm-selectionBackground")}function b(t){var e=t.top,n=t.bottom,r=t.horizontal;var i=[];for(var o=0;o<r.length;o+=2)i.push(y(r[o],e,r[o+1],n));return i}function w(e,n,r){var o=1e9,a=-1e9,s=[];function u(e,n,u,f,h){var d=t.coordsAtPos(e,e==r.to?-2:2);var p=t.coordsAtPos(u,u==r.from?2:-2);o=Math.min(d.top,p.top,o);a=Math.max(d.bottom,p.bottom,a);if(h==Rr.LTR)s.push(i&&n?c:d.left,i&&f?l:p.right);else s.push(!i&&f?c:p.left,!i&&n?l:d.right)}var f=e!==null&&e!==void 0?e:r.from,h=n!==null&&n!==void 0?n:r.to;for(var d=0,p=t.visibleRanges;d<p.length;d++){var v=p[d];if(v.to>f&&v.from<h){for(var m=Math.max(v.from,f),g=Math.min(v.to,h);;){var y=t.state.doc.lineAt(m);for(var b=0,w=t.bidiSpans(y);b<w.length;b++){var x=w[b];var k=x.from+y.from,S=x.to+y.from;if(k>=g)break;if(S>m)u(Math.max(k,m),e==null&&k<=f,Math.min(S,g),n==null&&S>=h,x.dir)}m=y.to+1;if(m>=g)break}}}if(s.length==0)u(f,e==null,h,n==null,t.textDirection);return{top:o,bottom:a,horizontal:s}}function x(t,e){var n=a.top+(e?t.top:t.bottom);return{top:n,bottom:n,horizontal:[]}}}function fa(t,e,n){var r=t.coordsAtPos(e.head,e.assoc||1);if(!r)return null;var i=sa(t);return new ra(r.left-i.left,r.top-i.top,-1,r.bottom-r.top,n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}function ha(t,e,n,r,i){e.lastIndex=0;for(var o=t.iterRange(n,r),a=n,s=void 0;!o.next().done;a+=o.value.length){if(!o.lineBreak)while(s=e.exec(o.value))i(a+s.index,a+s.index+s[0].length,s)}}var da=function(){function t(t){var e=t.regexp,n=t.decoration,r=t.boundary;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=e;this.getDeco=typeof n=="function"?n:function(){return n};this.boundary=r}t.prototype.createDeco=function(t){var e=this;var n=new ve;for(var r=0,i=t.visibleRanges;r<i.length;r++){var o=i[r],a=o.from,s=o.to;ha(t.state.doc,this.regexp,a,s,(function(r,i,o){return n.add(r,i,e.getDeco(o,t,r))}))}return n.finish()};t.prototype.updateDeco=function(t,e){var n=1e9,r=-1;if(t.docChanged)t.changes.iterChanges((function(e,i,o,a){if(a>t.view.viewport.from&&o<t.view.viewport.to){n=Math.min(o,n);r=Math.max(a,r)}}));if(t.viewportChanged||r-n>1e3)return this.createDeco(t.view);if(r>-1)return this.updateRange(t.view,e.map(t.changes),n,r);return e};t.prototype.updateRange=function(t,e,n,r){var i=this;var o=function(o){var s=Math.max(o.from,n),u=Math.min(o.to,r);if(u>s){var c=t.state.doc.lineAt(s),l=c.to<u?t.state.doc.lineAt(u):c;var f=Math.max(o.from,c.from),h=Math.min(o.to,l.to);if(a.boundary){for(;s>c.from;s--)if(a.boundary.test(c.text[s-1-c.from])){f=s;break}for(;u<l.to;u++)if(a.boundary.test(l.text[u-l.from])){h=u;break}}var d=[],p=void 0;if(c==l){a.regexp.lastIndex=f-c.from;while((p=a.regexp.exec(c.text))&&p.index<h-c.from){var v=p.index+c.from;d.push(a.getDeco(p,t,v).range(v,v+p[0].length))}}else{ha(t.state.doc,a.regexp,f,h,(function(e,n,r){return d.push(i.getDeco(r,t,e).range(e,n))}))}e=e.update({filterFrom:f,filterTo:h,filter:function(){return false},add:d})}};var a=this;for(var s=0,u=t.visibleRanges;s<u.length;s++){var c=u[s];o(c)}return e};return t}();var pa=/x/.unicode!=null?"gu":"g";var va=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029\ufeff￹-￼]",pa);var ma={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};var ga=null;function ya(){var t;if(ga==null&&typeof document!="undefined"&&document.body){var e=document.body.style;ga=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return ga||false}var ba=dt.define({combine:function(t){var e=ne(t,{render:null,specialChars:va,addSpecialChars:null});if(e.replaceTabs=!ya())e.specialChars=new RegExp("\t|"+e.specialChars.source,pa);if(e.addSpecialChars)e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,pa);return e}});function wa(t){if(t===void 0){t={}}return[ba.of(t),ka()]}var xa=null;function ka(){return xa||(xa=fr.fromClass(function(){function t(t){this.view=t;this.decorations=qn.none;this.decorationCache=Object.create(null);this.decorator=this.makeDecorator(t.state.facet(ba));this.decorations=this.decorator.createDeco(t)}t.prototype.makeDecorator=function(t){var e=this;return new da({regexp:t.specialChars,decoration:function(n,r,i){var o=r.state.doc;var a=B(n[0],0);if(a==9){var s=o.lineAt(i);var u=r.state.tabSize,c=U(o.sliceString(s.from,i),0,u);return qn.replace({widget:new Ca((u-c%u)*e.view.defaultCharacterWidth)})}return e.decorationCache[a]||(e.decorationCache[a]=qn.replace({widget:new Ma(t,a)}))},boundary:t.replaceTabs?undefined:/[^]/})};t.prototype.update=function(t){var e=t.state.facet(ba);if(t.startState.facet(ba)!=e){this.decorator=this.makeDecorator(e);this.decorations=this.decorator.createDeco(t.view)}else{this.decorations=this.decorator.updateDeco(t,this.decorations)}};return t}(),{decorations:function(t){return t.decorations}}))}var Sa="•";function Aa(t){if(t>=32)return Sa;if(t==10)return"␤";return String.fromCharCode(9216+t)}var Ma=function(t){__extends(e,t);function e(e,n){var r=t.call(this)||this;r.options=e;r.code=n;return r}e.prototype.eq=function(t){return t.code==this.code};e.prototype.toDOM=function(t){var e=Aa(this.code);var n=t.state.phrase("Control character")+" "+(ma[this.code]||"0x"+this.code.toString(16));var r=this.options.render&&this.options.render(this.code,n,e);if(r)return r;var i=document.createElement("span");i.textContent=e;i.title=n;i.setAttribute("aria-label",n);i.className="cm-specialChar";return i};e.prototype.ignoreEvent=function(){return false};return e}(Bn);var Ca=function(t){__extends(e,t);function e(e){var n=t.call(this)||this;n.width=e;return n}e.prototype.eq=function(t){return t.width==this.width};e.prototype.toDOM=function(){var t=document.createElement("span");t.textContent="\t";t.className="cm-tab";t.style.width=this.width+"px";return t};e.prototype.ignoreEvent=function(){return false};return e}(Bn);var Oa=typeof navigator!="undefined"&&!/Edge\/(\d+)/.exec(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2);var Ia="-10000px";var Ra=fr.fromClass(function(){function t(t){var e=this;this.view=t;this.inView=true;this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this};this.input=t.state.facet(Pa);this.tooltips=this.input.filter((function(t){return t}));this.tooltipViews=this.tooltips.map((function(t){return e.createTooltip(t)}))}t.prototype.update=function(t){var e=t.state.facet(Pa);if(e==this.input){for(var n=0,r=this.tooltipViews;n<r.length;n++){var i=r[n];if(i.update)i.update(t)}}else{var o=e.filter((function(t){return t}));var a=[];for(var s=0;s<o.length;s++){var u=o[s],c=-1;if(!u)continue;for(var l=0;l<this.tooltips.length;l++){var f=this.tooltips[l];if(f&&f.create==u.create)c=l}if(c<0){a[s]=this.createTooltip(u)}else{var h=a[s]=this.tooltipViews[c];if(h.update)h.update(t)}}for(var d=0,p=this.tooltipViews;d<p.length;d++){var v=p[d];if(a.indexOf(v)<0)v.dom.remove()}this.input=e;this.tooltips=o;this.tooltipViews=a;this.maybeMeasure()}};t.prototype.createTooltip=function(t){var e=t.create(this.view);e.dom.classList.add("cm-tooltip");if(t.class)e.dom.classList.add(t.class);e.dom.style.top=Ia;this.view.dom.appendChild(e.dom);if(e.mount)e.mount(this.view);return e};t.prototype.destroy=function(){for(var t=0,e=this.tooltipViews;t<e.length;t++){var n=e[t].dom;n.remove()}};t.prototype.readMeasure=function(){var t=this;return{editor:this.view.dom.getBoundingClientRect(),pos:this.tooltips.map((function(e){return t.view.coordsAtPos(e.pos)})),size:this.tooltipViews.map((function(t){var e=t.dom;return e.getBoundingClientRect()})),innerWidth:window.innerWidth,innerHeight:window.innerHeight}};t.prototype.writeMeasure=function(t){var e=t.editor;for(var n=0;n<this.tooltipViews.length;n++){var r=this.tooltips[n],i=this.tooltipViews[n],o=i.dom;var a=t.pos[n],s=t.size[n];if(!a||a.bottom<=e.top||a.top>=e.bottom||a.right<=e.left||a.left>=e.right){o.style.top=Ia;continue}var u=s.right-s.left,c=s.bottom-s.top;var l=this.view.textDirection==Rr.LTR?Math.min(a.left,t.innerWidth-u):Math.max(0,a.left-u);var f=!!r.above;if(!r.strictSide&&(f?a.top-(s.bottom-s.top)<0:a.bottom+(s.bottom-s.top)>t.innerHeight))f=!f;if(Oa){o.style.top=(f?a.top-c:a.bottom)-e.top+"px";o.style.left=l-e.left+"px";o.style.position="absolute"}else{o.style.top=(f?a.top-c:a.bottom)+"px";o.style.left=l+"px"}o.classList.toggle("cm-tooltip-above",f);o.classList.toggle("cm-tooltip-below",!f);if(i.positioned)i.positioned()}};t.prototype.maybeMeasure=function(){if(this.tooltips.length){if(this.view.inView||this.inView)this.view.requestMeasure(this.measureReq);this.inView=this.view.inView}};return t}(),{eventHandlers:{scroll:function(){this.maybeMeasure()}}});var Ea=Wo.baseTheme({".cm-tooltip":{position:"fixed",zIndex:100},"&light .cm-tooltip":{border:"1px solid #ddd",backgroundColor:"#f5f5f5"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"}});var Pa=dt.define({enables:[Ra,Ea]});var Da=t("D",1024);var Ta=0;var Wa=new WeakMap;var La=function(){function t(t){var e=t===void 0?{}:t,n=e.deserialize;this.id=Ta++;this.deserialize=n||function(){throw new Error("This node type doesn't define a deserialize function")}}t.string=function(){return new t({deserialize:function(t){return t}})};t.number=function(){return new t({deserialize:Number})};t.flag=function(){return new t({deserialize:function(){return true}})};t.prototype.set=function(t,e){t[this.id]=e;return t};t.prototype.add=function(t){var e=this;if(typeof t!="function")t=_a.match(t);return function(n){var r=t(n);return r===undefined?null:[e,r]}};return t}();t("e",La);La.closedBy=new La({deserialize:function(t){return t.split(" ")}});La.openedBy=new La({deserialize:function(t){return t.split(" ")}});La.group=new La({deserialize:function(t){return t.split(" ")}});var Na=Object.create(null);var _a=function(){function t(t,e,n,r){if(r===void 0){r=0}this.name=t;this.props=e;this.id=n;this.flags=r}t.define=function(e){var n=e.props&&e.props.length?Object.create(null):Na;var r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0);var i=new t(e.name||"",n,e.id,r);if(e.props)for(var o=0,a=e.props;o<a.length;o++){var s=a[o];if(!Array.isArray(s))s=s(i);if(s)s[0].set(n,s[1])}return i};t.prototype.prop=function(t){return this.props[t.id]};Object.defineProperty(t.prototype,"isTop",{get:function(){return(this.flags&1)>0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isSkipped",{get:function(){return(this.flags&2)>0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isError",{get:function(){return(this.flags&4)>0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isAnonymous",{get:function(){return(this.flags&8)>0},enumerable:false,configurable:true});t.prototype.is=function(t){if(typeof t=="string"){if(this.name==t)return true;var e=this.prop(La.group);return e?e.indexOf(t)>-1:false}return this.id==t};t.match=function(t){var e=Object.create(null);for(var n in t)for(var r=0,i=n.split(" ");r<i.length;r++){var o=i[r];e[o]=t[n]}return function(t){for(var n=t.prop(La.group),r=-1;r<(n?n.length:0);r++){var i=e[r<0?t.name:n[r]];if(i)return i}}};return t}();t("N",_a);_a.none=new _a("",Object.create(null),0,8);var Ba=function(){function t(t){this.types=t;for(var e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}t.prototype.extend=function(){var e=[];for(var n=0;n<arguments.length;n++){e[n]=arguments[n]}var r=[];for(var i=0,o=this.types;i<o.length;i++){var a=o[i];var s=null;for(var u=0,c=e;u<c.length;u++){var l=c[u];var f=l(a);if(f){if(!s)s=Object.assign({},a.props);f[0].set(s,f[1])}}r.push(s?new _a(a.name,s,a.id,a.flags):a)}return new t(r)};return t}();t("b",Ba);var ja=function(){function t(t,e,n,r){this.type=t;this.children=e;this.positions=n;this.length=r}t.prototype.toString=function(){var t=this.children.map((function(t){return t.toString()})).join();return!this.type.name?t:(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":"")};t.prototype.cursor=function(t,e){if(e===void 0){e=0}var n=t!=null&&Wa.get(this)||this.topNode;var r=new Ka(n);if(t!=null){r.moveTo(t,e);Wa.set(this,r._tree)}return r};t.prototype.fullCursor=function(){return new Ka(this.topNode,true)};Object.defineProperty(t.prototype,"topNode",{get:function(){return new Fa(this,0,0,null)},enumerable:false,configurable:true});t.prototype.resolve=function(t,e){if(e===void 0){e=0}return this.cursor(t,e).node};t.prototype.iterate=function(t){var e=t.enter,n=t.leave,r=t.from,i=r===void 0?0:r,o=t.to,a=o===void 0?this.length:o;for(var s=this.cursor();;){var u=false;if(s.from<=a&&s.to>=i&&(s.type.isAnonymous||e(s.type,s.from,s.to)!==false)){if(s.firstChild())continue;if(!s.type.isAnonymous)u=true}for(;;){if(u&&n)n(s.type,s.from,s.to);u=s.type.isAnonymous;if(s.nextSibling())break;if(!s.parent())return;u=true}}};t.prototype.balance=function(t){if(t===void 0){t=Da}return this.children.length<=$a?this:Ya(this.type,_a.none,this.children,this.positions,0,this.children.length,0,t,this.length,0)};t.build=function(t){return Xa(t)};return t}();t("T",ja);ja.empty=new ja(_a.none,[],[],0);function qa(t,e){if(e)t.contextHash=e;return t}var Ua=function(){function t(t,e,n,r){if(r===void 0){r=_a.none}this.buffer=t;this.length=e;this.set=n;this.type=r}t.prototype.toString=function(){var t=[];for(var e=0;e<this.buffer.length;){t.push(this.childString(e));e=this.buffer[e+3]}return t.join(",")};t.prototype.childString=function(t){var e=this.buffer[t],n=this.buffer[t+3];var r=this.set.types[e],i=r.name;if(/\W/.test(i)&&!r.isError)i=JSON.stringify(i);t+=4;if(n==t)return i;var o=[];while(t<n){o.push(this.childString(t));t=this.buffer[t+3]}return i+"("+o.join(",")+")"};t.prototype.findChild=function(t,e,n,r){var i=this.buffer,o=-1;for(var a=t;a!=e;a=i[a+3]){if(r!=-1e8){var s=i[a+1],u=i[a+2];if(n>0){if(u>r)o=a;if(u>r)break}else{if(s<r)o=a;if(u>=r)break}}else{o=a;if(n>0)break}}return o};return t}();t("w",Ua);var Fa=function(){function t(t,e,n,r){this.node=t;this.from=e;this.index=n;this._parent=r}Object.defineProperty(t.prototype,"type",{get:function(){return this.node.type},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.node.type.name},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"to",{get:function(){return this.from+this.node.length},enumerable:false,configurable:true});t.prototype.nextChild=function(e,n,r,i){if(i===void 0){i=false}for(var o=this;;){for(var a=o.node,s=a.children,u=a.positions,c=n>0?s.length:-1;e!=c;e+=n){var l=s[e],f=u[e]+o.from;if(r!=-1e8&&(n<0?f>=r:f+l.length<=r))continue;if(l instanceof Ua){var h=l.findChild(0,l.buffer.length,n,r==-1e8?-1e8:r-f);if(h>-1)return new Ha(new Va(o,l,e,f),null,h)}else if(i||(!l.type.isAnonymous||Ga(l))){var d=new t(l,f,e,o);return i||!d.type.isAnonymous?d:d.nextChild(n<0?l.children.length-1:0,n,r)}}if(i||!o.type.isAnonymous)return null;e=o.index+n;o=o._parent;if(!o)return null}};Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.nextChild(0,1,-1e8)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.nextChild(this.node.children.length-1,-1,-1e8)},enumerable:false,configurable:true});t.prototype.childAfter=function(t){return this.nextChild(0,1,t)};t.prototype.childBefore=function(t){return this.nextChild(this.node.children.length-1,-1,t)};t.prototype.nextSignificantParent=function(){var t=this;while(t.type.isAnonymous&&t._parent)t=t._parent;return t};Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent?this._parent.nextSignificantParent():null},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"nextSibling",{get:function(){return this._parent?this._parent.nextChild(this.index+1,1,-1):null},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"prevSibling",{get:function(){return this._parent?this._parent.nextChild(this.index-1,-1,-1):null},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"cursor",{get:function(){return new Ka(this)},enumerable:false,configurable:true});t.prototype.resolve=function(t,e){if(e===void 0){e=0}return this.cursor.moveTo(t,e).node};t.prototype.getChild=function(t,e,n){if(e===void 0){e=null}if(n===void 0){n=null}var r=za(this,t,e,n);return r.length?r[0]:null};t.prototype.getChildren=function(t,e,n){if(e===void 0){e=null}if(n===void 0){n=null}return za(this,t,e,n)};t.prototype.toString=function(){return this.node.toString()};return t}();function za(t,e,n,r){var i=t.cursor,o=[];if(!i.firstChild())return o;if(n!=null)while(!i.type.is(n))if(!i.nextSibling())return o;for(;;){if(r!=null&&i.type.is(r))return o;if(i.type.is(e))o.push(i.node);if(!i.nextSibling())return r==null?o:[]}}var Va=function(){function t(t,e,n,r){this.parent=t;this.buffer=e;this.index=n;this.start=r}return t}();var Ha=function(){function t(t,e,n){this.context=t;this._parent=e;this.index=n;this.type=t.buffer.set.types[t.buffer.buffer[n]]}Object.defineProperty(t.prototype,"name",{get:function(){return this.type.name},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"from",{get:function(){return this.context.start+this.context.buffer.buffer[this.index+1]},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"to",{get:function(){return this.context.start+this.context.buffer.buffer[this.index+2]},enumerable:false,configurable:true});t.prototype.child=function(e,n){var r=this.context.buffer;var i=r.findChild(this.index+4,r.buffer[this.index+3],e,n==-1e8?-1e8:n-this.context.start);return i<0?null:new t(this.context,this,i)};Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.child(1,-1e8)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.child(-1,-1e8)},enumerable:false,configurable:true});t.prototype.childAfter=function(t){return this.child(1,t)};t.prototype.childBefore=function(t){return this.child(-1,t)};Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent||this.context.parent.nextSignificantParent()},enumerable:false,configurable:true});t.prototype.externalSibling=function(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,-1)};Object.defineProperty(t.prototype,"nextSibling",{get:function(){var e=this.context.buffer;var n=e.buffer[this.index+3];if(n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length))return new t(this.context,this._parent,n);return this.externalSibling(1)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"prevSibling",{get:function(){var e=this.context.buffer;var n=this._parent?this._parent.index+4:0;if(this.index==n)return this.externalSibling(-1);return new t(this.context,this._parent,e.findChild(n,this.index,-1,-1e8))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"cursor",{get:function(){return new Ka(this)},enumerable:false,configurable:true});t.prototype.resolve=function(t,e){if(e===void 0){e=0}return this.cursor.moveTo(t,e).node};t.prototype.toString=function(){return this.context.buffer.childString(this.index)};t.prototype.getChild=function(t,e,n){if(e===void 0){e=null}if(n===void 0){n=null}var r=za(this,t,e,n);return r.length?r[0]:null};t.prototype.getChildren=function(t,e,n){if(e===void 0){e=null}if(n===void 0){n=null}return za(this,t,e,n)};return t}();var Ka=function(){function t(t,e){if(e===void 0){e=false}this.full=e;this.buffer=null;this.stack=[];this.index=0;this.bufferNode=null;if(t instanceof Fa){this.yieldNode(t)}else{this._tree=t.context.parent;this.buffer=t.context;for(var n=t._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=t;this.yieldBuf(t.index)}}Object.defineProperty(t.prototype,"name",{get:function(){return this.type.name},enumerable:false,configurable:true});t.prototype.yieldNode=function(t){if(!t)return false;this._tree=t;this.type=t.type;this.from=t.from;this.to=t.to;return true};t.prototype.yieldBuf=function(t,e){this.index=t;var n=this.buffer,r=n.start,i=n.buffer;this.type=e||i.set.types[i.buffer[t]];this.from=r+i.buffer[t+1];this.to=r+i.buffer[t+2];return true};t.prototype.yield=function(t){if(!t)return false;if(t instanceof Fa){this.buffer=null;return this.yieldNode(t)}this.buffer=t.context;return this.yieldBuf(t.index,t.type)};t.prototype.toString=function(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()};t.prototype.enter=function(t,e){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree.node.children.length-1:0,t,e,this.full));var n=this.buffer.buffer;var r=n.findChild(this.index+4,n.buffer[this.index+3],t,e==-1e8?-1e8:e-this.buffer.start);if(r<0)return false;this.stack.push(this.index);return this.yieldBuf(r)};t.prototype.firstChild=function(){return this.enter(1,-1e8)};t.prototype.lastChild=function(){return this.enter(-1,-1e8)};t.prototype.childAfter=function(t){return this.enter(1,t)};t.prototype.childBefore=function(t){return this.enter(-1,t)};t.prototype.parent=function(){if(!this.buffer)return this.yieldNode(this.full?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());var t=this.full?this.buffer.parent:this.buffer.parent.nextSignificantParent();this.buffer=null;return this.yieldNode(t)};t.prototype.sibling=function(t){if(!this.buffer)return!this._tree._parent?false:this.yield(this._tree._parent.nextChild(this._tree.index+t,t,-1e8,this.full));var e=this.buffer.buffer,n=this.stack.length-1;if(t<0){var r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(e.findChild(r,this.index,-1,-1e8))}else{var i=e.buffer[this.index+3];if(i<(n<0?e.buffer.length:e.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,-1e8,this.full)):false};t.prototype.nextSibling=function(){return this.sibling(1)};t.prototype.prevSibling=function(){return this.sibling(-1)};t.prototype.atLastNode=function(t){var e,n;var r,i,o=this.buffer;if(o){if(t>0){if(this.index<o.buffer.buffer.length)return false}else{for(var a=0;a<this.index;a++)if(o.buffer.buffer[a+3]<this.index)return false}r=o.index,i=o.parent}else{e=this._tree,r=e.index,i=e._parent}for(;i;n=i,r=n.index,i=n._parent){for(var s=r+t,u=t<0?-1:i.node.children.length;s!=u;s+=t){var c=i.node.children[s];if(this.full||!c.type.isAnonymous||c instanceof Ua||Ga(c))return false}}return true};t.prototype.move=function(t){if(this.enter(t,-1e8))return true;for(;;){if(this.sibling(t))return true;if(this.atLastNode(t)||!this.parent())return false}};t.prototype.next=function(){return this.move(1)};t.prototype.prev=function(){return this.move(-1)};t.prototype.moveTo=function(t,e){if(e===void 0){e=0}while(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))if(!this.parent())break;for(;;){if(e<0?!this.childBefore(t):!this.childAfter(t))break;if(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t)){this.parent();break}}return this};Object.defineProperty(t.prototype,"node",{get:function(){if(!this.buffer)return this._tree;var t=this.bufferNode,e=null,n=0;if(t&&t.context==this.buffer){t:for(var r=this.index,i=this.stack.length;i>=0;){for(var o=t;o;o=o._parent)if(o.index==r){if(r==this.index)return o;e=o;n=i+1;break t}r=this.stack[--i]}}for(var a=n;a<this.stack.length;a++)e=new Ha(this.buffer,e,this.stack[a]);return this.bufferNode=new Ha(this.buffer,e,this.index)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"tree",{get:function(){return this.buffer?null:this._tree.node},enumerable:false,configurable:true});return t}();function Ga(t){return t.children.some((function(t){return!t.type.isAnonymous||t instanceof Ua||Ga(t)}))}var Ja=function(){function t(t,e){this.buffer=t;this.index=e}Object.defineProperty(t.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"pos",{get:function(){return this.index},enumerable:false,configurable:true});t.prototype.next=function(){this.index-=4};t.prototype.fork=function(){return new t(this.buffer,this.index)};return t}();var $a=8;function Xa(t){var e;var n=t.buffer,r=t.nodeSet,i=t.topID,o=i===void 0?0:i,a=t.maxBufferLength,s=a===void 0?Da:a,u=t.reused,c=u===void 0?[]:u,l=t.minRepeatType,f=l===void 0?r.types.length:l;var h=Array.isArray(n)?new Ja(n,n.length):n;var d=r.types;var p=0;function v(t,e,n,i,o){var a=h.id,u=h.start,l=h.end,y=h.size;var b=u-t;if(y<0){if(y==-1){n.push(c[a]);i.push(b)}else{p=a}h.next();return}var w=d[a],x,k;if(l-u<=s&&(k=m(h.pos-e,o))){var S=new Uint16Array(k.size-k.skip);var A=h.pos-k.size,M=S.length;while(h.pos>A)M=g(k.start,S,M,o);x=new Ua(S,l-k.start,r,o<0?_a.none:d[o]);b=k.start-t}else{var A=h.pos-y;h.next();var C=[],O=[];var I=a>=f?a:-1;while(h.pos>A){if(h.id==I)h.next();else v(u,A,C,O,I)}C.reverse();O.reverse();if(I>-1&&C.length>$a)x=Ya(w,w,C,O,0,C.length,0,s,l-u,p);else x=qa(new ja(w,C,O,l-u),p)}n.push(x);i.push(b)}function m(t,e){var n=h.fork();var r=0,i=0,o=0,a=n.end-s;var u={size:0,start:0,skip:0};t:for(var c=n.pos-t;n.pos>c;){if(n.id==e){u.size=r;u.start=i;u.skip=o;o+=4;r+=4;n.next();continue}var l=n.size,d=n.pos-l;if(l<0||d<c||n.start<a)break;var p=n.id>=f?4:0;var v=n.start;n.next();while(n.pos>d){if(n.size<0)break t;if(n.id>=f)p+=4;n.next()}i=v;r+=l;o+=p}if(e<0||r==t){u.size=r;u.start=i;u.skip=o}return u.size>4?u:undefined}function g(t,e,n,r){var i=h.id,o=h.start,a=h.end,s=h.size;h.next();if(i==r)return n;var u=n;if(s>4){var c=h.pos-(s-4);while(h.pos>c)n=g(t,e,n,r)}if(i<f){e[--n]=u;e[--n]=a-t;e[--n]=o-t;e[--n]=i}return n}var y=[],b=[];while(h.pos>0)v(t.start||0,0,y,b,-1);var w=(e=t.length)!==null&&e!==void 0?e:y.length?b[0]+y[0].length:0;return new ja(d[o],y.reverse(),b.reverse(),w)}function Ya(t,e,n,r,i,o,a,s,u,c){var l=[],f=[];if(u<=s){for(var h=i;h<o;h++){l.push(n[h]);f.push(r[h]-a)}}else{var d=Math.max(s,Math.ceil(u*1.5/$a));for(var p=i;p<o;){var v=p,m=r[p];p++;for(;p<o;p++){var g=r[p]+n[p].length;if(g-m>d)break}if(p==v+1){var y=n[v];if(y instanceof ja&&y.type==e&&y.length>d<<1){for(var b=0;b<y.children.length;b++){l.push(y.children[b]);f.push(y.positions[b]+m-a)}continue}l.push(y)}else if(p==v+1){l.push(n[v])}else{var w=Ya(e,e,n,r,v,p,m,s,r[p-1]+n[p-1].length-m,c);if(e!=_a.none&&!Qa(w.children,e))w=qa(new ja(_a.none,w.children,w.positions,w.length),c);l.push(w)}f.push(m-a)}}return qa(new ja(t,l,f,u),c)}function Qa(t,e){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i.type==e)return true}return false}var Za=function(){function t(t,e,n,r,i){this.from=t;this.to=e;this.tree=n;this.offset=r;this.open=i}Object.defineProperty(t.prototype,"openStart",{get:function(){return(this.open&1)>0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"openEnd",{get:function(){return(this.open&2)>0},enumerable:false,configurable:true});t.applyChanges=function(e,n,r){if(r===void 0){r=128}if(!n.length)return e;var i=[];var o=1,a=e.length?e[0]:null;var s=0,u=0,c=0;for(;;){var l=s<n.length?n[s++]:null;var f=l?l.fromA:1e9;if(f-u>=r)while(a&&a.from<f){var h=a;if(u>=h.from||f<=h.to||c){var d=Math.max(h.from,u)-c,p=Math.min(h.to,f)-c;h=d>=p?null:new t(d,p,h.tree,h.offset+c,(s>0?1:0)|(l?2:0))}if(h)i.push(h);if(a.to>f)break;a=o<e.length?e[o++]:null}if(!l)break;u=l.toA;c=l.toA-l.toB}return i};t.addTree=function(e,n,r){if(n===void 0){n=[]}if(r===void 0){r=false}var i=[new t(0,e.length,e,0,r?2:0)];for(var o=0,a=n;o<a.length;o++){var s=a[o];if(s.to>e.length)i.push(s)}return i};return t}();function ts(t){return new es(t)}var es=function(){function t(t,e){if(e===void 0){e=t.length}this.string=t;this.length=e}t.prototype.get=function(t){return t<0||t>=this.length?-1:this.string.charCodeAt(t)};t.prototype.lineAfter=function(t){if(t<0)return"";var e=this.string.indexOf("\n",t);return this.string.slice(t,e<0?this.length:Math.min(e,this.length))};t.prototype.read=function(t,e){return this.string.slice(t,Math.min(this.length,e))};t.prototype.clip=function(e){return new t(this.string,e)};return t}();var ns=t("l",new La);function rs(t){return dt.define({combine:t?function(e){return e.concat(t)}:undefined})}var is=function(){function t(t,e,n,r){if(r===void 0){r=[]}this.data=t;this.topNode=n;if(!ee.prototype.hasOwnProperty("tree"))Object.defineProperty(ee.prototype,"tree",{get:function(){return ss(this)}});this.parser=e;this.extension=[vs.of(this),ee.languageData.of((function(t,e){return t.facet(os(t,e))}))].concat(r)}t.prototype.isActiveAt=function(t,e){return os(t,e)==this.data};t.prototype.findRegions=function(t){var e=this;var n=t.facet(vs);if((n===null||n===void 0?void 0:n.data)==this.data)return[{from:0,to:t.doc.length}];if(!n||!n.allowsNesting)return[];var r=[];ss(t).iterate({enter:function(t,n,i){if(t.isTop&&t.prop(ns)==e.data){r.push({from:n,to:i});return false}return undefined}});return r};Object.defineProperty(t.prototype,"allowsNesting",{get:function(){return true},enumerable:false,configurable:true});t.prototype.parseString=function(t){var e=z.of(t.split("\n"));var n=this.parser.startParse(new us(e),0,new cs(this.parser,ee.create({doc:e}),[],ja.empty,{from:0,to:t.length},[],null));var r;while(!(r=n.advance())){}return r};return t}();t("L",is);is.setState=qt.define();function os(t,e){var n=t.facet(vs);if(!n)return null;if(!n.allowsNesting)return n.data;var r=ss(t);var i=r.resolve(e,-1);while(i){var o=i.type.prop(ns);if(o)return o;i=i.parent}return n.data}var as=function(t){__extends(e,t);function e(e,n){var r=t.call(this,e,n,n.topNode)||this;r.parser=n;return r}e.define=function(t){var n=rs(t.languageData);return new e(n,t.parser.configure({props:[ns.add((function(t){return t.isTop?n:undefined}))]}))};e.prototype.configure=function(t){return new e(this.data,this.parser.configure(t))};Object.defineProperty(e.prototype,"allowsNesting",{get:function(){return this.parser.hasNested},enumerable:false,configurable:true});return e}(is);t("h",as);function ss(t){var e=t.field(is.state,false);return e?e.tree:ja.empty}var us=function(){function t(t,e){if(e===void 0){e=t.length}this.doc=t;this.length=e;this.cursorPos=0;this.string="";this.prevString="";this.cursor=t.iter()}t.prototype.syncTo=function(t){if(t<this.cursorPos){this.cursor=this.doc.iter();this.cursorPos=0}this.prevString=t==this.cursorPos?this.string:"";this.string=this.cursor.next(t-this.cursorPos).value;this.cursorPos=t+this.string.length;return this.cursorPos-this.string.length};t.prototype.get=function(t){if(t>=this.length)return-1;var e=this.cursorPos-this.string.length;if(t<e||t>=this.cursorPos){if(t<e&&t>=e-this.prevString.length)return this.prevString.charCodeAt(t-(e-this.prevString.length));e=this.syncTo(t)}return this.string.charCodeAt(t-e)};t.prototype.lineAfter=function(t){if(t>=this.length||t<0)return"";var e=this.cursorPos-this.string.length;if(t<e||t>=this.cursorPos)e=this.syncTo(t);return this.cursor.lineBreak?"":this.string.slice(t-e,Math.min(this.length-e,this.string.length))};t.prototype.read=function(t,e){var n=this.cursorPos-this.string.length;if(t<n||e>=this.cursorPos)return this.doc.sliceString(t,e);else return this.string.slice(t-n,e-n)};t.prototype.clip=function(e){return new t(this.doc,e)};return t}();var cs=function(){function t(t,e,n,r,i,o,a){if(n===void 0){n=[]}this.parser=t;this.state=e;this.fragments=n;this.tree=r;this.viewport=i;this.skipped=o;this.scheduleOn=a;this.parse=null;this.tempSkipped=[]}t.prototype.work=function(t,e){if(this.tree!=ja.empty&&(e==null?this.tree.length==this.state.doc.length:this.tree.length>=e)){this.takeTree();return true}if(!this.parse)this.parse=this.parser.startParse(new us(this.state.doc),0,this);var n=Date.now()+t;for(;;){var r=this.parse.advance();if(r){this.fragments=this.withoutTempSkipped(Za.addTree(r));this.parse=null;this.tree=r;return true}else if(e!=null&&this.parse.pos>=e){this.takeTree();return true}if(Date.now()>n)return false}};t.prototype.takeTree=function(){if(this.parse&&this.parse.pos>this.tree.length){this.tree=this.parse.forceFinish();this.fragments=this.withoutTempSkipped(Za.addTree(this.tree,this.fragments,true))}};t.prototype.withoutTempSkipped=function(t){for(var e=void 0;e=this.tempSkipped.pop();)t=ls(t,e.from,e.to);return t};t.prototype.changes=function(e,n){var r=this,i=r.fragments,o=r.tree,a=r.viewport,s=r.skipped;this.takeTree();if(!e.empty){var u=[];e.iterChangedRanges((function(t,e,n,r){return u.push({fromA:t,toA:e,fromB:n,toB:r})}));i=Za.applyChanges(i,u);o=ja.empty;a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)};if(this.skipped.length){s=[];for(var c=0,l=this.skipped;c<l.length;c++){var f=l[c];var h=e.mapPos(f.from,1),d=e.mapPos(f.to,-1);if(h<d)s.push({from:h,to:d})}}}return new t(this.parser,n,i,o,a,s,this.scheduleOn)};t.prototype.updateViewport=function(t){this.viewport=t;var e=this.skipped.length;for(var n=0;n<this.skipped.length;n++){var r=this.skipped[n],i=r.from,o=r.to;if(i<t.to&&o>t.from){this.fragments=ls(this.fragments,i,o);this.skipped.splice(n--,1)}}return this.skipped.length<e};t.prototype.reset=function(){if(this.parse){this.takeTree();this.parse=null}};t.prototype.skipUntilInView=function(t,e){this.skipped.push({from:t,to:e})};t.getSkippingParser=function(t){return{startParse:function(e,n,r){return{pos:n,advance:function(){var i=r;i.tempSkipped.push({from:n,to:e.length});if(t)i.scheduleOn=i.scheduleOn?Promise.all([i.scheduleOn,t]):t;this.pos=e.length;return new ja(_a.none,[],[],e.length-n)},forceFinish:function(){return this.advance()}}}}};t.prototype.movedPast=function(t){return this.tree.length<t&&this.parse&&this.parse.pos>=t};return t}();t("A",cs);cs.skippingParser=cs.getSkippingParser();function ls(t,e,n){return Za.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}var fs=function(){function t(t){this.context=t;this.tree=t.tree}t.prototype.apply=function(e){if(!e.docChanged)return this;var n=this.context.changes(e.changes,e.state);var r=this.context.tree.length==e.startState.doc.length?undefined:Math.max(e.changes.mapPos(this.context.tree.length),n.viewport.to);if(!n.work(25,r))n.takeTree();return new t(n)};t.init=function(e){var n=new cs(e.facet(vs).parser,e,[],ja.empty,{from:0,to:e.doc.length},[],null);if(!n.work(25))n.takeTree();return new t(n)};return t}();is.state=wt.define({create:fs.init,update:function(t,e){for(var n=0,r=e.effects;n<r.length;n++){var i=r[n];if(i.is(is.setState))return i.value}if(e.startState.facet(vs)!=e.state.facet(vs))return fs.init(e.state);return t.apply(e)}});var hs=typeof window!="undefined"&&window.requestIdleCallback||function(t,e){var n=e.timeout;return setTimeout(t,n)};var ds=typeof window!="undefined"&&window.cancelIdleCallback||clearTimeout;var ps=fr.fromClass(function(){function t(t){this.view=t;this.working=-1;this.chunkEnd=-1;this.chunkBudget=-1;this.work=this.work.bind(this);this.scheduleWork()}t.prototype.update=function(t){var e=this.view.state.field(is.state).context;if(t.viewportChanged){if(e.updateViewport(t.view.viewport))e.reset();if(this.view.viewport.to>e.tree.length)this.scheduleWork()}if(t.docChanged){if(this.view.hasFocus)this.chunkBudget+=50;this.scheduleWork()}this.checkAsyncSchedule(e)};t.prototype.scheduleWork=function(){if(this.working>-1)return;var t=this.view.state,e=t.field(is.state),n=e.context.fragments;if(e.tree.length>=t.doc.length&&n.length&&n[0].from==0&&n[0].to>=t.doc.length)return;this.working=hs(this.work,{timeout:500})};t.prototype.work=function(t){this.working=-1;var e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)){this.chunkEnd=e+3e4;this.chunkBudget=3e3}if(this.chunkBudget<=0)return;var n=this.view,r=n.state,i=n.viewport.to,o=r.field(is.state);if(o.tree.length>=i+1e6)return;var a=Math.min(this.chunkBudget,t?Math.max(25,t.timeRemaining()):100);var s=o.context.work(a,i+1e6);this.chunkBudget-=Date.now()-e;if(s||this.chunkBudget<=0||o.context.movedPast(i)){o.context.takeTree();this.view.dispatch({effects:is.setState.of(new fs(o.context))})}if(!s&&this.chunkBudget>0)this.scheduleWork();this.checkAsyncSchedule(o.context)};t.prototype.checkAsyncSchedule=function(t){var e=this;if(t.scheduleOn){t.scheduleOn.then((function(){return e.scheduleWork()}));t.scheduleOn=null}};t.prototype.destroy=function(){if(this.working>=0)ds(this.working)};return t}(),{eventHandlers:{focus:function(){this.scheduleWork()}}});var vs=dt.define({combine:function(t){return t.length?t[0]:null},enables:[is.state,ps]});var ms=function(){function t(t,e){if(e===void 0){e=[]}this.language=t;this.support=e;this.extension=[t,e]}return t}();t("f",ms);var gs=function(){function t(t,e,n,r,i){this.name=t;this.alias=e;this.extensions=n;this.filename=r;this.loadFunc=i;this.support=undefined;this.loading=null}t.prototype.load=function(){var t=this;return this.loading||(this.loading=this.loadFunc().then((function(e){return t.support=e}),(function(e){t.loading=null;throw e})))};t.of=function(e){return new t(e.name,(e.alias||[]).concat(e.name).map((function(t){return t.toLowerCase()})),e.extensions||[],e.filename,e.load)};t.matchFilename=function(t,e){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i.filename&&i.filename.test(e))return i}var o=/\.([^.]+)$/.exec(e);if(o)for(var a=0,s=t;a<s.length;a++){var i=s[a];if(i.extensions.indexOf(o[1])>-1)return i}return null};t.matchLanguageName=function(t,e,n){if(n===void 0){n=true}e=e.toLowerCase();for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.alias.some((function(t){return t==e})))return o}if(n)for(var a=0,s=t;a<s.length;a++){var o=s[a];for(var u=0,c=o.alias;u<c.length;u++){var l=c[u];var f=e.indexOf(l);if(f>-1&&(l.length>2||!/\w/.test(e[f-1])&&!/\w/.test(e[f+l.length])))return o}}return null};return t}();t("z",gs);var ys=t("i",dt.define());var bs=dt.define({combine:function(t){if(!t.length)return"  ";if(!/^(?: +|\t+)$/.test(t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return t[0]}});function ws(t){var e=t.facet(bs);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function xs(t,e){var n="",r=t.tabSize;if(t.facet(bs).charCodeAt(0)==9)while(e>=r){n+="\t";e-=r}for(var i=0;i<e;i++)n+=" ";return n}function ks(t,e){if(t instanceof ee)t=new Ss(t);for(var n=0,r=t.state.facet(ys);n<r.length;n++){var i=r[n];var o=i(t,e);if(o!=null)return o}var a=ss(t.state);return a?Ms(t,a,e):null}var Ss=function(){function t(t,e){if(e===void 0){e={}}this.state=t;this.options=e;this.unit=ws(t)}t.prototype.textAfterPos=function(t){var e,n;var r=(e=this.options)===null||e===void 0?void 0:e.simulateBreak;if(t==r&&((n=this.options)===null||n===void 0?void 0:n.simulateDoubleBreak))return"";return this.state.sliceDoc(t,Math.min(t+100,r!=null&&r>t?r:1e9,this.state.doc.lineAt(t).to))};t.prototype.column=function(t){var e;var n=this.state.doc.lineAt(t),r=n.text.slice(0,t-n.from);var i=this.countColumn(r,t-n.from);var o=((e=this.options)===null||e===void 0?void 0:e.overrideIndentation)?this.options.overrideIndentation(n.from):-1;if(o>-1)i+=o-this.countColumn(r,r.search(/\S/));return i};t.prototype.countColumn=function(t,e){return U(e<0?t:t.slice(0,e),0,this.state.tabSize)};t.prototype.lineIndent=function(t){var e;var n=(e=this.options)===null||e===void 0?void 0:e.overrideIndentation;if(n){var r=n(t.from);if(r>-1)return r}return this.countColumn(t.text,t.text.search(/\S/))};return t}();var As=t("j",new La);function Ms(t,e,n){var r=e.resolve(n);for(var i=r,o=n;;){var a=i.childBefore(o);if(!a)break;if(a.type.isError&&a.from==a.to){r=i;o=a.from}else{i=a;o=i.to+1}}return Is(r,n,t)}function Cs(t){var e,n;return t.pos==((e=t.options)===null||e===void 0?void 0:e.simulateBreak)&&((n=t.options)===null||n===void 0?void 0:n.simulateDoubleBreak)}function Os(t){var e=t.type.prop(As);if(e)return e;var n=t.firstChild,r;if(n&&(r=n.type.prop(La.closedBy))){var i=t.lastChild,o=i&&r.indexOf(i.name)>-1;return function(t){return Ws(t,true,1,undefined,o&&!Cs(t)?i.from:undefined)}}return t.parent==null?Rs:null}function Is(t,e,n){for(;t;t=t.parent){var r=Os(t);if(r)return r(new Es(n,e,t))}return null}function Rs(){return 0}var Es=function(t){__extends(e,t);function e(e,n,r){var i=t.call(this,e.state,e.options)||this;i.base=e;i.pos=n;i.node=r;return i}Object.defineProperty(e.prototype,"textAfter",{get:function(){return this.textAfterPos(this.pos)},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"baseIndent",{get:function(){var t=this.state.doc.lineAt(this.node.from);for(;;){var e=this.node.resolve(t.from);while(e.parent&&e.parent.from==e.from)e=e.parent;if(Ps(e,this.node))break;t=this.state.doc.lineAt(e.from)}return this.lineIndent(t)},enumerable:false,configurable:true});e.prototype.continue=function(){var t=this.node.parent;return t?Is(t,this.pos,this.base):0};return e}(Ss);function Ps(t,e){for(var n=e;n;n=n.parent)if(t==n)return true;return false}function Ds(t){var e;var n=t.node;var r=n.childAfter(n.from),i=n.lastChild;if(!r)return null;var o=(e=t.options)===null||e===void 0?void 0:e.simulateBreak;var a=t.state.doc.lineAt(r.from);var s=o==null||o<=a.from?a.to:Math.min(a.to,o);for(var u=r.to;;){var c=n.childAfter(u);if(!c||c==i)return null;if(!c.type.isSkipped)return c.from<s?r:null;u=c.to}}function Ts(t){var e=t.closing,n=t.align,r=n===void 0?true:n,i=t.units,o=i===void 0?1:i;return function(t){return Ws(t,r,o,e)}}function Ws(t,e,n,r,i){var o=t.textAfter,a=o.match(/^\s*/)[0].length;var s=r&&o.slice(a,a+r.length)==r||i==t.pos+a;var u=e?Ds(t):null;if(u)return s?t.column(u.from):t.column(u.to);return t.baseIndent+(s?0:t.unit*n)}var Ls=t("p",(function(t){return t.baseIndent}));function Ns(t){var e=t===void 0?{}:t,n=e.except,r=e.units,i=r===void 0?1:r;return function(t){var e=n&&n.test(t.textAfter);return t.baseIndent+(e?0:i*t.unit)}}var _s=dt.define();var Bs=t("m",new La);function js(t){var e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function qs(t,e,n){var r=ss(t);if(r.length==0)return null;var i=r.resolve(n);var o=null;for(var a=i;a;a=a.parent){if(a.to<=n||a.from>n)continue;if(o&&a.from<e)break;var s=a.type.prop(Bs);if(s){var u=s(a,t);if(u&&u.from<=n&&u.from>=e&&u.to>n)o=u}}return o}function Us(t,e,n){for(var r=0,i=t.facet(_s);r<i.length;r++){var o=i[r];var a=o(t,e,n);if(a)return a}return qs(t,e,n)}var Fs=function(){function t(t,e,n){this.state=t;this.pos=e;this.explicit=n;this.abortListeners=[]}t.prototype.tokenBefore=function(t){var e=ss(this.state).resolve(this.pos,-1);while(e&&t.indexOf(e.name)<0)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null};t.prototype.matchBefore=function(t){var e=this.state.doc.lineAt(this.pos);var n=Math.max(e.from,this.pos-250);var r=e.text.slice(n-e.from,this.pos-e.from);var i=r.search($s(t,false));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}};Object.defineProperty(t.prototype,"aborted",{get:function(){return this.abortListeners==null},enumerable:false,configurable:true});t.prototype.addEventListener=function(t,e){if(t=="abort"&&this.abortListeners)this.abortListeners.push(e)};return t}();function zs(t){var e=Object.keys(t).join("");var n=/\w/.test(e);if(n)e=e.replace(/\w/g,"");return"["+(n?"\\w":"")+e.replace(/[^\w\s]/g,"\\$&")+"]"}function Vs(t){var e=Object.create(null),n=Object.create(null);for(var r=0,i=t;r<i.length;r++){var o=i[r].label;e[o[0]]=true;for(var a=1;a<o.length;a++)n[o[a]]=true}var s=zs(e)+zs(n)+"*$";return[new RegExp("^"+s),new RegExp(s)]}function Hs(t){var e=t.map((function(t){return typeof t=="string"?{label:t}:t}));var n=e.every((function(t){return/^\w+$/.test(t.label)}))?[/\w*$/,/\w+$/]:Vs(e),r=n[0],i=n[1];return function(t){var n=t.matchBefore(i);return n||t.explicit?{from:n?n.from:t.pos,options:e,span:r}:null}}function Ks(t,e){return function(n){for(var r=ss(n.state).resolve(n.pos,-1);r;r=r.parent)if(t.indexOf(r.name)>-1)return null;return e(n)}}var Gs=function(){function t(t,e,n){this.completion=t;this.source=e;this.match=n}return t}();function Js(t){return t.selection.main.head}function $s(t,e){var n;var r=t.source;var i=e&&r[0]!="^",o=r[r.length-1]!="$";if(!i&&!o)return t;return new RegExp((i?"^":"")+"(?:"+r+")"+(o?"$":""),(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}function Xs(t,e){var n=e.completion.apply||e.completion.label;var r=e.source;if(typeof n=="string"){t.dispatch({changes:{from:r.from,to:r.to,insert:n},selection:{anchor:r.from+n.length}})}else{n(t,e.completion,r.from,r.to)}}var Ys=new WeakMap;function Qs(t){if(!Array.isArray(t))return t;var e=Ys.get(t);if(!e)Ys.set(t,e=Hs(t));return e}var Zs=function(){function t(t){this.pattern=t;this.chars=[];this.folded=[];this.any=[];this.precise=[];this.byWord=[];for(var e=0;e<t.length;){var n=B(t,e),r=q(n);this.chars.push(n);var i=t.slice(e,e+r),o=i.toUpperCase();this.folded.push(B(o==i?i.toLowerCase():o,0));e+=r}this.astral=t.length!=this.chars.length}t.prototype.match=function(t){if(this.pattern.length==0)return[0];if(t.length<this.pattern.length)return null;var e=this,n=e.chars,r=e.folded,i=e.any,o=e.precise,a=e.byWord;if(n.length==1){var s=B(t,0);return s==n[0]?[0,0,q(s)]:s==r[0]?[-200,0,q(s)]:null}var u=t.indexOf(this.pattern);if(u==0)return[0,0,this.pattern.length];var c=n.length,l=0;if(u<0){for(var f=0,h=Math.min(t.length,200);f<h&&l<c;){var d=B(t,f);if(d==n[l]||d==r[l])i[l++]=f;f+=q(d)}if(l<c)return null}var p=0;var v=0,m=false;var g=0,y=-1,b=-1;var w=/[a-z]/.test(t);for(var x=0,h=Math.min(t.length,200),k=0;x<h&&v<c;){var d=B(t,x);if(u<0){if(p<c&&d==n[p])o[p++]=x;if(g<c){if(d==n[g]||d==r[g]){if(g==0)y=x;b=x;g++}else{g=0}}}var S=void 0,A=d<255?d>=48&&d<=57||d>=97&&d<=122?2:d>=65&&d<=90?1:0:(S=j(d))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;if((A==1&&w||k==0&&A!=0)&&(n[v]==d||r[v]==d&&(m=true)))a[v++]=x;k=A;x+=q(d)}if(v==c&&a[0]==0)return this.result(-100+(m?-200:0),a,t);if(g==c&&y==0)return[-200,0,b];if(u>-1)return[-700,u,u+this.pattern.length];if(g==c)return[-200+-700,y,b];if(v==c)return this.result(-100+(m?-200:0)+-700,a,t);return n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,t)};t.prototype.result=function(t,e,n){var r=[t],i=1;for(var o=0,a=e;o<a.length;o++){var s=a[o];var u=s+(this.astral?q(B(n,s)):1);if(i>1&&r[i-1]==s)r[i-1]=u;else{r[i++]=s;r[i++]=u}}return r};return t}();var tu=dt.define({combine:function(t){return ne(t,{activateOnTyping:true,override:null,maxRenderedOptions:100,defaultKeymap:true},{defaultKeymap:function(t,e){return t&&e}})}});var eu=300;var nu=Wo.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{cursor:"pointer",padding:"1px 1em 1px 3px",lineHeight:1.2},"& > li[aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"}}},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:eu+"px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});function ru(t,e,n){var r;var i=document.createElement("ul");i.id=e;i.setAttribute("role","listbox");i.setAttribute("aria-expanded","true");for(var o=n.from;o<n.to;o++){var a=t[o],s=a.completion,u=a.match;var c=i.appendChild(document.createElement("li"));c.id=e+"-"+o;var l=c.appendChild(document.createElement("div"));l.classList.add("cm-completionIcon");if(s.type)(r=l.classList).add.apply(r,s.type.split(/\s+/g).map((function(t){return"cm-completionIcon-"+t})));l.setAttribute("aria-hidden","true");var f=c.appendChild(document.createElement("span"));f.className="cm-completionLabel";var h=s.label,d=s.detail,p=0;for(var v=1;v<u.length;){var m=u[v++],g=u[v++];if(m>p)f.appendChild(document.createTextNode(h.slice(p,m)));var y=f.appendChild(document.createElement("span"));y.appendChild(document.createTextNode(h.slice(m,g)));y.className="cm-completionMatchedText";p=g}if(p<h.length)f.appendChild(document.createTextNode(h.slice(p)));if(d){var b=c.appendChild(document.createElement("span"));b.className="cm-completionDetail";b.textContent=d}c.setAttribute("role","option")}if(n.from)i.classList.add("cm-completionListIncompleteTop");if(n.to<t.length)i.classList.add("cm-completionListIncompleteBottom");return i}function iu(t,e){var n=document.createElement("div");n.className="cm-tooltip cm-completionInfo";var r=t.completion.info;if(typeof r=="string"){n.textContent=r}else{var i=r(t.completion);if(i.then)i.then((function(t){return n.appendChild(t)}),(function(t){return or(e.state,t,"completion info")}));else n.appendChild(i)}return n}function ou(t,e,n){if(t<=n)return{from:0,to:t};if(e<=t>>1){var r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}var i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}var au=function(){function t(t,e){var n=this;this.view=t;this.stateField=e;this.info=null;this.placeInfo={read:function(){return n.measureInfo()},write:function(t){return n.positionInfo(t)},key:this};var r=t.state.field(e);var i=r.open,o=i.options,a=i.selected;var s=t.state.facet(tu);this.range=ou(o.length,a,s.maxRenderedOptions);this.dom=document.createElement("div");this.dom.className="cm-tooltip-autocomplete";this.dom.addEventListener("mousedown",(function(e){for(var r=e.target,i=void 0;r&&r!=n.dom;r=r.parentNode){if(r.nodeName=="LI"&&(i=/-(\d+)$/.exec(r.id))&&+i[1]<o.length){Xs(t,o[+i[1]]);e.preventDefault();return}}}));this.list=this.dom.appendChild(ru(o,r.id,this.range));this.list.addEventListener("scroll",(function(){if(n.info)n.view.requestMeasure(n.placeInfo)}))}t.prototype.mount=function(){this.updateSel()};t.prototype.update=function(t){if(t.state.field(this.stateField)!=t.startState.field(this.stateField))this.updateSel()};t.prototype.positioned=function(){if(this.info)this.view.requestMeasure(this.placeInfo)};t.prototype.updateSel=function(){var t=this;var e=this.view.state.field(this.stateField),n=e.open;if(n.selected<this.range.from||n.selected>=this.range.to){this.range=ou(n.options.length,n.selected,this.view.state.facet(tu).maxRenderedOptions);this.list.remove();this.list=this.dom.appendChild(ru(n.options,e.id,this.range));this.list.addEventListener("scroll",(function(){if(t.info)t.view.requestMeasure(t.placeInfo)}))}if(this.updateSelectedOption(n.selected)){if(this.info){this.info.remove();this.info=null}var r=n.options[n.selected];if(r.completion.info){this.info=this.dom.appendChild(iu(r,this.view));this.view.requestMeasure(this.placeInfo)}}};t.prototype.updateSelectedOption=function(t){var e=null;for(var n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++){if(r==t){if(!n.hasAttribute("aria-selected")){n.setAttribute("aria-selected","true");e=n}}else{if(n.hasAttribute("aria-selected"))n.removeAttribute("aria-selected")}}if(e)uu(this.list,e);return e};t.prototype.measureInfo=function(){var t=this.dom.querySelector("[aria-selected]");if(!t)return null;var e=this.dom.getBoundingClientRect();var n=t.getBoundingClientRect().top-e.top;if(n<0||n>this.list.clientHeight-10)return null;var r=this.view.textDirection==Rr.RTL;var i=e.left,o=innerWidth-e.right;if(r&&i<Math.min(eu,o))r=false;else if(!r&&o<Math.min(eu,i))r=true;return{top:n,left:r}};t.prototype.positionInfo=function(t){if(this.info&&t){this.info.style.top=t.top+"px";this.info.classList.toggle("cm-completionInfo-left",t.left);this.info.classList.toggle("cm-completionInfo-right",!t.left)}};return t}();function su(t){return function(e){return new au(e,t)}}function uu(t,e){var n=t.getBoundingClientRect();var r=e.getBoundingClientRect();if(r.top<n.top)t.scrollTop-=n.top-r.top;else if(r.bottom>n.bottom)t.scrollTop+=r.bottom-n.bottom}var cu=300;function lu(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function fu(t,e){var n=[],r=0;for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.hasResult()){if(a.result.filter===false){for(var s=0,u=a.result.options;s<u.length;s++){var c=u[s];n.push(new Gs(c,a,[1e9-r++]))}}else{var l=new Zs(e.sliceDoc(a.from,a.to)),f=void 0;for(var h=0,d=a.result.options;h<d.length;h++){var c=d[h];if(f=l.match(c.label)){if(c.boost!=null)f[0]+=c.boost;n.push(new Gs(c,a,f))}}}}}n.sort(yu);var p=[],v=null;for(var m=0,g=n.sort(yu);m<g.length;m++){var y=g[m];if(p.length==cu)break;if(!v||v.label!=y.completion.label||v.detail!=y.completion.detail)p.push(y);else if(lu(y.completion)>lu(v))p[p.length-1]=y;v=y.completion}return p}var hu=function(){function t(t,e,n,r,i){this.options=t;this.attrs=e;this.tooltip=n;this.timestamp=r;this.selected=i}t.prototype.setSelected=function(e,n){return e==this.selected||e>=this.options.length?this:new t(this.options,vu(n,e),this.tooltip,this.timestamp,e)};t.build=function(e,n,r,i){var o=fu(e,n);if(!o.length)return null;var a=0;if(i&&i.selected){var s=i.options[i.selected].completion;for(var u=0;u<o.length&&!a;u++){if(o[u].completion==s)a=u}}return new t(o,vu(r,a),{pos:e.reduce((function(t,e){return e.hasResult()?Math.min(t,e.from):t}),1e8),create:su(Mu)},i?i.timestamp:Date.now(),a)};t.prototype.map=function(e){return new t(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)};return t}();var du=function(){function t(t,e,n){this.active=t;this.id=e;this.open=n}t.start=function(){return new t(gu,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)};t.prototype.update=function(e){var n=this;var r=e.state,i=r.facet(tu);var o=i.override||r.languageDataAt("autocomplete",Js(r)).map(Qs);var a=o.map((function(t){var r=n.active.find((function(e){return e.source==t}))||new bu(t,n.active.some((function(t){return t.state!=0}))?1:0);return r.update(e,i)}));if(a.length==this.active.length&&a.every((function(t,e){return t==n.active[e]})))a=this.active;var s=e.selection||a.some((function(t){return t.hasResult()&&e.changes.touchesRange(t.from,t.to)}))||!pu(a,this.active)?hu.build(a,r,this.id,this.open):this.open&&e.docChanged?this.open.map(e.changes):this.open;if(!s&&a.every((function(t){return t.state!=1}))&&a.some((function(t){return t.hasResult()})))a=a.map((function(t){return t.hasResult()?new bu(t.source,0):t}));for(var u=0,c=e.effects;u<c.length;u++){var l=c[u];if(l.is(Au))s=s&&s.setSelected(l.value,this.id)}return a==this.active&&s==this.open?this:new t(a,this.id,s)};Object.defineProperty(t.prototype,"tooltip",{get:function(){return this.open?this.open.tooltip:null},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"attrs",{get:function(){return this.open?this.open.attrs:mu},enumerable:false,configurable:true});return t}();function pu(t,e){if(t==e)return true;for(var n=0,r=0;;){while(n<t.length&&!t[n].hasResult)n++;while(r<e.length&&!e[r].hasResult)r++;var i=n==t.length,o=r==e.length;if(i||o)return i==o;if(t[n++].result!=e[r++].result)return false}}function vu(t,e){return{"aria-autocomplete":"list","aria-activedescendant":t+"-"+e,"aria-owns":t}}var mu={"aria-autocomplete":"list"},gu=[];function yu(t,e){var n=e.match[0]-t.match[0];if(n)return n;var r=t.completion.label,i=e.completion.label;return r<i?-1:r==i?0:1}var bu=function(){function t(t,e,n){if(n===void 0){n=-1}this.source=t;this.state=e;this.explicitPos=n}t.prototype.hasResult=function(){return false};t.prototype.update=function(e,n){var r=e.annotation(Ut.userEvent),i=this;if(r=="input"||r=="delete")i=i.handleUserEvent(e,r,n);else if(e.docChanged)i=i.handleChange(e);else if(e.selection&&i.state!=0)i=new t(i.source,0);for(var o=0,a=e.effects;o<a.length;o++){var s=a[o];if(s.is(xu))i=new t(i.source,1,s.value?Js(e.state):-1);else if(s.is(ku))i=new t(i.source,0);else if(s.is(Su))for(var u=0,c=s.value;u<c.length;u++){var l=c[u];if(l.source==i.source)i=l}}return i};t.prototype.handleUserEvent=function(e,n,r){return n=="delete"||!r.activateOnTyping?this.map(e.changes):new t(this.source,1)};t.prototype.handleChange=function(e){return e.changes.touchesRange(Js(e.startState))?new t(this.source,0):this.map(e.changes)};t.prototype.map=function(e){return e.empty||this.explicitPos<0?this:new t(this.source,this.state,e.mapPos(this.explicitPos))};return t}();var wu=function(t){__extends(e,t);function e(e,n,r,i,o,a){var s=t.call(this,e,2,n)||this;s.result=r;s.from=i;s.to=o;s.span=a;return s}e.prototype.hasResult=function(){return true};e.prototype.handleUserEvent=function(t,n,r){var i=t.changes.mapPos(this.from),o=t.changes.mapPos(this.to,1);var a=Js(t.state);if((this.explicitPos>-1?a<i:a<=i)||a>o)return new bu(this.source,n=="input"&&r.activateOnTyping?1:0);var s=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos);if(this.span&&(i==o||this.span.test(t.state.sliceDoc(i,o))))return new e(this.source,s,this.result,i,o,this.span);return new bu(this.source,1,s)};e.prototype.handleChange=function(t){return t.changes.touchesRange(this.from,this.to)?new bu(this.source,0):this.map(t.changes)};e.prototype.map=function(t){return t.empty?this:new e(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1),this.span)};return e}(bu);var xu=qt.define();var ku=qt.define();var Su=qt.define({map:function(t,e){return t.map((function(t){return t.map(e)}))}});var Au=qt.define();var Mu=wt.define({create:function(){return du.start()},update:function(t,e){return t.update(e)},provide:function(t){return[Pa.from(t,(function(t){return t.tooltip})),Wo.contentAttributes.from(t,(function(t){return t.attrs}))]}});var Cu=75;function Ou(t,e){if(e===void 0){e="option"}return function(n){var r=n.state.field(Mu,false);if(!r||!r.open||Date.now()-r.open.timestamp<Cu)return false;var i=1,o;if(e=="page"&&(o=n.dom.querySelector(".cm-tooltip-autocomplete")))i=Math.max(2,Math.floor(o.offsetHeight/o.firstChild.offsetHeight));var a=r.open.selected+i*(t?1:-1),s=r.open.options.length;if(a<0)a=e=="page"?0:s-1;else if(a>=s)a=e=="page"?s-1:0;n.dispatch({effects:Au.of(a)});return true}}var Iu=function(t){var e=t.state.field(Mu,false);if(!e||!e.open||Date.now()-e.open.timestamp<Cu)return false;Xs(t,e.open.options[e.open.selected]);return true};var Ru=function(t){var e=t.state.field(Mu,false);if(!e)return false;t.dispatch({effects:xu.of(true)});return true};var Eu=function(t){var e=t.state.field(Mu,false);if(!e||!e.active.some((function(t){return t.state!=0})))return false;t.dispatch({effects:ku.of(null)});return true};var Pu=function(){function t(t,e){this.active=t;this.context=e;this.time=Date.now();this.updates=[];this.done=undefined}return t}();var Du=50,Tu=50,Wu=1e3;var Lu=fr.fromClass(function(){function t(t){this.view=t;this.debounceUpdate=-1;this.running=[];this.debounceAccept=-1;this.composing=0;for(var e=0,n=t.state.field(Mu).active;e<n.length;e++){var r=n[e];if(r.state==1)this.startQuery(r)}}t.prototype.update=function(t){var e;var n=this;var r=t.state.field(Mu);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Mu)==r)return;var i=t.transactions.some((function(t){var e=t.annotation(Ut.userEvent);return(t.selection||t.docChanged)&&e!="input"&&e!="delete"}));for(var o=0;o<this.running.length;o++){var a=this.running[o];if(i||a.updates.length+t.transactions.length>Tu&&a.time-Date.now()>Wu){for(var s=0,u=a.context.abortListeners;s<u.length;s++){var c=u[s];try{c()}catch(d){or(this.view.state,d)}}a.context.abortListeners=null;this.running.splice(o--,1)}else{(e=a.updates).push.apply(e,t.transactions)}}if(this.debounceUpdate>-1)clearTimeout(this.debounceUpdate);this.debounceUpdate=r.active.some((function(t){return t.state==1&&!n.running.some((function(e){return e.active.source==t.source}))}))?setTimeout((function(){return n.startUpdate()}),Du):-1;if(this.composing!=0)for(var l=0,f=t.transactions;l<f.length;l++){var h=f[l];if(h.annotation(Ut.userEvent)=="input")this.composing=2;else if(this.composing==2&&h.selection)this.composing=3}};t.prototype.startUpdate=function(){this.debounceUpdate=-1;var t=this.view.state,e=t.field(Mu);var n=function(t){if(t.state==1&&!r.running.some((function(e){return e.active.source==t.source})))r.startQuery(t)};var r=this;for(var i=0,o=e.active;i<o.length;i++){var a=o[i];n(a)}};t.prototype.startQuery=function(t){var e=this;var n=this.view.state,r=Js(n);var i=new Fs(n,r,t.explicitPos==r);var o=new Pu(t,i);this.running.push(o);Promise.resolve(t.source(i)).then((function(t){if(!o.context.aborted){o.done=t||null;e.scheduleAccept()}}),(function(t){e.view.dispatch({effects:ku.of(null)});or(e.view.state,t)}))};t.prototype.scheduleAccept=function(){var t=this;if(this.running.every((function(t){return t.done!==undefined})))this.accept();else if(this.debounceAccept<0)this.debounceAccept=setTimeout((function(){return t.accept()}),Du)};t.prototype.accept=function(){var t;if(this.debounceAccept>-1)clearTimeout(this.debounceAccept);this.debounceAccept=-1;var e=[];var n=this.view.state.facet(tu);var r=function(r){var a=i.running[r];if(a.done===undefined)return o=r,"continue";i.running.splice(r--,1);if(a.done){var s=new wu(a.active.source,a.active.explicitPos,a.done,a.done.from,(t=a.done.to)!==null&&t!==void 0?t:Js(a.updates.length?a.updates[0].startState:i.view.state),a.done.span&&a.done.filter!==false?$s(a.done.span,true):null);for(var u=0,c=a.updates;u<c.length;u++){var l=c[u];s=s.update(l,n)}if(s.hasResult()){e.push(s);return o=r,"continue"}}var f=i.view.state.field(Mu).active.find((function(t){return t.source==a.active.source}));if(f&&f.state==1){if(a.done==null){var s=new bu(a.active.source,0);for(var h=0,d=a.updates;h<d.length;h++){var l=d[h];s=s.update(l,n)}if(s.state!=1)e.push(s)}else{i.startQuery(f)}}o=r};var i=this,o;for(var a=0;a<this.running.length;a++){r(a);a=o}if(e.length)this.view.dispatch({effects:Su.of(e)})};return t}(),{eventHandlers:{compositionstart:function(){this.composing=1},compositionend:function(){var t=this;if(this.composing==3){setTimeout((function(){return t.view.dispatch({effects:xu.of(false)})}),20)}this.composing=0}}});var Nu=function(){function t(t,e,n,r){this.field=t;this.line=e;this.from=n;this.to=r}return t}();var _u=function(){function t(t,e,n){this.field=t;this.from=e;this.to=n}t.prototype.map=function(e){return new t(this.field,e.mapPos(this.from,-1),e.mapPos(this.to,1))};return t}();var Bu=function(){function t(t,e){this.lines=t;this.fieldPositions=e}t.prototype.instantiate=function(t,e){var n=[],r=[e];var i=t.doc.lineAt(e),o=/^\s*/.exec(i.text)[0];for(var a=0,s=this.lines;a<s.length;a++){var u=s[a];if(n.length){var c=o,l=/^\t*/.exec(u)[0].length;for(var f=0;f<l;f++)c+=t.facet(bs);r.push(e+c.length-l);u=c+u.slice(l)}n.push(u);e+=u.length+1}var h=this.fieldPositions.map((function(t){return new _u(t.field,r[t.line]+t.from,r[t.line]+t.to)}));return{text:n,ranges:h}};t.parse=function(e){var n=[];var r=[],i=[],o;for(var a=0,s=e.split(/\r\n?|\n/);a<s.length;a++){var u=s[a];while(o=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(u)){var c=o[1]?+o[1]:null,l=o[2]||o[3],f=-1;for(var h=0;h<n.length;h++){if(c!=null?n[h].seq==c:l?n[h].name==l:false)f=h}if(f<0){var d=0;while(d<n.length&&(c==null||n[d].seq!=null&&n[d].seq<c))d++;n.splice(d,0,{seq:c,name:l||null});f=d;for(var p=0,v=i;p<v.length;p++){var m=v[p];if(m.field>=f)m.field++}}i.push(new Nu(f,r.length,o.index,o.index+l.length));u=u.slice(0,o.index)+l+u.slice(o.index+o[0].length)}r.push(u)}return new t(r,i)};return t}();var ju=qn.widget({widget:new(function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.toDOM=function(){var t=document.createElement("span");t.className="cm-snippetFieldPosition";return t};e.prototype.ignoreEvent=function(){return false};return e}(Bn))});var qu=qn.mark({class:"cm-snippetField"});var Uu=function(){function t(t,e){this.ranges=t;this.active=e;this.deco=qn.set(t.map((function(t){return(t.from==t.to?ju:qu).range(t.from,t.to)})))}t.prototype.map=function(e){return new t(this.ranges.map((function(t){return t.map(e)})),this.active)};t.prototype.selectionInsideField=function(t){var e=this;return t.ranges.every((function(t){return e.ranges.some((function(n){return n.field==e.active&&n.from<=t.from&&n.to>=t.to}))}))};return t}();var Fu=qt.define({map:function(t,e){return t&&t.map(e)}});var zu=qt.define();var Vu=wt.define({create:function(){return null},update:function(t,e){for(var n=0,r=e.effects;n<r.length;n++){var i=r[n];if(i.is(Fu))return i.value;if(i.is(zu)&&t)return new Uu(t.ranges,i.value)}if(t&&e.docChanged)t=t.map(e.changes);if(t&&e.selection&&!t.selectionInsideField(e.selection))t=null;return t},provide:function(t){return Wo.decorations.from(t,(function(t){return t?t.deco:qn.none}))}});function Hu(t,e){return ct.create(t.filter((function(t){return t.field==e})).map((function(t){return ct.range(t.from,t.to)})))}function Ku(t){var e=Bu.parse(t);return function(t,n,r,i){var o=e.instantiate(t.state,r),a=o.text,s=o.ranges;var u={changes:{from:r,to:i,insert:z.of(a)}};if(s.length)u.selection=Hu(s,0);if(s.length>1){var c=new Uu(s,0);var l=u.effects=[Fu.of(c)];if(t.state.field(Vu,false)===undefined)l.push(qt.appendConfig.of([Vu.init((function(){return c})),Zu,ec,nu]))}t.dispatch(t.state.update(u))}}function Gu(t){return function(e){var n=e.state,r=e.dispatch;var i=n.field(Vu,false);if(!i||t<0&&i.active==0)return false;var o=i.active+t,a=t>0&&!i.ranges.some((function(e){return e.field==o+t}));r(n.update({selection:Hu(i.ranges,o),effects:Fu.of(a?null:new Uu(i.ranges,o))}));return true}}var Ju=function(t){var e=t.state,n=t.dispatch;var r=e.field(Vu,false);if(!r)return false;n(e.update({effects:Fu.of(null)}));return true};var $u=Gu(1);var Xu=Gu(-1);var Yu=[{key:"Tab",run:$u,shift:Xu},{key:"Escape",run:Ju}];var Qu=dt.define({combine:function(t){return t.length?t[0]:Yu}});var Zu=St.override(Ko.compute([Qu],(function(t){return t.facet(Qu)})));function tc(t,e){return Object.assign(Object.assign({},e),{apply:Ku(t)})}var ec=Wo.domEventHandlers({mousedown:function(t,e){var n=e.state.field(Vu,false),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return false;var i=n.ranges.find((function(t){return t.from<=r&&t.to>=r}));if(!i||i.field==n.active)return false;e.dispatch({selection:Hu(n.ranges,i.field),effects:Fu.of(n.ranges.some((function(t){return t.field>i.field}))?new Uu(n.ranges,i.field):null)});return true}});var nc=function(t){var e=[],n=Object.create(null);var r=t.state.charCategorizer(t.pos);var i=Math.max(0,t.pos-5e4),o=Math.min(t.state.doc.length,i+5e4*2);var a=t.pos;for(var s=t.state.doc.iterRange(i,o),u=i;!s.next().done;){var c=s.value,l=-1;for(var f=0;;f++){if(f<c.length&&r(c[f])==Xt.Word){if(l<0)l=f}else if(l>-1){if(u+l<=t.pos&&u+f>=t.pos){a=u+l}else{var h=c.slice(l,f);if(!n[h]){e.push({type:"text",label:h});n[h]=true}}l=-1}if(f==c.length)break}u+=c.length}return{from:a,options:e,span:/^\w*/}};function rc(t){if(t===void 0){t={}}return[Mu,tu.of(t),Lu,oc,nu]}var ic=[{key:"Ctrl-Space",run:Ru},{key:"Escape",run:Eu},{key:"ArrowDown",run:Ou(true)},{key:"ArrowUp",run:Ou(false)},{key:"PageDown",run:Ou(true,"page")},{key:"PageUp",run:Ou(false,"page")},{key:"Enter",run:Iu}];var oc=St.override(Ko.computeN([tu],(function(t){return t.facet(tu).defaultKeymap?[ic]:[]})));var ac={brackets:["(","[","{","'",'"'],before:")]}'\":;>"};var sc=qt.define({map:function(t,e){var n=e.mapPos(t,-1,Z.TrackAfter);return n==null?undefined:n}});var uc=qt.define({map:function(t,e){return e.mapPos(t)}});var cc=new(function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(le));cc.startSide=1;cc.endSide=-1;var lc=wt.define({create:function(){return pe.empty},update:function(t,e){if(e.selection){var n=e.state.doc.lineAt(e.selection.main.head).from;var r=e.startState.doc.lineAt(e.startState.selection.main.head).from;if(n!=e.changes.mapPos(r,-1))t=pe.empty}t=t.map(e.changes);var i=function(e){if(e.is(sc))t=t.update({add:[cc.range(e.value,e.value+1)]});else if(e.is(uc))t=t.update({filter:function(t){return t!=e.value}})};for(var o=0,a=e.effects;o<a.length;o++){var s=a[o];i(s)}return t}});function fc(){return[Wo.inputHandler.of(vc),lc]}var hc="()[]{}<>";function dc(t){for(var e=0;e<hc.length;e+=2)if(hc.charCodeAt(e)==t)return hc.charAt(e+1);return j(t<128?t:t+1)}function pc(t,e){return t.languageDataAt("closeBrackets",e)[0]||ac}function vc(t,e,n,r){if(t.composing)return false;var i=t.state.selection.main;if(r.length>2||r.length==2&&q(B(r,0))==1||e!=i.from||n!=i.to)return false;var o=yc(t.state,r);if(!o)return false;t.dispatch(o);return true}var mc=function(t){var e=t.state,n=t.dispatch;var r=pc(e,e.selection.main.head);var i=r.brackets||ac.brackets;var o=null,a=e.changeByRange((function(t){if(t.empty){var n=xc(e.doc,t.head);for(var r=0,a=i;r<a.length;r++){var s=a[r];if(s==n&&wc(e.doc,t.head)==dc(B(s,0)))return{changes:{from:t.head-s.length,to:t.head+s.length},range:ct.cursor(t.head-s.length),annotations:Ut.userEvent.of("delete")}}}return{range:o=t}}));if(!o)n(e.update(a,{scrollIntoView:true}));return!o};var gc=[{key:"Backspace",run:mc}];function yc(t,e){var n=pc(t,t.selection.main.head);var r=n.brackets||ac.brackets;for(var i=0,o=r;i<o.length;i++){var a=o[i];var s=dc(B(a,0));if(e==a)return s==a?Ac(t,a,r.indexOf(a+a+a)>-1):kc(t,a,s,n.before||ac.before);if(e==s&&bc(t,t.selection.main.from))return Sc(t,a,s)}return null}function bc(t,e){var n=false;t.field(lc).between(0,t.doc.length,(function(t){if(t==e)n=true}));return n}function wc(t,e){var n=t.sliceString(e,e+2);return n.slice(0,q(B(n,0)))}function xc(t,e){var n=t.sliceString(e-2,e);return q(B(n,0))==n.length?n:n.slice(1)}function kc(t,e,n,r){var i=null,o=t.changeByRange((function(o){if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:sc.of(o.to+e.length),range:ct.range(o.anchor+e.length,o.head+e.length)};var a=wc(t.doc,o.head);if(!a||/\s/.test(a)||r.indexOf(a)>-1)return{changes:{insert:e+n,from:o.head},effects:sc.of(o.head+e.length),range:ct.cursor(o.head+e.length)};return{range:i=o}}));return i?null:t.update(o,{scrollIntoView:true,annotations:Ut.userEvent.of("input")})}function Sc(t,e,n){var r=null,i=t.selection.ranges.map((function(e){if(e.empty&&wc(t.doc,e.head)==n)return ct.cursor(e.head+n.length);return r=e}));return r?null:t.update({selection:ct.create(i,t.selection.mainIndex),scrollIntoView:true,effects:t.selection.ranges.map((function(t){var e=t.from;return uc.of(e)}))})}function Ac(t,e,n){var r=null,i=t.changeByRange((function(i){if(!i.empty)return{changes:[{insert:e,from:i.from},{insert:e,from:i.to}],effects:sc.of(i.to+e.length),range:ct.range(i.anchor+e.length,i.head+e.length)};var o=i.head,a=wc(t.doc,o);if(a==e){if(Mc(t,o)){return{changes:{insert:e+e,from:o},effects:sc.of(o+e.length),range:ct.cursor(o+e.length)}}else if(bc(t,o)){var s=n&&t.sliceDoc(o,o+e.length*3)==e+e+e;return{range:ct.cursor(o+e.length*(s?3:1)),effects:uc.of(o)}}}else if(n&&t.sliceDoc(o-2*e.length,o)==e+e&&Mc(t,o-2*e.length)){return{changes:{insert:e+e+e+e,from:o},effects:sc.of(o+e.length),range:ct.cursor(o+e.length)}}else if(t.charCategorizer(o)(a)!=Xt.Word){var u=t.sliceDoc(o-1,o);if(u!=e&&t.charCategorizer(o)(u)!=Xt.Word)return{changes:{insert:e+e,from:o},effects:sc.of(o+e.length),range:ct.cursor(o+e.length)}}return{range:r=i}}));return r?null:t.update(i,{scrollIntoView:true,annotations:Ut.userEvent.of("input")})}function Mc(t,e){var n=ss(t).resolve(e+1);return n.parent&&n.from==e}var Cc=Wo.baseTheme({".cm-matchingBracket":{color:"#0b0"},".cm-nonmatchingBracket":{color:"#a22"}});var Oc=1e4,Ic="()[]{}";var Rc=dt.define({combine:function(t){return ne(t,{afterCursor:true,brackets:Ic,maxScanDistance:Oc})}});var Ec=qn.mark({class:"cm-matchingBracket"}),Pc=qn.mark({class:"cm-nonmatchingBracket"});var Dc=wt.define({create:function(){return qn.none},update:function(t,e){if(!e.docChanged&&!e.selection)return t;var n=[];var r=e.state.facet(Rc);for(var i=0,o=e.state.selection.ranges;i<o.length;i++){var a=o[i];if(!a.empty)continue;var s=Nc(e.state,a.head,-1,r)||a.head>0&&Nc(e.state,a.head-1,1,r)||r.afterCursor&&(Nc(e.state,a.head,1,r)||a.head<e.state.doc.length&&Nc(e.state,a.head+1,-1,r));if(!s)continue;var u=s.matched?Ec:Pc;n.push(u.range(s.start.from,s.start.to));if(s.end)n.push(u.range(s.end.from,s.end.to))}return qn.set(n,true)},provide:function(t){return Wo.decorations.from(t)}});var Tc=[Dc,Cc];function Wc(t){if(t===void 0){t={}}return[Rc.of(t),Tc]}function Lc(t,e,n){var r=t.prop(e<0?La.openedBy:La.closedBy);if(r)return r;if(t.name.length==1){var i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Nc(t,e,n,r){if(r===void 0){r={}}var i=r.maxScanDistance||Oc,o=r.brackets||Ic;var a=ss(t),s=a.resolve(e,n),u;if(u=Lc(s.type,n,o))return _c(t,e,n,s,u,o);else return Bc(t,e,n,a,s.type,i,o)}function _c(t,e,n,r,i,o){var a=r.parent,s={from:r.from,to:r.to};var u=0,c=a===null||a===void 0?void 0:a.cursor;if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do{if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&i.indexOf(c.type.name)>-1){return{start:s,end:{from:c.from,to:c.to},matched:true}}else if(Lc(c.type,n,o)){u++}else if(Lc(c.type,-n,o)){u--;if(u==0)return{start:s,end:{from:c.from,to:c.to},matched:false}}}}while(n<0?c.prevSibling():c.nextSibling());return{start:s,matched:false}}function Bc(t,e,n,r,i,o,a){var s=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1);var u=a.indexOf(s);if(u<0||u%2==0!=n>0)return null;var c={from:n<0?e-1:e,to:n>0?e+1:e};var l=t.doc.iterRange(e,n>0?t.doc.length:0),f=0;for(var h=0;!l.next().done&&h<=o;){var d=l.value;if(n<0)h+=d.length;var p=e+h*n;for(var v=n>0?0:d.length-1,m=n>0?d.length:-1;v!=m;v+=n){var g=a.indexOf(d[v]);if(g<0||r.resolve(p+v,1).type!=i)continue;if(g%2==0==n>0){f++}else if(f==1){return{start:c,end:{from:p+v,to:p+v+1},matched:g>>1==u>>1}}else{f--}}if(n>0)h+=d.length}return l.done?{start:c,matched:false}:null}function jc(t,e){return ct.create(t.ranges.map(e),t.mainIndex)}function qc(t,e){return t.update({selection:e,scrollIntoView:true,annotations:Ut.userEvent.of("keyboardselection")})}function Uc(t,e){var n=t.state,r=t.dispatch;var i=jc(n.selection,e);if(i.eq(n.selection))return false;r(qc(n,i));return true}function Fc(t,e){return ct.cursor(e?t.to:t.from)}function zc(t,e){return Uc(t,(function(n){return n.empty?t.moveByChar(n,e):Fc(n,e)}))}var Vc=function(t){return zc(t,t.textDirection!=Rr.LTR)};var Hc=function(t){return zc(t,t.textDirection==Rr.LTR)};function Kc(t,e){return Uc(t,(function(n){return n.empty?t.moveByGroup(n,e):Fc(n,e)}))}var Gc=function(t){return Kc(t,t.textDirection!=Rr.LTR)};var Jc=function(t){return Kc(t,t.textDirection==Rr.LTR)};var $c=function(t){return Kc(t,true)};var Xc=function(t){return Kc(t,false)};function Yc(t,e,n){if(e.type.prop(n))return true;var r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Qc(t,e,n){var r=ss(t).resolve(e.head);var i=n?La.closedBy:La.openedBy;for(var o=e.head;;){var a=n?r.childAfter(o):r.childBefore(o);if(!a)break;if(Yc(t,a,i))r=a;else o=n?a.to:a.from}var s=r.type.prop(i),u,c;if(s&&(u=n?Nc(t,r.from,1):Nc(t,r.to,-1))&&u.matched)c=n?u.end.to:u.end.from;else c=n?r.to:r.from;return ct.cursor(c,n?-1:1)}var Zc=function(t){return Uc(t,(function(e){return Qc(t.state,e,t.textDirection!=Rr.LTR)}))};var tl=function(t){return Uc(t,(function(e){return Qc(t.state,e,t.textDirection==Rr.LTR)}))};function el(t,e){return Uc(t,(function(n){return n.empty?t.moveVertically(n,e):Fc(n,e)}))}var nl=function(t){return el(t,false)};var rl=function(t){return el(t,true)};function il(t,e){return Uc(t,(function(n){return n.empty?t.moveVertically(n,e,t.dom.clientHeight):Fc(n,e)}))}var ol=function(t){return il(t,false)};var al=function(t){return il(t,true)};function sl(t,e,n){var r=t.visualLineAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from))i=t.moveToLineBoundary(e,n,false);if(!n&&i.head==r.from&&r.length){var o=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;if(o&&e.head!=r.from+o)i=ct.cursor(r.from+o)}return i}var ul=function(t){return Uc(t,(function(e){return sl(t,e,true)}))};var cl=function(t){return Uc(t,(function(e){return sl(t,e,false)}))};var ll=function(t){return Uc(t,(function(e){return ct.cursor(t.visualLineAt(e.head).from,1)}))};var fl=function(t){return Uc(t,(function(e){return ct.cursor(t.visualLineAt(e.head).to,-1)}))};function hl(t,e,n){var r=false,i=jc(t.selection,(function(e){var i=Nc(t,e.head,-1)||Nc(t,e.head,1)||e.head>0&&Nc(t,e.head-1,1)||e.head<t.doc.length&&Nc(t,e.head+1,-1);if(!i||!i.end)return e;r=true;var o=i.start.from==e.head?i.end.to:i.end.from;return n?ct.range(e.anchor,o):ct.cursor(o)}));if(!r)return false;e(qc(t,i));return true}var dl=function(t){var e=t.state,n=t.dispatch;return hl(e,n,false)};function pl(t,e){var n=jc(t.state.selection,(function(t){var n=e(t);return ct.range(t.anchor,n.head,n.goalColumn)}));if(n.eq(t.state.selection))return false;t.dispatch(qc(t.state,n));return true}function vl(t,e){return pl(t,(function(n){return t.moveByChar(n,e)}))}var ml=function(t){return vl(t,t.textDirection!=Rr.LTR)};var gl=function(t){return vl(t,t.textDirection==Rr.LTR)};function yl(t,e){return pl(t,(function(n){return t.moveByGroup(n,e)}))}var bl=function(t){return yl(t,t.textDirection!=Rr.LTR)};var wl=function(t){return yl(t,t.textDirection==Rr.LTR)};var xl=function(t){return yl(t,true)};var kl=function(t){return yl(t,false)};var Sl=function(t){return pl(t,(function(e){return Qc(t.state,e,t.textDirection!=Rr.LTR)}))};var Al=function(t){return pl(t,(function(e){return Qc(t.state,e,t.textDirection==Rr.LTR)}))};function Ml(t,e){return pl(t,(function(n){return t.moveVertically(n,e)}))}var Cl=function(t){return Ml(t,false)};var Ol=function(t){return Ml(t,true)};function Il(t,e){return pl(t,(function(n){return t.moveVertically(n,e,t.dom.clientHeight)}))}var Rl=function(t){return Il(t,false)};var El=function(t){return Il(t,true)};var Pl=function(t){return pl(t,(function(e){return sl(t,e,true)}))};var Dl=function(t){return pl(t,(function(e){return sl(t,e,false)}))};var Tl=function(t){return pl(t,(function(e){return ct.cursor(t.visualLineAt(e.head).from)}))};var Wl=function(t){return pl(t,(function(e){return ct.cursor(t.visualLineAt(e.head).to)}))};var Ll=function(t){var e=t.state,n=t.dispatch;n(qc(e,{anchor:0}));return true};var Nl=function(t){var e=t.state,n=t.dispatch;n(qc(e,{anchor:e.doc.length}));return true};var _l=function(t){var e=t.state,n=t.dispatch;n(qc(e,{anchor:e.selection.main.anchor,head:0}));return true};var Bl=function(t){var e=t.state,n=t.dispatch;n(qc(e,{anchor:e.selection.main.anchor,head:e.doc.length}));return true};var jl=function(t){var e=t.state,n=t.dispatch;n(e.update({selection:{anchor:0,head:e.doc.length},annotations:Ut.userEvent.of("keyboardselection")}));return true};var ql=function(t){var e=t.state,n=t.dispatch;var r=ef(e).map((function(t){var n=t.from,r=t.to;return ct.range(n,Math.min(r+1,e.doc.length))}));n(e.update({selection:ct.create(r),annotations:Ut.userEvent.of("keyboardselection")}));return true};var Ul=function(t){var e=t.state,n=t.dispatch;var r=jc(e.selection,(function(t){var n;var r=ss(e).resolve(t.head,1);while(!(r.from<t.from&&r.to>=t.to||r.to>t.to&&r.from<=t.from||!((n=r.parent)===null||n===void 0?void 0:n.parent)))r=r.parent;return ct.range(r.to,r.from)}));n(qc(e,r));return true};var Fl=function(t){var e=t.state,n=t.dispatch;var r=e.selection,i=null;if(r.ranges.length>1)i=ct.create([r.main]);else if(!r.main.empty)i=ct.create([ct.cursor(r.main.head)]);if(!i)return false;n(qc(e,i));return true};function zl(t,e){var n=t.state,r=t.dispatch;var i=n.changeByRange((function(t){var n=t.from,r=t.to;if(n==r){var i=e(n);n=Math.min(n,i);r=Math.max(r,i)}return n==r?{range:t}:{changes:{from:n,to:r},range:ct.cursor(n)}}));if(i.changes.empty)return false;r(n.update(i,{scrollIntoView:true,annotations:Ut.userEvent.of("delete")}));return true}var Vl=function(t,e,n){return zl(t,(function(r){var i=t.state,o=i.doc.lineAt(r),a;if(!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="\t")return r-1;var s=U(a,0,i.tabSize),u=s%ws(i)||ws(i);for(var c=0;c<u&&a[a.length-1-c]==" ";c++)r--;return r}var l;if(n){var f=o.text.slice(r-o.from+(e?0:-2),r-o.from+(e?2:0));var h=f?q(B(f,0)):1;l=e?Math.min(i.doc.length,r+h):Math.max(0,r-h)}else{l=T(o.text,r-o.from,e)+o.from}if(l==r&&o.number!=(e?i.doc.lines:1))l+=e?1:-1;return l}))};var Hl=function(t){return Vl(t,false,true)};var Kl=function(t){return Vl(t,false,false)};var Gl=function(t){return Vl(t,true,false)};var Jl=function(t,e){return zl(t,(function(n){var r=n,i=t.state,o=i.doc.lineAt(r);var a=i.charCategorizer(r);for(var s=null;;){if(r==(e?o.to:o.from)){if(r==n&&o.number!=(e?i.doc.lines:1))r+=e?1:-1;break}var u=T(o.text,r-o.from,e)+o.from;var c=o.text.slice(Math.min(r,u)-o.from,Math.max(r,u)-o.from);var l=a(c);if(s!=null&&l!=s)break;if(c!=" "||r!=n)s=l;r=u}return r}))};var $l=function(t){return Jl(t,false)};var Xl=function(t){return Jl(t,true)};var Yl=function(t){return zl(t,(function(e){var n=t.visualLineAt(e).to;if(e<n)return n;return Math.min(t.state.doc.length,e+1)}))};var Ql=function(t){return zl(t,(function(e){var n=t.visualLineAt(e).from;if(e>n)return n;return Math.max(0,e-1)}))};var Zl=function(t){var e=t.state,n=t.dispatch;var r=e.changeByRange((function(t){return{changes:{from:t.from,to:t.to,insert:z.of(["",""])},range:ct.cursor(t.from)}}));n(e.update(r,{scrollIntoView:true,annotations:Ut.userEvent.of("input")}));return true};var tf=function(t){var e=t.state,n=t.dispatch;var r=e.changeByRange((function(t){if(!t.empty||t.from==0||t.from==e.doc.length)return{range:t};var n=t.from,r=e.doc.lineAt(n);var i=n==r.from?n-1:T(r.text,n-r.from,false)+r.from;var o=n==r.to?n+1:T(r.text,n-r.from,true)+r.from;return{changes:{from:i,to:o,insert:e.doc.slice(n,o).append(e.doc.slice(i,n))},range:ct.cursor(o)}}));if(r.changes.empty)return false;n(e.update(r,{scrollIntoView:true}));return true};function ef(t){var e=[],n=-1;for(var r=0,i=t.selection.ranges;r<i.length;r++){var o=i[r];var a=t.doc.lineAt(o.from),s=t.doc.lineAt(o.to);if(!o.empty&&o.to==s.from)s=t.doc.lineAt(o.to-1);if(n>=a.number){var u=e[e.length-1];u.to=s.to;u.ranges.push(o)}else{e.push({from:a.from,to:s.to,ranges:[o]})}n=s.number+1}return e}function nf(t,e,n){var r=[],i=[];for(var o=0,a=ef(t);o<a.length;o++){var s=a[o];if(n?s.to==t.doc.length:s.from==0)continue;var u=t.doc.lineAt(n?s.to+1:s.from-1);var c=u.length+1;if(n){r.push({from:s.to,to:u.to},{from:s.from,insert:u.text+t.lineBreak});for(var l=0,f=s.ranges;l<f.length;l++){var h=f[l];i.push(ct.range(Math.min(t.doc.length,h.anchor+c),Math.min(t.doc.length,h.head+c)))}}else{r.push({from:u.from,to:s.from},{from:s.to,insert:t.lineBreak+u.text});for(var d=0,p=s.ranges;d<p.length;d++){var h=p[d];i.push(ct.range(h.anchor-c,h.head-c))}}}if(!r.length)return false;e(t.update({changes:r,scrollIntoView:true,selection:ct.create(i,t.selection.mainIndex)}));return true}var rf=function(t){var e=t.state,n=t.dispatch;return nf(e,n,false)};var of=function(t){var e=t.state,n=t.dispatch;return nf(e,n,true)};function af(t,e,n){var r=[];for(var i=0,o=ef(t);i<o.length;i++){var a=o[i];if(n)r.push({from:a.from,insert:t.doc.slice(a.from,a.to)+t.lineBreak});else r.push({from:a.to,insert:t.lineBreak+t.doc.slice(a.from,a.to)})}e(t.update({changes:r,scrollIntoView:true}));return true}var sf=function(t){var e=t.state,n=t.dispatch;return af(e,n,false)};var uf=function(t){var e=t.state,n=t.dispatch;return af(e,n,true)};var cf=function(t){var e=t.state,n=e.changes(ef(e).map((function(t){var n=t.from,r=t.to;if(n>0)n--;else if(r<e.doc.length)r++;return{from:n,to:r}})));var r=jc(e.selection,(function(e){return t.moveVertically(e,true)})).map(n);t.dispatch({changes:n,selection:r,scrollIntoView:true});return true};function lf(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};var n=ss(t).resolve(e);var r=n.childBefore(e),i=n.childAfter(e),o;if(r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop(La.closedBy))&&o.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from)return{from:r.to,to:i.from};return null}var ff=function(t){var e=t.state,n=t.dispatch;var r=e.changeByRange((function(t){var n=t.from,r=t.to;var i=n==r&&lf(e,n);var o=new Ss(e,{simulateBreak:n,simulateDoubleBreak:!!i});var a=ks(o,n);if(a==null)a=/^\s*/.exec(e.doc.lineAt(n).text)[0].length;var s=e.doc.lineAt(n);while(r<s.to&&/\s/.test(s.text.slice(r-s.from,r+1-s.from)))r++;if(i)n=i.from,r=i.to;else if(n>s.from&&n<s.from+100&&!/\S/.test(s.text.slice(0,n)))n=s.from;var u=["",xs(e,a)];if(i)u.push(xs(e,o.lineIndent(s)));return{changes:{from:n,to:r,insert:z.of(u)},range:ct.cursor(n+1+u[1].length)}}));n(e.update(r,{scrollIntoView:true}));return true};function hf(t,e){var n=-1;return t.changeByRange((function(r){var i=[];for(var o=r.from;o<=r.to;){var a=t.doc.lineAt(o);if(a.number>n&&(r.empty||r.to>a.from)){e(a,i,r);n=a.number}o=a.to+1}var s=t.changes(i);return{changes:i,range:ct.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}}))}var df=function(t){var e=t.state,n=t.dispatch;var r=Object.create(null);var i=new Ss(e,{overrideIndentation:function(t){var e=r[t];return e==null?-1:e}});var o=hf(e,(function(t,n,o){var a=ks(i,t.from);if(a==null)return;var s=/^\s*/.exec(t.text)[0];var u=xs(e,a);if(s!=u||o.from<t.from+s.length){r[t.from]=a;n.push({from:t.from,to:t.from+s.length,insert:u})}}));if(!o.changes.empty)n(e.update(o));return true};var pf=function(t){var e=t.state,n=t.dispatch;n(e.update(hf(e,(function(t,n){n.push({from:t.from,insert:e.facet(bs)})}))));return true};var vf=function(t){var e=t.state,n=t.dispatch;n(e.update(hf(e,(function(t,n){var r=/^\s*/.exec(t.text)[0];if(!r)return;var i=U(r,0,e.tabSize),o=0;var a=xs(e,Math.max(0,i-ws(e)));while(o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o))o++;n.push({from:t.from+o,to:t.from+r.length,insert:a.slice(o)})}))));return true};var mf=[{key:"Ctrl-b",run:Vc,shift:ml,preventDefault:true},{key:"Ctrl-f",run:Hc,shift:gl},{key:"Ctrl-p",run:nl,shift:Cl},{key:"Ctrl-n",run:rl,shift:Ol},{key:"Ctrl-a",run:ll,shift:Tl},{key:"Ctrl-e",run:fl,shift:Wl},{key:"Ctrl-d",run:Gl},{key:"Ctrl-h",run:Kl},{key:"Ctrl-k",run:Yl},{key:"Alt-d",run:Xl},{key:"Ctrl-Alt-h",run:$l},{key:"Ctrl-o",run:Zl},{key:"Ctrl-t",run:tf},{key:"Alt-f",run:$c,shift:xl},{key:"Alt-b",run:Xc,shift:kl},{key:"Alt-<",run:Ll},{key:"Alt->",run:Nl},{key:"Ctrl-v",run:al},{key:"Alt-v",run:ol}];var gf=[{key:"ArrowLeft",run:Vc,shift:ml,preventDefault:true},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Gc,shift:bl},{mac:"Cmd-ArrowLeft",run:cl,shift:Dl},{key:"ArrowRight",run:Hc,shift:gl,preventDefault:true},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Jc,shift:wl},{mac:"Cmd-ArrowRight",run:ul,shift:Pl},{key:"ArrowUp",run:nl,shift:Cl,preventDefault:true},{mac:"Cmd-ArrowUp",run:Ll,shift:_l},{mac:"Ctrl-ArrowUp",run:ol,shift:Rl},{key:"ArrowDown",run:rl,shift:Ol,preventDefault:true},{mac:"Cmd-ArrowDown",run:Nl,shift:Bl},{mac:"Ctrl-ArrowDown",run:al,shift:El},{key:"PageUp",run:ol,shift:Rl},{key:"PageDown",run:al,shift:El},{key:"Home",run:cl,shift:Dl},{key:"Mod-Home",run:Ll,shift:_l},{key:"End",run:ul,shift:Pl},{key:"Mod-End",run:Nl,shift:Bl},{key:"Enter",run:ff},{key:"Mod-a",run:jl},{key:"Backspace",run:Hl,shift:Hl},{key:"Delete",run:Gl,shift:Gl},{key:"Mod-Backspace",mac:"Alt-Backspace",run:$l},{key:"Mod-Delete",mac:"Alt-Delete",run:Xl},{mac:"Mod-Backspace",run:Ql},{mac:"Mod-Delete",run:Yl}].concat(mf.map((function(t){return{mac:t.key,run:t.run,shift:t.shift}})));var yf=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Zc,shift:Sl},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:tl,shift:Al},{key:"Alt-ArrowUp",run:rf},{key:"Shift-Alt-ArrowUp",run:sf},{key:"Alt-ArrowDown",run:of},{key:"Shift-Alt-ArrowDown",run:uf},{key:"Escape",run:Fl},{key:"Alt-l",mac:"Ctrl-l",run:ql},{key:"Mod-i",run:Ul,preventDefault:true},{key:"Mod-[",run:vf},{key:"Mod-]",run:pf},{key:"Mod-Alt-\\",run:df},{key:"Shift-Mod-k",run:cf},{key:"Shift-Mod-\\",run:dl}].concat(gf);var bf=function(t){var e=Af(t.state);return e.line?xf(t):e.block?kf(t):false};function wf(t,e){return function(n){var r=n.state,i=n.dispatch;var o=t(e,r.selection.ranges,r);if(!o)return false;i(r.update(o));return true}}var xf=wf(If,0);var kf=wf(Of,0);var Sf=[{key:"Mod-/",run:bf},{key:"Alt-A",run:kf}];function Af(t,e){if(e===void 0){e=t.selection.main.head}var n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}var Mf=50;function Cf(t,e,n,r){var i=e.open,o=e.close;var a=t.sliceDoc(n-Mf,n);var s=t.sliceDoc(r,r+Mf);var u=/\s*$/.exec(a)[0].length,c=/^\s*/.exec(s)[0].length;var l=a.length-u;if(a.slice(l-i.length,l)==i&&s.slice(c,c+o.length)==o){return{open:{pos:n-u,margin:u&&1},close:{pos:r+c,margin:c&&1}}}var f,h;if(r-n<=2*Mf){f=h=t.sliceDoc(n,r)}else{f=t.sliceDoc(n,n+Mf);h=t.sliceDoc(r-Mf,r)}var d=/^\s*/.exec(f)[0].length,p=/\s*$/.exec(h)[0].length;var v=h.length-p-o.length;if(f.slice(d,d+i.length)==i&&h.slice(v,v+o.length)==o){return{open:{pos:n+d+i.length,margin:/\s/.test(f.charAt(d+i.length))?1:0},close:{pos:r-p-o.length,margin:/\s/.test(h.charAt(v-1))?1:0}}}return null}function Of(t,e,n){var r=e.map((function(t){return Af(n,t.from).block}));if(!r.every((function(t){return t})))return null;var i=e.map((function(t,e){return Cf(n,r[e],t.from,t.to)}));if(t!=2&&!i.every((function(t){return t}))){var o=0;return n.changeByRange((function(t){var e=r[o++],n=e.open,a=e.close;if(i[o])return{range:t};var s=n.length+1;return{changes:[{from:t.from,insert:n+" "},{from:t.to,insert:" "+a}],range:ct.range(t.anchor+s,t.head+s)}}))}else if(t!=1&&i.some((function(t){return t}))){var a=[];for(var s=0,u;s<i.length;s++)if(u=i[s]){var c=r[s],l=u.open,f=u.close;a.push({from:l.pos-c.open.length,to:l.pos+l.margin},{from:f.pos-f.margin,to:f.pos+c.close.length})}return{changes:a}}return null}function If(t,e,n){var r=[];var i=-1;for(var o=0,a=e;o<a.length;o++){var s=a[o],u=s.from,c=s.to;var l=r.length,f=1e9;for(var h=u;h<=c;){var d=n.doc.lineAt(h);if(d.from>i&&(u==c||c>d.from)){i=d.from;var p=Af(n,h).line;if(!p)continue;var v=/^\s*/.exec(d.text)[0].length;var m=v==d.length;var g=d.text.slice(v,v+p.length)==p?v:-1;if(v<d.text.length&&v<f)f=v;r.push({line:d,comment:g,token:p,indent:v,empty:m,single:false})}h=d.to+1}if(f<1e9)for(var y=l;y<r.length;y++)if(r[y].indent<r[y].line.text.length)r[y].indent=f;if(r.length==l+1)r[l].single=true}if(t!=2&&r.some((function(t){return t.comment<0&&(!t.empty||t.single)}))){var b=[];for(var w=0,x=r;w<x.length;w++){var k=x[w],d=k.line,p=k.token,v=k.indent,S=k.empty,A=k.single;if(A||!S)b.push({from:d.from+v,insert:p+" "})}var M=n.changes(b);return{changes:M,selection:n.selection.map(M,1)}}else if(t!=1&&r.some((function(t){return t.comment>=0}))){var b=[];for(var C=0,O=r;C<O.length;C++){var I=O[C],d=I.line,R=I.comment,p=I.token;if(R>=0){var u=d.from+R,c=u+p.length;if(d.text[c-d.from]==" ")c++;b.push({from:u,to:c})}}return{changes:b}}return null}var Rf=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.compare=function(t){return this==t||this.constructor==t.constructor&&this.eq(t)};e.prototype.eq=function(t){return false};e.prototype.at=function(t){return this.range(t)};return e}(le);Rf.prototype.elementClass="";Rf.prototype.toDOM=undefined;Rf.prototype.mapMode=Z.TrackBefore;Rf.prototype.point=true;var Ef=dt.define();var Pf={class:"",renderEmptyElements:false,elementStyle:"",markers:function(){return pe.empty},lineMarker:function(){return null},initialSpacer:null,updateSpacer:null,domEventHandlers:{}};var Df=dt.define();function Tf(t){return[Nf(),Df.of(Object.assign(Object.assign({},Pf),t))]}var Wf=Wo.baseTheme({".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",height:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"}});var Lf=dt.define({combine:function(t){return t.some((function(t){return t}))}});function Nf(t){var e=[_f,Wf];if(t&&t.fixed===false)e.push(Lf.of(true));return e}var _f=fr.fromClass(function(){function t(t){this.view=t;this.dom=document.createElement("div");this.dom.className="cm-gutters";this.dom.setAttribute("aria-hidden","true");this.gutters=t.state.facet(Df).map((function(e){return new Uf(t,e)}));for(var e=0,n=this.gutters;e<n.length;e++){var r=n[e];this.dom.appendChild(r.dom)}this.fixed=!t.state.facet(Lf);if(this.fixed){this.dom.style.position="sticky"}t.scrollDOM.insertBefore(this.dom,t.contentDOM);this.syncGutters()}t.prototype.update=function(t){if(this.updateGutters(t))this.syncGutters()};t.prototype.syncGutters=function(){var t=this;var e=pe.iter(this.view.state.facet(Ef),this.view.viewport.from);var n=[];var r=this.gutters.map((function(e){return new qf(e,t.view.viewport)}));this.view.viewportLines((function(i){var o;if(Array.isArray(i.type)){for(var a=0,s=i.type;a<s.length;a++){var u=s[a];if(u.type==jn.Text){o=u;break}}}else{o=i.type==jn.Text?i:undefined}if(!o)return;if(n.length)n=[];jf(e,n,i.from);for(var c=0,l=r;c<l.length;c++){var f=l[c];f.line(t.view,o,n)}}),0);for(var i=0,o=r;i<o.length;i++){var a=o[i];a.finish()}this.dom.style.minHeight=this.view.contentHeight+"px";if(this.view.state.facet(Lf)!=!this.fixed){this.fixed=!this.fixed;this.dom.style.position=this.fixed?"sticky":""}};t.prototype.updateGutters=function(t){var e=t.startState.facet(Df),n=t.state.facet(Df);var r=t.docChanged||t.heightChanged||t.viewportChanged||!pe.eq(t.startState.facet(Ef),t.state.facet(Ef),t.view.viewport.from,t.view.viewport.to);if(e==n){for(var i=0,o=this.gutters;i<o.length;i++){var a=o[i];if(a.update(t))r=true}}else{r=true;var s=[];for(var u=0,c=n;u<c.length;u++){var l=c[u];var f=e.indexOf(l);if(f<0){s.push(new Uf(this.view,l))}else{this.gutters[f].update(t);s.push(this.gutters[f])}}for(var h=0,d=this.gutters;h<d.length;h++){var p=d[h];p.dom.remove()}for(var v=0,m=s;v<m.length;v++){var p=m[v];this.dom.appendChild(p.dom)}this.gutters=s}return r};t.prototype.destroy=function(){this.dom.remove()};return t}(),{provide:ur.scrollMargins.from((function(t){if(t.gutters.length==0||!t.fixed)return null;return t.view.textDirection==Rr.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}}))});function Bf(t){return Array.isArray(t)?t:[t]}function jf(t,e,n){while(t.value&&t.from<=n){if(t.from==n)e.push(t.value);t.next()}}var qf=function(){function t(t,e){this.gutter=t;this.localMarkers=[];this.i=0;this.height=0;this.cursor=pe.iter(t.markers,e.from)}t.prototype.line=function(t,e,n){if(this.localMarkers.length)this.localMarkers=[];jf(this.cursor,this.localMarkers,e.from);var r=n.length?this.localMarkers.concat(n):this.localMarkers;var i=this.gutter.config.lineMarker(t,e,r);if(i)r.unshift(i);var o=this.gutter;if(r.length==0&&!o.config.renderEmptyElements)return;var a=e.top-this.height;if(this.i==o.elements.length){var s=new Ff(t,e.height,a,r);o.elements.push(s);o.dom.appendChild(s.dom)}else{var u=o.elements[this.i];if(zf(r,u.markers))r=u.markers;u.update(t,e.height,a,r)}this.height=e.bottom;this.i++};t.prototype.finish=function(){var t=this.gutter;while(t.elements.length>this.i)t.dom.removeChild(t.elements.pop().dom)};return t}();var Uf=function(){function t(t,e){this.view=t;this.config=e;this.elements=[];this.spacer=null;this.dom=document.createElement("div");this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");var n=function(n){r.dom.addEventListener(n,(function(r){var i=t.visualLineAtHeight(r.clientY,t.contentDOM.getBoundingClientRect().top);if(e.domEventHandlers[n](t,i,r))r.preventDefault()}))};var r=this;for(var i in e.domEventHandlers){n(i)}this.markers=Bf(e.markers(t));if(e.initialSpacer){this.spacer=new Ff(t,0,0,[e.initialSpacer(t)]);this.dom.appendChild(this.spacer.dom);this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none"}}t.prototype.update=function(t){var e=this.markers;this.markers=Bf(this.config.markers(t.view));if(this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],t);if(n!=this.spacer.markers[0])this.spacer.update(t.view,0,0,[n])}var r=t.view.viewport;return!pe.eq(this.markers,e,r.from,r.to)};return t}();var Ff=function(){function t(t,e,n,r){this.height=-1;this.above=0;this.dom=document.createElement("div");this.update(t,e,n,r)}t.prototype.update=function(t,e,n,r){if(this.height!=e)this.dom.style.height=(this.height=e)+"px";if(this.above!=n)this.dom.style.marginTop=(this.above=n)?n+"px":"";if(this.markers!=r){this.markers=r;for(var i=void 0;i=this.dom.lastChild;)i.remove();var o="cm-gutterElement";for(var a=0,s=r;a<s.length;a++){var u=s[a];if(u.toDOM)this.dom.appendChild(u.toDOM(t));var c=u.elementClass;if(c)o+=" "+c}this.dom.className=o}};return t}();function zf(t,e){if(t.length!=e.length)return false;for(var n=0;n<t.length;n++)if(!t[n].compare(e[n]))return false;return true}var Vf=dt.define();var Hf=dt.define({combine:function(t){return ne(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(t,e){var n=Object.assign({},t);var r=function(t){var r=n[t],i=e[t];n[t]=r?function(t,e,n){return r(t,e,n)||i(t,e,n)}:i};for(var i in e){r(i)}return n}})}});var Kf=function(t){__extends(e,t);function e(e){var n=t.call(this)||this;n.number=e;return n}e.prototype.eq=function(t){return this.number==t.number};e.prototype.toDOM=function(t){return document.createTextNode(this.number)};return e}(Rf);function Gf(t,e){return t.state.facet(Hf).formatNumber(e,t.state)}var Jf=Tf({class:"cm-lineNumbers",markers:function(t){return t.state.facet(Vf)},lineMarker:function(t,e,n){if(n.some((function(t){return t.toDOM})))return null;return new Kf(Gf(t,t.state.doc.lineAt(e.from).number))},initialSpacer:function(t){return new Kf(Gf(t,Xf(t.state.doc.lines)))},updateSpacer:function(t,e){var n=Gf(e.view,Xf(e.view.state.doc.lines));return n==t.number?t:new Kf(n)}});function $f(t){if(t===void 0){t={}}return[Hf.of(t),Jf]}function Xf(t){var e=9;while(e<t)e=e*10+9;return e}function Yf(t,e){var n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?undefined:{from:n,to:r}}var Qf=qt.define({map:Yf});var Zf=qt.define({map:Yf});function th(t){var e=[];var n=function(n){if(e.some((function(t){return t.from<=n&&t.to>=n})))return"continue";e.push(t.visualLineAt(n))};for(var r=0,i=t.state.selection.ranges;r<i.length;r++){var o=i[r].head;n(o)}return e}var eh=wt.define({create:function(){return qn.none},update:function(t,e){t=t.map(e.changes);var n=function(e){if(e.is(Qf)&&!rh(t,e.value.from,e.value.to))t=t.update({add:[ph.range(e.value.from,e.value.to)]});else if(e.is(Zf))t=t.update({filter:function(t,n){return e.value.from!=t||e.value.to!=n},filterFrom:e.value.from,filterTo:e.value.to})};for(var r=0,i=e.effects;r<i.length;r++){var o=i[r];n(o)}if(e.selection){var a=false,s=e.selection.main.head;t.between(s,s,(function(t,e){if(t<s&&e>s)a=true}));if(a)t=t.update({filterFrom:s,filterTo:s,filter:function(t,e){return e<=s||t>=s}})}return t},provide:function(t){return Wo.decorations.compute([t],(function(e){return e.field(t)}))}});function nh(t,e,n){var r;var i=null;(r=t.field(eh,false))===null||r===void 0?void 0:r.between(e,n,(function(t,e){if(!i||i.from>t)i={from:t,to:e}}));return i}function rh(t,e,n){var r=false;t.between(e,e,(function(t,i){if(t==e&&i==n)r=true}));return r}function ih(t,e){return t.field(eh,false)?e:e.concat(qt.appendConfig.of(dh()))}var oh=function(t){for(var e=0,n=th(t);e<n.length;e++){var r=n[e];var i=Us(t.state,r.from,r.to);if(i){t.dispatch({effects:ih(t.state,[Qf.of(i),sh(t,i)])});return true}}return false};var ah=function(t){if(!t.state.field(eh,false))return false;var e=[];for(var n=0,r=th(t);n<r.length;n++){var i=r[n];var o=nh(t.state,i.from,i.to);if(o)e.push(Zf.of(o),sh(t,o,false))}if(e.length)t.dispatch({effects:e});return e.length>0};function sh(t,e,n){if(n===void 0){n=true}var r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return Wo.announce.of(t.state.phrase(n?"Folded lines":"Unfolded lines")+" "+r+" "+t.state.phrase("to")+" "+i+".")}var uh=function(t){var e=t.state,n=[];for(var r=0;r<e.doc.length;){var i=t.visualLineAt(r),o=Us(e,i.from,i.to);if(o)n.push(Qf.of(o));r=(o?t.visualLineAt(o.to):i).to+1}if(n.length)t.dispatch({effects:ih(t.state,n)});return!!n.length};var ch=function(t){var e=t.state.field(eh,false);if(!e||!e.size)return false;var n=[];e.between(0,t.state.doc.length,(function(t,e){n.push(Zf.of({from:t,to:e}))}));t.dispatch({effects:n});return true};var lh=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:oh},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:ah},{key:"Ctrl-Alt-[",run:uh},{key:"Ctrl-Alt-]",run:ch}];var fh={placeholderDOM:null,placeholderText:"…"};var hh=dt.define({combine:function(t){return ne(t,fh)}});function dh(t){var e=[eh,yh];if(t)e.push(hh.of(t));return e}var ph=qn.replace({widget:new(function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.ignoreEvents=function(){return false};e.prototype.toDOM=function(t){var e=t.state,n=e.facet(hh);if(n.placeholderDOM)return n.placeholderDOM();var r=document.createElement("span");r.textContent=n.placeholderText;r.setAttribute("aria-label",e.phrase("folded code"));r.title=e.phrase("unfold");r.className="cm-foldPlaceholder";r.onclick=function(e){var n=t.visualLineAt(t.posAtDOM(e.target));var r=nh(t.state,n.from,n.to);if(r)t.dispatch({effects:Zf.of(r)});e.preventDefault()};return r};return e}(Bn))});var vh={openText:"⌄",closedText:"›"};var mh=function(t){__extends(e,t);function e(e,n){var r=t.call(this)||this;r.config=e;r.open=n;return r}e.prototype.eq=function(t){return this.config==t.config&&this.open==t.open};e.prototype.toDOM=function(t){var e=document.createElement("span");e.textContent=this.open?this.config.openText:this.config.closedText;e.title=t.state.phrase(this.open?"Fold line":"Unfold line");return e};return e}(Rf);function gh(t){if(t===void 0){t={}}var e=Object.assign(Object.assign({},vh),t);var n=new mh(e,true),r=new mh(e,false);var i=fr.fromClass(function(){function t(t){this.from=t.viewport.from;this.markers=this.buildMarkers(t)}t.prototype.update=function(t){if(t.docChanged||t.viewportChanged||t.startState.facet(vs)!=t.state.facet(vs)||t.startState.field(eh,false)!=t.state.field(eh,false))this.markers=this.buildMarkers(t.view)};t.prototype.buildMarkers=function(t){var e=new ve;t.viewportLines((function(i){var o=nh(t.state,i.from,i.to)?r:Us(t.state,i.from,i.to)?n:null;if(o)e.add(i.from,i.from,o)}));return e.finish()};return t}());return[i,Tf({class:"cm-foldGutter",markers:function(t){var e;return((e=t.plugin(i))===null||e===void 0?void 0:e.markers)||pe.empty},initialSpacer:function(){return new mh(e,false)},domEventHandlers:{click:function(t,e){var n=nh(t.state,e.from,e.to);if(n){t.dispatch({effects:Zf.of(n)});return true}var r=Us(t.state,e.from,e.to);if(r){t.dispatch({effects:Qf.of(r)});return true}return false}}}),dh()]}var yh=Wo.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter .cm-gutterElement":{padding:"0 1px",cursor:"pointer"}});var bh=0;var wh=function(){function t(t,e,n){this.set=t;this.base=e;this.modified=n;this.id=bh++}t.define=function(e){if(e===null||e===void 0?void 0:e.base)throw new Error("Can not derive from a modified tag");var n=new t([],null,[]);n.set.push(n);if(e)for(var r=0,i=e.set;r<i.length;r++){var o=i[r];n.set.push(o)}return n};t.defineModifier=function(){var t=new kh;return function(e){if(e.modified.indexOf(t)>-1)return e;return kh.get(e.base||e,e.modified.concat(t).sort((function(t,e){return t.id-e.id})))}};return t}();var xh=0;var kh=function(){function t(){this.instances=[];this.id=xh++}t.get=function(e,n){if(!n.length)return e;var r=n[0].instances.find((function(t){return t.base==e&&Sh(n,t.modified)}));if(r)return r;var i=[],o=new wh(i,e,n);for(var a=0,s=n;a<s.length;a++){var u=s[a];u.instances.push(o)}var c=Ah(n);for(var l=0,f=e.set;l<f.length;l++){var h=f[l];for(var d=0,p=c;d<p.length;d++){var v=p[d];i.push(t.get(h,v))}}return o};return t}();function Sh(t,e){return t.length==e.length&&t.every((function(t,n){return t==e[n]}))}function Ah(t){var e=[t];for(var n=0;n<t.length;n++){for(var r=0,i=Ah(t.slice(0,n).concat(t.slice(n+1)));r<i.length;r++){var o=i[r];e.push(o)}}return e}function Mh(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!Array.isArray(r))r=[r];for(var i=0,o=n.split(" ");i<o.length;i++){var a=o[i];if(a){var s=[],u=2,c=a;for(var l=0;;){if(c=="..."&&l>0&&l+3==a.length){u=1;break}var f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!f)throw new RangeError("Invalid path: "+a);s.push(f[0]=="*"?null:f[0][0]=='"'?JSON.parse(f[0]):f[0]);l+=f[0].length;if(l==a.length)break;var h=a[l++];if(l==a.length&&h=="!"){u=0;break}if(h!="/")throw new RangeError("Invalid path: "+a);c=a.slice(l)}var d=s.length-1,p=s[d];if(!p)throw new RangeError("Invalid path: "+a);var v=new Eh(r,u,d>0?s.slice(0,d):null);e[p]=v.sort(e[p])}}}return Ch.add(e)}var Ch=new La;var Oh=dt.define({combine:function(t){return t.length?Ph.combinedMatch(t):null}});var Ih=dt.define({combine:function(t){return t.length?t[0].match:null}});function Rh(t){return t.facet(Oh)||t.facet(Ih)}var Eh=function(){function t(t,e,n,r){this.tags=t;this.mode=e;this.context=n;this.next=r}t.prototype.sort=function(t){if(!t||t.depth<this.depth){this.next=t;return this}t.next=this.sort(t.next);return t};Object.defineProperty(t.prototype,"depth",{get:function(){return this.context?this.context.length:0},enumerable:false,configurable:true});return t}();var Ph=function(){function t(t,e){this.map=Object.create(null);var n;function r(t){var e=se.newName();(n||(n=Object.create(null)))["."+e]=t;return e}this.all=typeof e.all=="string"?e.all:e.all?r(e.all):null;for(var i=0,o=t;i<o.length;i++){var a=o[i];var s=(a.class||r(Object.assign({},a,{tag:null})))+(this.all?" "+this.all:"");var u=a.tag;if(!Array.isArray(u))this.map[u.id]=s;else for(var c=0,l=u;c<l.length;c++){var f=l[c];this.map[f.id]=s}}this.module=n?new se(n):null;this.scope=e.scope||null;this.match=this.match.bind(this);var h=[Th];if(this.module)h.push(Wo.styleModule.of(this.module));this.extension=h.concat(Oh.of(this));this.fallback=h.concat(Ih.of(this))}t.prototype.match=function(t,e){if(this.scope&&e!=this.scope)return null;for(var n=0,r=t.set;n<r.length;n++){var i=r[n];var o=this.map[i.id];if(o!==undefined){if(i!=t)this.map[t.id]=o;return o}}return this.map[t.id]=this.all};t.combinedMatch=function(t){if(t.length==1)return t[0].match;var e=t.some((function(t){return t.scope}))?undefined:Object.create(null);return function(n,r){var i=e&&e[n.id];if(i!==undefined)return i;var o=null;for(var a=0,s=t;a<s.length;a++){var u=s[a];var c=u.match(n,r);if(c)o=o?o+" "+c:c}if(e)e[n.id]=o;return o}};t.define=function(e,n){return new t(e,n||{})};t.get=function(t,e,n){var r=Rh(t);return r&&r(e,n||_a.none)};return t}();var Dh=function(){function t(t){this.markCache=Object.create(null);this.tree=ss(t.state);this.decorations=this.buildDeco(t,Rh(t.state))}t.prototype.update=function(t){var e=ss(t.state),n=Rh(t.state);var r=n!=t.startState.facet(Oh);if(e.length<t.view.viewport.to&&!r){this.decorations=this.decorations.map(t.changes)}else if(e!=this.tree||t.viewportChanged||r){this.tree=e;this.decorations=this.buildDeco(t.view,n)}};t.prototype.buildDeco=function(t,e){var n=this;if(!e||!this.tree.length)return qn.none;var r=new ve;for(var i=0,o=t.visibleRanges;i<o.length;i++){var a=o[i],s=a.from,u=a.to;Lh(this.tree,s,u,e,(function(t,e,i){r.add(t,e,n.markCache[i]||(n.markCache[i]=qn.mark({class:i})))}))}return r.finish()};return t}();var Th=St.fallback(fr.fromClass(Dh,{decorations:function(t){return t.decorations}}));var Wh=[""];function Lh(t,e,n,r,i){var o=e,a="";var s=t.topNode.cursor;function u(t,e){if(a)i(o,t,a);o=t;a=e}function c(t,i,o){var l=s.type,f=s.from,h=s.to;if(f>=n||h<=e)return;Wh[i]=l.name;if(l.isTop)o=l;var d=t;var p=l.prop(Ch),v=false;while(p){if(!p.context||Nh(p.context,Wh,i)){for(var m=0,g=p.tags;m<g.length;m++){var y=g[m];var b=r(y,o);if(b){if(d)d+=" ";d+=b;if(p.mode==1)t+=(t?" ":"")+b;else if(p.mode==0)v=true}}break}p=p.next}var w=f;if(!v&&s.firstChild()){do{if(s.from>w&&a!=d)u(w,d);w=s.to;c(t,i+1,o)}while(s.nextSibling());s.parent()}if(h>w&&a!=d)u(w,d)}c("",0,t.type);u(n,"")}function Nh(t,e,n){if(t.length>n-1)return false;for(var r=n-1,i=t.length-1;i>=0;i--,r--){var o=t[i];if(o&&o!=e[r])return false}return true}var _h=wh.define;var Bh=_h(),jh=_h(),qh=_h(jh),Uh=_h(),Fh=_h(Uh),zh=_h(Uh),Vh=_h(),Hh=_h(Vh),Kh=_h(),Gh=_h(),Jh=_h(),$h=_h(Jh),Xh=_h();var Yh=t("t",{comment:Bh,lineComment:_h(Bh),blockComment:_h(Bh),docComment:_h(Bh),name:jh,variableName:_h(jh),typeName:qh,tagName:_h(qh),propertyName:_h(jh),className:_h(jh),labelName:_h(jh),namespace:_h(jh),macroName:_h(jh),literal:Uh,string:Fh,docString:_h(Fh),character:_h(Fh),number:zh,integer:_h(zh),float:_h(zh),bool:_h(Uh),regexp:_h(Uh),escape:_h(Uh),color:_h(Uh),url:_h(Uh),keyword:Kh,self:_h(Kh),null:_h(Kh),atom:_h(Kh),unit:_h(Kh),modifier:_h(Kh),operatorKeyword:_h(Kh),controlKeyword:_h(Kh),definitionKeyword:_h(Kh),operator:Gh,derefOperator:_h(Gh),arithmeticOperator:_h(Gh),logicOperator:_h(Gh),bitwiseOperator:_h(Gh),compareOperator:_h(Gh),updateOperator:_h(Gh),definitionOperator:_h(Gh),typeOperator:_h(Gh),controlOperator:_h(Gh),punctuation:Jh,separator:_h(Jh),bracket:$h,angleBracket:_h($h),squareBracket:_h($h),paren:_h($h),brace:_h($h),content:Vh,heading:Hh,heading1:_h(Hh),heading2:_h(Hh),heading3:_h(Hh),heading4:_h(Hh),heading5:_h(Hh),heading6:_h(Hh),contentSeparator:_h(Vh),list:_h(Vh),quote:_h(Vh),emphasis:_h(Vh),strong:_h(Vh),link:_h(Vh),monospace:_h(Vh),strikethrough:_h(Vh),inserted:_h(),deleted:_h(),changed:_h(),invalid:_h(),meta:Xh,documentMeta:_h(Xh),annotation:_h(Xh),processingInstruction:_h(Xh),definition:wh.defineModifier(),constant:wh.defineModifier(),function:wh.defineModifier(),standard:wh.defineModifier(),local:wh.defineModifier(),special:wh.defineModifier()});var Qh=Ph.define([{tag:Yh.link,textDecoration:"underline"},{tag:Yh.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Yh.emphasis,fontStyle:"italic"},{tag:Yh.strong,fontWeight:"bold"},{tag:Yh.strikethrough,textDecoration:"line-through"},{tag:Yh.keyword,color:"#708"},{tag:[Yh.atom,Yh.bool,Yh.url,Yh.contentSeparator,Yh.labelName],color:"#219"},{tag:[Yh.literal,Yh.inserted],color:"#164"},{tag:[Yh.string,Yh.deleted],color:"#a11"},{tag:[Yh.regexp,Yh.escape,Yh.special(Yh.string)],color:"#e40"},{tag:Yh.definition(Yh.variableName),color:"#00f"},{tag:Yh.local(Yh.variableName),color:"#30a"},{tag:[Yh.typeName,Yh.namespace],color:"#085"},{tag:Yh.className,color:"#167"},{tag:[Yh.special(Yh.variableName),Yh.macroName],color:"#256"},{tag:Yh.definition(Yh.propertyName),color:"#00c"},{tag:Yh.comment,color:"#940"},{tag:Yh.meta,color:"#7a757a"},{tag:Yh.invalid,color:"#f00"}]);var Zh=_t.define();var td=_t.define();var ed=dt.define();var nd=dt.define({combine:function(t){return ne(t,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});var rd=wt.define({create:function(){return xd.empty},update:function(t,e){var n=e.state.facet(nd);var r=e.annotation(Zh);if(r){var i=ld.fromTransaction(e),o=r.side;var a=o==0?t.undone:t.done;if(i)a=fd(a,a.length,n.minDepth,i);else a=gd(a,e.startState.selection);return new xd(o==0?r.rest:a,o==0?a:r.rest)}var s=e.annotation(td);if(s=="full"||s=="before")t=t.isolate();if(e.annotation(Ut.addToHistory)===false)return!e.changes.empty?t.addMapping(e.changes.desc):t;var u=ld.fromTransaction(e);var c=e.annotation(Ut.time),l=e.annotation(Ut.userEvent);if(u)t=t.addChanges(u,c,l,n.newGroupDelay,n.minDepth);else if(e.selection)t=t.addSelection(e.startState.selection,c,l,n.newGroupDelay);if(s=="full"||s=="after")t=t.isolate();return t},toJSON:function(t){return{done:t.done.map((function(t){return t.toJSON()})),undone:t.undone.map((function(t){return t.toJSON()}))}},fromJSON:function(t){return new xd(t.done.map(ld.fromJSON),t.undone.map(ld.fromJSON))}});function id(t){if(t===void 0){t={}}return[rd,nd.of(t),Wo.domEventHandlers({beforeinput:function(t,e){if(t.inputType=="historyUndo")return ad(e);if(t.inputType=="historyRedo")return sd(e);return false}})]}function od(t,e){return function(n){var r=n.state,i=n.dispatch;var o=r.field(rd,false);if(!o)return false;var a=o.pop(t,r,e);if(!a)return false;i(a);return true}}var ad=od(0,false);var sd=od(1,false);var ud=od(0,true);var cd=od(1,true);var ld=function(){function t(t,e,n,r,i){this.changes=t;this.effects=e;this.mapped=n;this.startSelection=r;this.selectionsAfter=i}t.prototype.setSelAfter=function(e){return new t(this.changes,this.effects,this.mapped,this.startSelection,e)};t.prototype.toJSON=function(){var t,e,n;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(e=this.mapped)===null||e===void 0?void 0:e.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((function(t){return t.toJSON()}))}};t.fromJSON=function(e){return new t(e.changes&&et.fromJSON(e.changes),[],e.mapped&&tt.fromJSON(e.mapped),e.startSelection&&ct.fromJSON(e.startSelection),e.selectionsAfter.map(ct.fromJSON))};t.fromTransaction=function(e){var n=vd;for(var r=0,i=e.startState.facet(ed);r<i.length;r++){var o=i[r];var a=o(e);if(a.length)n=n.concat(a)}if(!n.length&&e.changes.empty)return null;return new t(e.changes.invert(e.startState.doc),n,undefined,e.startState.selection,vd)};t.selection=function(e){return new t(undefined,vd,undefined,undefined,e)};return t}();function fd(t,e,n,r){var i=e+1>n+20?e-n-1:0;var o=t.slice(i,e);o.push(r);return o}function hd(t,e){var n=[],r=false;t.iterChangedRanges((function(t,e){return n.push(t,e)}));e.iterChangedRanges((function(t,e,i,o){for(var a=0;a<n.length;){var s=n[a++],u=n[a++];if(o>=s&&i<=u)r=true}}));return r}function dd(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((function(t,n){return t.empty!=e.ranges[n].empty})).length===0}function pd(t,e){return!t.length?e:!e.length?t:t.concat(e)}var vd=[];var md=200;function gd(t,e){if(!t.length){return[ld.selection([e])]}else{var n=t[t.length-1];var r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-md));if(r.length&&r[r.length-1].eq(e))return t;r.push(e);return fd(t,t.length-1,1e9,n.setSelAfter(r))}}function yd(t){var e=t[t.length-1];var n=t.slice();n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1));return n}function bd(t,e){if(!t.length)return t;var n=t.length,r=vd;while(n){var i=wd(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){var o=t.slice(0,n);o[n-1]=i;return o}else{e=i.mapped;n--;r=i.selectionsAfter}}return r.length?[ld.selection(r)]:vd}function wd(t,e,n){var r=pd(t.selectionsAfter.length?t.selectionsAfter.map((function(t){return t.map(e)})):vd,n);if(!t.changes)return ld.selection(r);var i=t.changes.map(e),o=e.mapDesc(t.changes,true);var a=t.mapped?t.mapped.composeDesc(o):o;return new ld(i,qt.mapEffects(t.effects,e),a,t.startSelection.map(o),r)}var xd=function(){function t(t,e,n,r){if(n===void 0){n=0}if(r===void 0){r=undefined}this.done=t;this.undone=e;this.prevTime=n;this.prevUserEvent=r}t.prototype.isolate=function(){return this.prevTime?new t(this.done,this.undone):this};t.prototype.addChanges=function(e,n,r,i,o){var a=this.done,s=a[a.length-1];if(s&&s.changes&&n-this.prevTime<i&&!s.selectionsAfter.length&&!s.changes.empty&&e.changes&&hd(s.changes,e.changes)){a=fd(a,a.length-1,o,new ld(e.changes.compose(s.changes),pd(e.effects,s.effects),s.mapped,s.startSelection,vd))}else{a=fd(a,a.length,o,e)}return new t(a,vd,n,r)};t.prototype.addSelection=function(e,n,r,i){var o=this.done.length?this.done[this.done.length-1].selectionsAfter:vd;if(o.length>0&&n-this.prevTime<i&&r=="keyboardselection"&&this.prevUserEvent==r&&dd(o[o.length-1],e))return this;return new t(gd(this.done,e),this.undone,n,r)};t.prototype.addMapping=function(e){return new t(bd(this.done,e),bd(this.undone,e),this.prevTime,this.prevUserEvent)};t.prototype.pop=function(t,e,n){var r=t==0?this.done:this.undone;if(r.length==0)return null;var i=r[r.length-1];if(n&&i.selectionsAfter.length){return e.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:Zh.of({side:t,rest:yd(r)})})}else if(!i.changes){return null}else{var o=r.length==1?vd:r.slice(0,r.length-1);if(i.mapped)o=bd(o,i.mapped);return e.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:Zh.of({side:t,rest:o}),filter:false})}};return t}();xd.empty=new xd(vd,vd);var kd=[{key:"Mod-z",run:ad,preventDefault:true},{key:"Mod-y",mac:"Mod-Shift-z",run:sd,preventDefault:true},{key:"Mod-u",run:ud,preventDefault:true},{key:"Alt-u",mac:"Mod-Shift-u",run:cd,preventDefault:true}];var Sd=dt.define({combine:function(t){var e,n;for(var r=0,i=t;r<i.length;r++){var o=i[r];e=e||o.topContainer;n=n||o.bottomContainer}return{topContainer:e,bottomContainer:n}}});function Ad(t,e){var n=t.plugin(Md);var r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}var Md=fr.fromClass(function(){function t(t){this.input=t.state.facet(Rd);this.specs=this.input.filter((function(t){return t}));this.panels=this.specs.map((function(e){return e(t)}));var e=t.state.facet(Sd);this.top=new Cd(t,true,e.topContainer);this.bottom=new Cd(t,false,e.bottomContainer);this.top.sync(this.panels.filter((function(t){return t.top})));this.bottom.sync(this.panels.filter((function(t){return!t.top})));for(var n=0,r=this.panels;n<r.length;n++){var i=r[n];i.dom.classList.add("cm-panel");if(i.class)i.dom.classList.add(i.class);if(i.mount)i.mount()}}t.prototype.update=function(t){var e=t.state.facet(Sd);if(this.top.container!=e.topContainer){this.top.sync([]);this.top=new Cd(t.view,true,e.topContainer)}if(this.bottom.container!=e.bottomContainer){this.bottom.sync([]);this.bottom=new Cd(t.view,false,e.bottomContainer)}this.top.syncClasses();this.bottom.syncClasses();var n=t.state.facet(Rd);if(n!=this.input){var r=n.filter((function(t){return t}));var i=[],o=[],a=[],s=[];for(var u=0,c=r;u<c.length;u++){var l=c[u];var f=this.specs.indexOf(l),h=void 0;if(f<0){h=l(t.view);s.push(h)}else{h=this.panels[f];if(h.update)h.update(t)}i.push(h);(h.top?o:a).push(h)}this.specs=r;this.panels=i;this.top.sync(o);this.bottom.sync(a);for(var d=0,p=s;d<p.length;d++){var v=p[d];v.dom.classList.add("cm-panel");if(v.class)v.dom.classList.add(v.class);if(v.mount)v.mount()}}else{for(var m=0,g=this.panels;m<g.length;m++){var v=g[m];if(v.update)v.update(t)}}};t.prototype.destroy=function(){this.top.sync([]);this.bottom.sync([])};return t}(),{provide:ur.scrollMargins.from((function(t){return{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}}))});var Cd=function(){function t(t,e,n){this.view=t;this.top=e;this.container=n;this.dom=undefined;this.classes="";this.panels=[];this.syncClasses()}t.prototype.sync=function(t){this.panels=t;this.syncDOM()};t.prototype.syncDOM=function(){if(this.panels.length==0){if(this.dom){this.dom.remove();this.dom=undefined}return}if(!this.dom){this.dom=document.createElement("div");this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom";this.dom.style[this.top?"top":"bottom"]="0";var t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}var e=this.dom.firstChild;for(var n=0,r=this.panels;n<r.length;n++){var i=r[n];if(i.dom.parentNode==this.dom){while(e!=i.dom)e=Od(e);e=e.nextSibling}else{this.dom.insertBefore(i.dom,e)}}while(e)e=Od(e)};t.prototype.scrollMargin=function(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)};t.prototype.syncClasses=function(){if(!this.container||this.classes==this.view.themeClasses)return;for(var t=0,e=this.classes.split(" ");t<e.length;t++){var n=e[t];if(n)this.container.classList.remove(n)}for(var r=0,i=(this.classes=this.view.themeClasses).split(" ");r<i.length;r++){var n=i[r];if(n)this.container.classList.add(n)}};return t}();function Od(t){var e=t.nextSibling;t.remove();return e}var Id=Wo.baseTheme({".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"}});var Rd=dt.define({enables:[Md,Id]});function Ed(){var t=arguments[0];if(typeof t=="string")t=document.createElement(t);var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];if(typeof i=="string")t.setAttribute(r,i);else if(i!=null)t[r]=i}e++}for(;e<arguments.length;e++)Pd(t,arguments[e]);return t}function Pd(t,e){if(typeof e=="string"){t.appendChild(document.createTextNode(e))}else if(e==null);else if(e.nodeType!=null){t.appendChild(e)}else if(Array.isArray(e)){for(var n=0;n<e.length;n++)Pd(t,e[n])}else{throw new RangeError("Unsupported child node: "+e)}}var Dd=typeof String.prototype.normalize=="function"?function(t){return t.normalize("NFKD")}:function(t){return t};var Td=function(){function t(t,e,n,r,i){if(n===void 0){n=0}if(r===void 0){r=t.length}this.value={from:0,to:0};this.done=false;this.matches=[];this.buffer="";this.bufferPos=0;this.iter=t.iterRange(n,r);this.bufferStart=n;this.normalize=i?function(t){return i(Dd(t))}:Dd;this.query=this.normalize(e)}t.prototype.peek=function(){if(this.bufferPos==this.buffer.length){this.bufferStart+=this.buffer.length;this.iter.next();if(this.iter.done)return-1;this.bufferPos=0;this.buffer=this.iter.value}return B(this.buffer,this.bufferPos)};t.prototype.next=function(){while(this.matches.length)this.matches.pop();return this.nextOverlapping()};t.prototype.nextOverlapping=function(){for(;;){var t=this.peek();if(t<0){this.done=true;return this}var e=j(t),n=this.bufferStart+this.bufferPos;this.bufferPos+=q(t);var r=this.normalize(e);for(var i=0,o=n;;i++){var a=r.charCodeAt(i);var s=this.match(a,o);if(s){this.value=s;return this}if(i==r.length-1)break;if(o==n&&i<e.length&&e.charCodeAt(i)==a)o++}}};t.prototype.match=function(t,e){var n=null;for(var r=0;r<this.matches.length;r+=2){var i=this.matches[r],o=false;if(this.query.charCodeAt(i)==t){if(i==this.query.length-1){n={from:this.matches[r+1],to:e+1}}else{this.matches[r]++;o=true}}if(!o){this.matches.splice(r,2);r-=2}}if(this.query.charCodeAt(0)==t){if(this.query.length==1)n={from:e,to:e+1};else this.matches.push(1,e)}return n};return t}();var Wd={from:-1,to:-1,match:/.*/.exec("")};var Ld="gm"+(/x/.unicode==null?"":"u");var Nd=function(){function t(t,e,n,r,i){if(r===void 0){r=0}if(i===void 0){i=t.length}this.to=i;this.curLine="";this.done=false;this.value=Wd;if(/\\[sWDnr]|\n|\r|\[\^/.test(e))return new jd(t,e,n,r,i);this.re=new RegExp(e,Ld+((n===null||n===void 0?void 0:n.ignoreCase)?"i":""));this.iter=t.iter();var o=t.lineAt(r);this.curLineStart=o.from;this.matchPos=r;this.getLine(this.curLineStart)}t.prototype.getLine=function(t){this.iter.next(t);if(this.iter.lineBreak){this.curLine=""}else{this.curLine=this.iter.value;if(this.curLineStart+this.curLine.length>this.to)this.curLine=this.curLine.slice(0,this.to-this.curLineStart);this.iter.next()}};t.prototype.nextLine=function(){this.curLineStart=this.curLineStart+this.curLine.length+1;if(this.curLineStart>this.to)this.curLine="";else this.getLine(0)};t.prototype.next=function(){for(var t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;var e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){var n=this.curLineStart+e.index,r=n+e[0].length;this.matchPos=r+(n==r?1:0);if(n==this.curLine.length)this.nextLine();if(n<r||n>this.value.to){this.value={from:n,to:r,match:e};return this}t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to){this.nextLine();t=0}else{this.done=true;return this}}};return t}();var _d=new WeakMap;var Bd=function(){function t(t,e){this.from=t;this.text=e}Object.defineProperty(t.prototype,"to",{get:function(){return this.from+this.text.length},enumerable:false,configurable:true});t.get=function(e,n,r){var i=_d.get(e);if(!i||i.from>=r||i.to<=n){var o=new t(n,e.sliceString(n,r));_d.set(e,o);return o}if(i.from==n&&i.to==r)return i;var a=i.text,s=i.from;if(s>n){a=e.sliceString(n,s)+a;s=n}if(i.to<r)a+=e.sliceString(i.to,r);_d.set(e,new t(s,a));return new t(n,a.slice(n-s,r-s))};return t}();var jd=function(){function t(t,e,n,r,i){this.text=t;this.to=i;this.done=false;this.value=Wd;this.matchPos=r;this.re=new RegExp(e,Ld+((n===null||n===void 0?void 0:n.ignoreCase)?"i":""));this.flat=Bd.get(t,r,this.chunkEnd(r+5e3))}t.prototype.chunkEnd=function(t){return t>=this.to?this.to:this.text.lineAt(t).to};t.prototype.next=function(){for(;;){var t=this.re.lastIndex=this.matchPos-this.flat.from;var e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t){this.re.lastIndex=t+1;e=this.re.exec(this.flat.text)}if(e&&this.flat.to<this.to&&e.index+e[0].length>this.flat.text.length-10)e=null;if(e){var n=this.flat.from+e.index,r=n+e[0].length;this.value={from:n,to:r,match:e};this.matchPos=r+(n==r?1:0);return this}else{if(this.flat.to==this.to){this.done=true;return this}this.flat=Bd.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}};return t}();function qd(t){try{return true}catch(e){return false}}function Ud(t){var e=Ed("input",{class:"cm-textfield",name:"line"});var n=Ed("form",{class:"cm-gotoLine",onkeydown:function(e){if(e.keyCode==27){e.preventDefault();t.dispatch({effects:Fd.of(false)});t.focus()}else if(e.keyCode==13){e.preventDefault();r()}},onsubmit:function(t){t.preventDefault();r()}},Ed("label",t.state.phrase("Go to line"),": ",e)," ",Ed("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){var n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!n)return;var r=t.state,i=r.doc.lineAt(r.selection.main.head);var o=n[1],a=n[2],s=n[3],u=n[4];var c=s?+s.slice(1):0;var l=a?+a:i.number;if(a&&u){var f=l/100;if(o)f=f*(o=="-"?-1:1)+i.number/r.doc.lines;l=Math.round(r.doc.lines*f)}else if(a&&o){l=l*(o=="-"?-1:1)+i.number}var h=r.doc.line(Math.max(1,Math.min(r.doc.lines,l)));t.dispatch({effects:Fd.of(false),selection:ct.cursor(h.from+Math.max(0,Math.min(c,h.length))),scrollIntoView:true});t.focus()}return{dom:n,pos:-10}}var Fd=qt.define();var zd=wt.define({create:function(){return true},update:function(t,e){for(var n=0,r=e.effects;n<r.length;n++){var i=r[n];if(i.is(Fd))t=i.value}return t},provide:function(t){return Rd.from(t,(function(t){return t?Ud:null}))}});var Vd=function(t){var e=Ad(t,Ud);if(!e){var n=[Fd.of(true)];if(t.state.field(zd,false)==null)n.push(qt.appendConfig.of([zd,Hd]));t.dispatch({effects:n});e=Ad(t,Ud)}if(e)e.dom.querySelector("input").focus();return true};var Hd=Wo.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}});var Kd=function(t){var e=t.state,n=t.dispatch;var r=e.selection;var i=ct.create(r.ranges.map((function(t){return e.wordAt(t.head)||ct.cursor(t.head)})),r.mainIndex);if(i.eq(r))return false;n(e.update({selection:i}));return true};function Gd(t,e){var n=t.selection.ranges;var r=new Td(t.doc,e,n[n.length-1].to).next();if(!r.done)return r.value;var i=new Td(t.doc,e,0,Math.max(0,n[n.length-1].from-1));while(!i.next().done){if(!n.some((function(t){return t.from===i.value.from})))return i.value}return null}var Jd=function(t){var e=t.state,n=t.dispatch;var r=e.selection.ranges;if(r.some((function(t){return t.from===t.to})))return Kd({state:e,dispatch:n});var i=e.sliceDoc(r[0].from,r[0].to);if(e.selection.ranges.some((function(t){return e.sliceDoc(t.from,t.to)!=i})))return false;var o=Gd(e,i);if(!o)return false;n(e.update({selection:e.selection.addRange(ct.range(o.from,o.to)),scrollIntoView:true}));return true};var $d=dt.define({combine:function(t){return{top:t.some((function(t){return t.top}))}}});function Xd(t){return $d.of(t)}var Yd=function(){function t(t,e,n){this.search=t;this.replace=e;this.caseInsensitive=n}t.prototype.eq=function(t){return this.search==t.search&&this.replace==t.replace&&this.caseInsensitive==t.caseInsensitive&&this.constructor==t.constructor};return t}();var Qd=function(t){__extends(e,t);function e(e,n,r){var i=t.call(this,e,n,r)||this;i.unquoted=e.replace(/\\([nrt\\])/g,(function(t,e){return e=="n"?"\n":e=="r"?"\r":e=="t"?"\t":"\\"}));return i}e.prototype.cursor=function(t,e,n){if(e===void 0){e=0}if(n===void 0){n=t.length}return new Td(t,this.unquoted,e,n,this.caseInsensitive?function(t){return t.toLowerCase()}:undefined)};e.prototype.nextMatch=function(t,e,n){var r=this.cursor(t,n).nextOverlapping();if(r.done)r=this.cursor(t,0,e).nextOverlapping();return r.done?null:r.value};e.prototype.prevMatchInRange=function(t,e,n){for(var r=n;;){var i=Math.max(e,r-1e4-this.unquoted.length);var o=this.cursor(t,i,r),a=null;while(!o.nextOverlapping().done)a=o.value;if(a)return a;if(i==e)return null;r-=1e4}};e.prototype.prevMatch=function(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.length)};e.prototype.getReplacement=function(t){return this.replace};e.prototype.matchAll=function(t,e){var n=this.cursor(t),r=[];while(!n.next().done){if(r.length>=e)return null;r.push(n.value)}return r};e.prototype.highlight=function(t,e,n,r){var i=this.cursor(t,Math.max(0,e-this.unquoted.length),Math.min(n+this.unquoted.length,t.length));while(!i.next().done)r(i.value.from,i.value.to)};Object.defineProperty(e.prototype,"valid",{get:function(){return!!this.search},enumerable:false,configurable:true});return e}(Yd);var Zd=function(t){__extends(e,t);function e(e,n,r){var i=t.call(this,e,n,r)||this;i.valid=!!e&&qd();return i}e.prototype.cursor=function(t,e,n){if(e===void 0){e=0}if(n===void 0){n=t.length}return new Nd(t,this.search,this.caseInsensitive?{ignoreCase:true}:undefined,e,n)};e.prototype.nextMatch=function(t,e,n){var r=this.cursor(t,n).next();if(r.done)r=this.cursor(t,0,e).next();return r.done?null:r.value};e.prototype.prevMatchInRange=function(t,e,n){for(var r=1;;r++){var i=Math.max(e,n-r*1e4);var o=this.cursor(t,i,n),a=null;while(!o.next().done)a=o.value;if(a&&(i==e||a.from>i+10))return a;if(i==e)return null}};e.prototype.prevMatch=function(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.length)};e.prototype.getReplacement=function(t){return this.replace.replace(/\$([$&\d+])/g,(function(e,n){return n=="$"?"$":n=="&"?t.match[0]:n!="0"&&+n<t.match.length?t.match[n]:e}))};e.prototype.matchAll=function(t,e){var n=this.cursor(t),r=[];while(!n.next().done){if(r.length>=e)return null;r.push(n.value)}return r};e.prototype.highlight=function(t,e,n,r){var i=this.cursor(t,Math.max(0,e-250),Math.min(n+250,t.length));while(!i.next().done)r(i.value.from,i.value.to)};return e}(Yd);var tp=qt.define();var ep=qt.define();var np=wt.define({create:function(t){return new rp(vp(t),pp)},update:function(t,e){for(var n=0,r=e.effects;n<r.length;n++){var i=r[n];if(i.is(tp))t=new rp(i.value,t.panel);else if(i.is(ep))t=new rp(t.query,i.value?pp:null)}return t},provide:function(t){return Rd.from(t,(function(t){return t.panel}))}});var rp=function(){function t(t,e){this.query=t;this.panel=e}return t}();var ip=qn.mark({class:"cm-searchMatch"}),op=qn.mark({class:"cm-searchMatch cm-searchMatch-selected"});var ap=fr.fromClass(function(){function t(t){this.view=t;this.decorations=this.highlight(t.state.field(np))}t.prototype.update=function(t){var e=t.state.field(np);if(e!=t.startState.field(np)||t.docChanged||t.selectionSet)this.decorations=this.highlight(e)};t.prototype.highlight=function(t){var e=t.query,n=t.panel;if(!n||!e.valid)return qn.none;var r=this.view;var i=new ve;for(var o=0,a=r.visibleRanges,s=a.length;o<s;o++){var u=a[o],c=u.from,l=u.to;while(o<s-1&&l>a[o+1].from-2*250)l=a[++o].to;e.highlight(r.state.doc,c,l,(function(t,e){var n=r.state.selection.ranges.some((function(n){return n.from==t&&n.to==e}));i.add(t,e,n?op:ip)}))}return i.finish()};return t}(),{decorations:function(t){return t.decorations}});function sp(t){return function(e){var n=e.state.field(np,false);return n&&n.query.valid?t(e,n):mp(e)}}var up=sp((function(t,e){var n=e.query;var r=t.state.selection.main,i=r.from,o=r.to;var a=n.nextMatch(t.state.doc,i,o);if(!a||a.from==i&&a.to==o)return false;t.dispatch({selection:{anchor:a.from,head:a.to},scrollIntoView:true,effects:kp(t,a)});return true}));var cp=sp((function(t,e){var n=e.query;var r=t.state,i=r.selection.main,o=i.from,a=i.to;var s=n.prevMatch(r.doc,o,a);if(!s)return false;t.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:true,effects:kp(t,s)});return true}));var lp=sp((function(t,e){var n=e.query;var r=n.matchAll(t.state.doc,1e3);if(!r||!r.length)return false;t.dispatch({selection:ct.create(r.map((function(t){return ct.range(t.from,t.to)})))});return true}));var fp=function(t){var e=t.state,n=t.dispatch;var r=e.selection;if(r.ranges.length>1||r.main.empty)return false;var i=r.main,o=i.from,a=i.to;var s=[],u=0;for(var c=new Td(e.doc,e.sliceDoc(o,a));!c.next().done;){if(s.length>1e3)return false;if(c.value.from==o)u=s.length;s.push(ct.range(c.value.from,c.value.to))}n(e.update({selection:ct.create(s,u)}));return true};var hp=sp((function(t,e){var n=e.query;var r=t.state,i=r.selection.main,o=i.from,a=i.to;var s=n.nextMatch(r.doc,o,o);if(!s)return false;var u=[],c,l;if(s.from==o&&s.to==a){l=r.toText(n.getReplacement(s));u.push({from:s.from,to:s.to,insert:l});s=n.nextMatch(r.doc,s.from,s.to)}if(s){var f=u.length==0||u[0].from>=s.to?0:s.to-s.from-l.length;c={anchor:s.from-f,head:s.to-f}}t.dispatch({changes:u,selection:c,scrollIntoView:!!c,effects:s?kp(t,s):undefined});return true}));var dp=sp((function(t,e){var n=e.query;var r=n.matchAll(t.state.doc,1e9).map((function(t){var e=t.from,r=t.to;return{from:e,to:r,insert:n.getReplacement(t)}}));if(!r.length)return false;t.dispatch({changes:r});return true}));function pp(t){var e=t.state.field(np).query;return{dom:bp({view:t,query:e,updateQuery:function(n){if(!e.eq(n)){e=n;t.dispatch({effects:tp.of(e)})}}}),mount:function(){this.dom.querySelector("[name=search]").select()},pos:80,top:t.state.facet($d).top}}function vp(t,e){var n=t.selection.main;var r=n.empty||n.to>n.from+100?"":t.sliceDoc(n.from,n.to);return e&&!r?e:new Qd(r.replace(/\n/g,"\\n"),"",(e===null||e===void 0?void 0:e.caseInsensitive)||false)}var mp=function(t){var e=t.state.field(np,false);if(e&&e.panel){var n=Ad(t,pp);if(!n)return false;n.dom.querySelector("[name=search]").focus()}else{t.dispatch({effects:[ep.of(true),e?tp.of(vp(t.state,e.query)):qt.appendConfig.of(Ap)]})}return true};var gp=function(t){var e=t.state.field(np,false);if(!e||!e.panel)return false;var n=Ad(t,pp);if(n&&n.dom.contains(t.root.activeElement))t.focus();t.dispatch({effects:ep.of(false)});return true};var yp=[{key:"Mod-f",run:mp,scope:"editor search-panel"},{key:"F3",run:up,shift:cp,scope:"editor search-panel"},{key:"Mod-g",run:up,shift:cp,scope:"editor search-panel"},{key:"Escape",run:gp,scope:"editor search-panel"},{key:"Mod-Shift-l",run:fp},{key:"Alt-g",run:Vd},{key:"Mod-d",run:Jd}];function bp(t){function e(e){return t.view.state.phrase(e)}var n=Ed("input",{value:t.query.search,placeholder:e("Find"),"aria-label":e("Find"),class:"cm-textfield",name:"search",onchange:a,onkeyup:a});var r=Ed("input",{value:t.query.replace,placeholder:e("Replace"),"aria-label":e("Replace"),class:"cm-textfield",name:"replace",onchange:a,onkeyup:a});var i=Ed("input",{type:"checkbox",name:"case",checked:!t.query.caseInsensitive,onchange:a});var o=Ed("input",{type:"checkbox",name:"re",checked:t.query instanceof Zd,onchange:a});function a(){t.updateQuery(new(o.checked?Zd:Qd)(n.value,r.value,!i.checked))}function s(e){if($o(t.view,e,"search-panel")){e.preventDefault()}else if(e.keyCode==13&&e.target==n){e.preventDefault();(e.shiftKey?cp:up)(t.view)}else if(e.keyCode==13&&e.target==r){e.preventDefault();hp(t.view)}}function u(t,e,n){return Ed("button",{class:"cm-button",name:t,onclick:e},n)}var c=Ed("div",{onkeydown:s,class:"cm-search"},[n,u("next",(function(){return up(t.view)}),[e("next")]),u("prev",(function(){return cp(t.view)}),[e("previous")]),u("select",(function(){return lp(t.view)}),[e("all")]),Ed("label",null,[i,e("match case")]),Ed("label",null,[o,e("regexp")]),Ed("br"),r,u("replace",(function(){return hp(t.view)}),[e("replace")]),u("replaceAll",(function(){return dp(t.view)}),[e("replace all")]),Ed("button",{name:"close",onclick:function(){return gp(t.view)},"aria-label":e("close")},["×"])]);return c}var wp=30;var xp=/[\s\.,:;?!]/;function kp(t,e){var n=e.from,r=e.to;var i=t.state.doc.lineAt(n).from,o=t.state.doc.lineAt(r).to;var a=Math.max(i,n-wp),s=Math.min(o,r+wp);var u=t.state.sliceDoc(a,s);if(a!=i){for(var c=0;c<wp;c++)if(!xp.test(u[c+1])&&xp.test(u[c])){u=u.slice(c);break}}if(s!=o){for(var l=u.length-1;l>u.length-wp;l--)if(!xp.test(u[l-1])&&xp.test(u[l])){u=u.slice(0,l);break}}return Wo.announce.of(t.state.phrase("current match")+". "+u+" "+t.state.phrase("on line")+" "+t.state.doc.lineAt(n).number)}var Sp=Wo.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}});var Ap=[np,St.override(ap),Sp];var Mp={Bash:["bash","shell","sh"],Dockerfile:["dockerfile"],HTML:["html"],JavaScript:["javascript","js"],JSON:["json"],LaTeX:["latex","stex","tex"],Markdown:["markdown","md"],"Plain Text":["txt"],Python:["python","py"],R:["r"],RMD:["rmd"],TOML:["toml"],XML:["xml"],YAML:["yaml"]};var Cp=Object.keys(Mp);var Op=function(t){var e;var n=t.toLowerCase();var r=((e=Object.entries(Mp).find((function(t){var e=t[0],r=t[1];return r.includes(n)})))!==null&&e!==void 0?e:[])[0];return r!==null&&r!==void 0?r:"Plain Text"};var Ip=function(t){var e=Op(t.activeLanguage);return r("label",{"aria-label":"Programming Language"},r("stencila-icon",{icon:"terminal"}),r("select",{onChange:t.onSetLanguage},t.languageCapabilities.map((function(t){return r("option",{value:t.toLowerCase(),selected:Op(t)===e},t)}))))};var Rp=qt.define();var Ep=function(t){if(t===void 0){t=[]}return t.map((function(t){if(typeof t==="string"){return'<stencila-code-error kind="warning">'+t+"</stencila-code-error>"}return"<stencila-code-error kind="+t.errorType+' has-stacktrace="'+(t.stackTrace!==undefined)+'">'+t.errorMessage+'<pre slot="stacktrace">'+t.stackTrace+"</pre></stencila-code-error>"})).join("\n")};var Pp=function(){var t=document.createElement("div");t.innerHTML=Ep();return{dom:t,update:function(e){for(var n=0,r=e.transactions;n<r.length;n++){var i=r[n];for(var o=0,a=i.effects;o<a.length;o++){var s=a[o];if(s.is(Rp)){t.innerHTML=Ep(s.value)}}}}}};var Dp=function(){return Rd.of(Pp)};var Tp="*.sc-stencila-editor-default,.sc-stencila-editor-default:after,.sc-stencila-editor-default:before{border:0 solid;-webkit-box-sizing:border-box;box-sizing:border-box}html.sc-stencila-editor-default{font-size:16px}.hidden.sc-stencila-editor-default{display:none}.sc-stencila-editor-default-h,stencila-editor.sc-stencila-editor-default{--gutter-background:var(\n    --color-background,var(--color-neutral-50,#e9eaf1)\n  );--gutter-color:var(--color-neutral-500,#6e7591);all:initial}.sc-stencila-editor-default-h,stencila-editor.sc-stencila-editor-default{display:-ms-flexbox;display:flex;max-width:100%}.sc-stencila-editor-default-h,stencila-editor.sc-stencila-editor-default{--border-width:1px;--background-color:transparent}.sc-stencila-editor-default-h .editorContainer.sc-stencila-editor-default,stencila-editor.sc-stencila-editor-default .editorContainer.sc-stencila-editor-default{background-color:var(--background-color);border-color:#cfd2e1;border-color:var(--color-neutral-100,#cfd2e1);border-radius:.25rem;border-width:1px;border-width:var(--border-width);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-positive:1;flex-grow:1;max-width:100%}.sc-stencila-editor-default-h .editorContainer.sc-stencila-editor-default:focus-within,stencila-editor.sc-stencila-editor-default .editorContainer.sc-stencila-editor-default:focus-within{-webkit-box-shadow:inset 0 0 0 2px var(--color-neutral-200);box-shadow:inset 0 0 0 2px var(--color-neutral-200)}.sc-stencila-editor-default-h .editor.sc-stencila-editor-default,stencila-editor.sc-stencila-editor-default .editor.sc-stencila-editor-default{cursor:text;-ms-flex-positive:1;flex-grow:1;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.875rem;line-height:1.25rem;max-width:100%;overflow:auto}.sc-stencila-editor-default-h.sc-stencila-editor-default-s>.editorContainer .cm-wrap,.sc-stencila-editor-default-h.sc-stencila-editor-default-s>.editorContainer .cm-wrap *,stencila-editor.sc-stencila-editor-default-s>.editorContainer .cm-wrap,stencila-editor.sc-stencila-editor-default-s>.editorContainer .cm-wrap *{font-family:monospace;font-family:var(--font-family-mono,monospace)}.sc-stencila-editor-default-h.sc-stencila-editor-default-s>.editorContainer .cm-wrap,stencila-editor.sc-stencila-editor-default-s>.editorContainer .cm-wrap{line-height:1.5}.sc-stencila-editor-default-h.sc-stencila-editor-default-s>.editorContainer .codemirror-focused,stencila-editor.sc-stencila-editor-default-s>.editorContainer .codemirror-focused{outline:2px solid transparent;outline-offset:2px}.sc-stencila-editor-default-h.sc-stencila-editor-default-s>.editorContainer .codemirror-scroller,stencila-editor.sc-stencila-editor-default-s>.editorContainer .codemirror-scroller{overflow:auto}.sc-stencila-editor-default-h.sc-stencila-editor-default-s>.editorContainer .cm-gutters,stencila-editor.sc-stencila-editor-default-s>.editorContainer .cm-gutters{background-color:var(--gutter-background);color:var(--gutter-color)}.sc-stencila-editor-default-h.sc-stencila-editor-default-s>.editorContainer .cm-tooltip.cm-tooltip-autocomplete>ul>li,stencila-editor.sc-stencila-editor-default-s>.editorContainer .cm-tooltip.cm-tooltip-autocomplete>ul>li{font-size:90%;padding-bottom:2px;padding-top:2px}.sc-stencila-editor-default-h.sc-stencila-editor-default-s>.editorContainer .cm-completionIcon,stencila-editor.sc-stencila-editor-default-s>.editorContainer .cm-completionIcon{min-width:1.375em;min-width:2ch}.sc-stencila-editor-default-h.sc-stencila-editor-default-s>.editorContainer stencila-code-error,stencila-editor.sc-stencila-editor-default-s>.editorContainer stencila-code-error{border-bottom-style:solid;border-radius:0;border-width:0 0 1px}.sc-stencila-editor-default-h.sc-stencila-editor-default-s>.editorContainer stencila-code-error:last-of-type,stencila-editor.sc-stencila-editor-default-s>.editorContainer stencila-code-error:last-of-type{border-bottom-width:0}.sc-stencila-editor-default-h menu.sc-stencila-editor-default,stencila-editor.sc-stencila-editor-default menu.sc-stencila-editor-default{border-color:#cfd2e1;border-color:var(--color-neutral-100,#cfd2e1);border-top-width:1px;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;margin:0;padding:1px 0}.sc-stencila-editor-default-h menu.sc-stencila-editor-default stencila-icon.sc-stencila-editor-default,stencila-editor.sc-stencila-editor-default menu.sc-stencila-editor-default stencila-icon.sc-stencila-editor-default{--height:1em;--width:1em;margin-right:.25rem}.sc-stencila-editor-default-h menu.sc-stencila-editor-default select.sc-stencila-editor-default,stencila-editor.sc-stencila-editor-default menu.sc-stencila-editor-default select.sc-stencila-editor-default{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-style:none;color:#444a5e;color:var(--color-neutral-700,#444a5e);font-family:sans-serif;font-family:var(--font-family-body,sans-serif);font-size:.75rem;line-height:1rem;margin-right:.5rem;text-align:left}.sc-stencila-editor-default-h menu.sc-stencila-editor-default select.sc-stencila-editor-default option.sc-stencila-editor-default,stencila-editor.sc-stencila-editor-default menu.sc-stencila-editor-default select.sc-stencila-editor-default option.sc-stencila-editor-default{font-family:sans-serif;font-family:var(--font-family-body,sans-serif);text-align:right}.sc-stencila-editor-default-h menu.sc-stencila-editor-default select.sc-stencila-editor-default:active,.sc-stencila-editor-default-h menu.sc-stencila-editor-default select.sc-stencila-editor-default:focus,.sc-stencila-editor-default-h menu.sc-stencila-editor-default select.sc-stencila-editor-default:hover,stencila-editor.sc-stencila-editor-default menu.sc-stencila-editor-default select.sc-stencila-editor-default:active,stencila-editor.sc-stencila-editor-default menu.sc-stencila-editor-default select.sc-stencila-editor-default:focus,stencila-editor.sc-stencila-editor-default menu.sc-stencila-editor-default select.sc-stencila-editor-default:hover{color:#1f212a;color:var(--color-neutral-900,#1f212a)}";var Wp="*.sc-stencila-editor-material,.sc-stencila-editor-material:after,.sc-stencila-editor-material:before{border:0 solid;-webkit-box-sizing:border-box;box-sizing:border-box}html.sc-stencila-editor-material{font-size:16px}.hidden.sc-stencila-editor-material{display:none}.sc-stencila-editor-material-h,stencila-editor.sc-stencila-editor-material{--gutter-background:var(\n    --color-background,var(--color-neutral-50,#e9eaf1)\n  );--gutter-color:var(--color-neutral-500,#6e7591);all:initial}.sc-stencila-editor-material-h,stencila-editor.sc-stencila-editor-material{display:-ms-flexbox;display:flex;max-width:100%}.sc-stencila-editor-material-h,stencila-editor.sc-stencila-editor-material{--border-width:1px;--background-color:transparent}.sc-stencila-editor-material-h .editorContainer.sc-stencila-editor-material,stencila-editor.sc-stencila-editor-material .editorContainer.sc-stencila-editor-material{background-color:var(--background-color);border-color:#cfd2e1;border-color:var(--color-neutral-100,#cfd2e1);border-radius:.25rem;border-width:1px;border-width:var(--border-width);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-positive:1;flex-grow:1;max-width:100%}.sc-stencila-editor-material-h .editorContainer.sc-stencila-editor-material:focus-within,stencila-editor.sc-stencila-editor-material .editorContainer.sc-stencila-editor-material:focus-within{-webkit-box-shadow:inset 0 0 0 2px var(--color-neutral-200);box-shadow:inset 0 0 0 2px var(--color-neutral-200)}.sc-stencila-editor-material-h .editor.sc-stencila-editor-material,stencila-editor.sc-stencila-editor-material .editor.sc-stencila-editor-material{cursor:text;-ms-flex-positive:1;flex-grow:1;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.875rem;line-height:1.25rem;max-width:100%;overflow:auto}.sc-stencila-editor-material-h.sc-stencila-editor-material-s>.editorContainer .cm-wrap,.sc-stencila-editor-material-h.sc-stencila-editor-material-s>.editorContainer .cm-wrap *,stencila-editor.sc-stencila-editor-material-s>.editorContainer .cm-wrap,stencila-editor.sc-stencila-editor-material-s>.editorContainer .cm-wrap *{font-family:monospace;font-family:var(--font-family-mono,monospace)}.sc-stencila-editor-material-h.sc-stencila-editor-material-s>.editorContainer .cm-wrap,stencila-editor.sc-stencila-editor-material-s>.editorContainer .cm-wrap{line-height:1.5}.sc-stencila-editor-material-h.sc-stencila-editor-material-s>.editorContainer .codemirror-focused,stencila-editor.sc-stencila-editor-material-s>.editorContainer .codemirror-focused{outline:2px solid transparent;outline-offset:2px}.sc-stencila-editor-material-h.sc-stencila-editor-material-s>.editorContainer .codemirror-scroller,stencila-editor.sc-stencila-editor-material-s>.editorContainer .codemirror-scroller{overflow:auto}.sc-stencila-editor-material-h.sc-stencila-editor-material-s>.editorContainer .cm-gutters,stencila-editor.sc-stencila-editor-material-s>.editorContainer .cm-gutters{background-color:var(--gutter-background);color:var(--gutter-color)}.sc-stencila-editor-material-h.sc-stencila-editor-material-s>.editorContainer .cm-tooltip.cm-tooltip-autocomplete>ul>li,stencila-editor.sc-stencila-editor-material-s>.editorContainer .cm-tooltip.cm-tooltip-autocomplete>ul>li{font-size:90%;padding-bottom:2px;padding-top:2px}.sc-stencila-editor-material-h.sc-stencila-editor-material-s>.editorContainer .cm-completionIcon,stencila-editor.sc-stencila-editor-material-s>.editorContainer .cm-completionIcon{min-width:1.375em;min-width:2ch}.sc-stencila-editor-material-h.sc-stencila-editor-material-s>.editorContainer stencila-code-error,stencila-editor.sc-stencila-editor-material-s>.editorContainer stencila-code-error{border-bottom-style:solid;border-radius:0;border-width:0 0 1px}.sc-stencila-editor-material-h.sc-stencila-editor-material-s>.editorContainer stencila-code-error:last-of-type,stencila-editor.sc-stencila-editor-material-s>.editorContainer stencila-code-error:last-of-type{border-bottom-width:0}.sc-stencila-editor-material-h menu.sc-stencila-editor-material,stencila-editor.sc-stencila-editor-material menu.sc-stencila-editor-material{border-color:#cfd2e1;border-color:var(--color-neutral-100,#cfd2e1);border-top-width:1px;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;margin:0;padding:1px 0}.sc-stencila-editor-material-h menu.sc-stencila-editor-material stencila-icon.sc-stencila-editor-material,stencila-editor.sc-stencila-editor-material menu.sc-stencila-editor-material stencila-icon.sc-stencila-editor-material{--height:1em;--width:1em;margin-right:.25rem}.sc-stencila-editor-material-h menu.sc-stencila-editor-material select.sc-stencila-editor-material,stencila-editor.sc-stencila-editor-material menu.sc-stencila-editor-material select.sc-stencila-editor-material{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-style:none;color:#444a5e;color:var(--color-neutral-700,#444a5e);font-family:sans-serif;font-family:var(--font-family-body,sans-serif);font-size:.75rem;line-height:1rem;margin-right:.5rem;text-align:left}.sc-stencila-editor-material-h menu.sc-stencila-editor-material select.sc-stencila-editor-material option.sc-stencila-editor-material,stencila-editor.sc-stencila-editor-material menu.sc-stencila-editor-material select.sc-stencila-editor-material option.sc-stencila-editor-material{font-family:sans-serif;font-family:var(--font-family-body,sans-serif);text-align:right}.sc-stencila-editor-material-h menu.sc-stencila-editor-material select.sc-stencila-editor-material:active,.sc-stencila-editor-material-h menu.sc-stencila-editor-material select.sc-stencila-editor-material:focus,.sc-stencila-editor-material-h menu.sc-stencila-editor-material select.sc-stencila-editor-material:hover,stencila-editor.sc-stencila-editor-material menu.sc-stencila-editor-material select.sc-stencila-editor-material:active,stencila-editor.sc-stencila-editor-material menu.sc-stencila-editor-material select.sc-stencila-editor-material:focus,stencila-editor.sc-stencila-editor-material menu.sc-stencila-editor-material select.sc-stencila-editor-material:hover{color:#1f212a;color:var(--color-neutral-900,#1f212a)}";var Lp={text:"text"};var Np={container:"editorContainer",editor:"editor"};var _p={editorTarget:"editorTarget"};var Bp=t("C",function(){function t(t){var r=this;n(this,t);this.setLanguage=o(this,"setLanguage",7);var i,a;this.isReady=false;this.isControlled=false;this.languageCapabilities=Cp;this.readOnly=false;this.readOnlyConf=new Mt;this.activeLanguage=(a=(i=this.languageCapabilities[0])===null||i===void 0?void 0:i.toLowerCase())!==null&&a!==void 0?a:"";this.dispatchEffect=function(t){var e,n,i;var o=(e=r.editorRef)===null||e===void 0?void 0:e.state;var a=(n=o===null||o===void 0?void 0:o.update({effects:[t]}))!==null&&n!==void 0?n:{};(i=r.editorRef)===null||i===void 0?void 0:i.dispatch(a)};this.getLang=function(t){return __awaiter(r,void 0,void 0,(function(){var n,r,i,r,o,r,a,r,s,r,u,r,c,l,f,h,d,p,v,r,i,v;return __generator(this,(function(m){switch(m.label){case 0:n=t.toLowerCase();switch(n){case"r":return[3,1];case"bash":return[3,4];case"shell":return[3,4];case"sh":return[3,4];case"latex":return[3,7];case"stex":return[3,7];case"tex":return[3,7];case"toml":return[3,10];case"yaml":return[3,13];case"dockerfile":return[3,16];case"html":return[3,19];case"javascript":return[3,21];case"json":return[3,23];case"xml":return[3,25];case"python":return[3,27];case"rmd":return[3,29];case"md":return[3,33];case"markdown":return[3,33]}return[3,33];case 1:return[4,e.import("./p-abd814b3.system.js")];case 2:r=m.sent().StreamLanguage;return[4,e.import("./p-7b82c96c.system.js")];case 3:i=m.sent().r;return[2,r.define(i)];case 4:return[4,e.import("./p-abd814b3.system.js")];case 5:r=m.sent().StreamLanguage;return[4,e.import("./p-0be539b4.system.js")];case 6:o=m.sent().shell;return[2,r.define(o)];case 7:return[4,e.import("./p-abd814b3.system.js")];case 8:r=m.sent().StreamLanguage;return[4,e.import("./p-ac5f05e4.system.js")];case 9:a=m.sent().stexMath;return[2,r.define(a)];case 10:return[4,e.import("./p-abd814b3.system.js")];case 11:r=m.sent().StreamLanguage;return[4,e.import("./p-422e937f.system.js")];case 12:s=m.sent().toml;return[2,r.define(s)];case 13:return[4,e.import("./p-abd814b3.system.js")];case 14:r=m.sent().StreamLanguage;return[4,e.import("./p-0e30c4c3.system.js")];case 15:u=m.sent().yaml;return[2,r.define(u)];case 16:return[4,e.import("./p-abd814b3.system.js")];case 17:r=m.sent().StreamLanguage;return[4,e.import("./p-4f3ec02d.system.js")];case 18:c=m.sent().dockerFile;return[2,r.define(c)];case 19:return[4,e.import("./p-83a217ea.system.js")];case 20:l=m.sent().html;return[2,l()];case 21:return[4,e.import("./p-5c4c4355.system.js")];case 22:f=m.sent().javascript;return[2,f()];case 23:return[4,e.import("./p-4236b135.system.js")];case 24:h=m.sent().json;return[2,h()];case 25:return[4,e.import("./p-653afe5f.system.js")];case 26:d=m.sent().xml;return[2,d()];case 27:return[4,e.import("./p-f001864e.system.js")];case 28:p=m.sent().python;return[2,p()];case 29:return[4,e.import("./p-055c2620.system.js")];case 30:v=m.sent().markdown;return[4,e.import("./p-abd814b3.system.js")];case 31:r=m.sent().StreamLanguage;return[4,e.import("./p-7b82c96c.system.js")];case 32:i=m.sent().r;return[2,v({defaultCodeLanguage:r.define(i)})];case 33:return[4,e.import("./p-055c2620.system.js")];case 34:v=m.sent().markdown;return[2,v()]}}))}))};this.languageConf=new Mt;this.setLanguageHandler=function(t){return __awaiter(r,void 0,void 0,(function(){var e;return __generator(this,(function(n){switch(n.label){case 0:this.setLanguage.emit(t);return[4,this.getLang(t)];case 1:e=n.sent();this.activeLanguage=t;this.dispatchEffect(this.languageConf.reconfigure(e));return[2]}}))}))};this.onSetLanguage=function(t){return __awaiter(r,void 0,void 0,(function(){var e,n;return __generator(this,(function(r){e=t.currentTarget;n=Op(e.value);return[2,this.setLanguageHandler(n)]}))}))};this.execute=function(){r.getContents().then((function(t){return r.executeHandler?r.executeHandler(t):t})).catch((function(t){console.error(t);return false}));return true};this.autofocus=false;this.lineNumbersConf=new Mt;this.lineNumbers=true;this.lineWrappingConf=new Mt;this.lineWrapping=false;this.foldGutterConf=new Mt;this.foldGutter=true;this.keymap=[];this.getCodeMirrorConfig=function(t){if(t===void 0){t={}}return __awaiter(r,void 0,void 0,(function(){var e,n,r,i,o,a,s;return __generator(this,(function(u){switch(u.label){case 0:e=Object.assign({language:this.activeLanguage,foldGutterEnabled:this.foldGutter,lineNumbersEnabled:this.lineNumbers,lineWrappingEnabled:this.lineWrapping},t),n=e.language,r=e.foldGutterEnabled,i=e.lineNumbersEnabled,o=e.lineWrappingEnabled;return[4,this.getLang(n)];case 1:a=u.sent();s=[id(),rc(),ee.languageData.of((function(){return[{autocomplete:nc}]})),Wc(),fc(),St.fallback(Qh),this.languageConf.of(a),this.lineWrappingConf.of(o?Wo.lineWrapping:[]),this.lineNumbersConf.of(i?$f():[]),this.foldGutterConf.of(r?gh():[]),na(),ee.allowMultipleSelections.of(true),Xd({top:true}),wa(),Ko.of(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],yf),Sf),gc),kd),lh),yp),[{key:"Ctrl-Space",run:Ru},{key:"Shift-Enter",run:this.execute}]),this.keymap)),this.readOnlyConf.of(Wo.editable.of(!this.readOnly)),Dp()];return[2,s]}}))}))};this.initCodeMirror=function(){return __awaiter(r,void 0,void 0,(function(){var t,e,n,r,i,o,a,u,c;var l,f;return __generator(this,(function(h){switch(h.label){case 0:n=this.el;r=s(n)(Lp.text);i=(e=(t=this.contents)!==null&&t!==void 0?t:r===null||r===void 0?void 0:r.textContent)!==null&&e!==void 0?e:"";o=this;a=Wo.bind;l={};c=(u=ee).create;f={doc:i};return[4,this.getCodeMirrorConfig()];case 1:o.editorRef=new(a.apply(Wo,[void 0,(l.state=c.apply(u,[(f.extensions=h.sent(),f)]),l)]));this.isReady=true;return[2]}}))}))};this.attachEditorToDom=function(){var t,e,n;var i=(t=r.editorRef)===null||t===void 0?void 0:t.dom;if(i){(n=(e=r.el)===null||e===void 0?void 0:e.querySelector("#"+_p.editorTarget))===null||n===void 0?void 0:n.replaceWith(i)}};this.setContentsHandler=function(t){var e,n,i;var o=(e=r.editorRef)===null||e===void 0?void 0:e.state;var a=(n=o===null||o===void 0?void 0:o.update({changes:{from:0,to:o.doc.length,insert:t},scrollIntoView:true}))!==null&&n!==void 0?n:{};(i=r.editorRef)===null||i===void 0?void 0:i.dispatch(a)};this.stopEventPropagation=function(t){t.stopPropagation()};this.focus=function(){var t;(t=r.editorRef)===null||t===void 0?void 0:t.focus()}}t.prototype.contentsChanged=function(t,e){if(!this.isControlled&&t!==e){this.setContentsHandler(t)}};t.prototype.readOnlyChanged=function(t,e){if(t!==e){this.dispatchEffect(this.readOnlyConf.reconfigure(Wo.editable.of(!this.readOnly)))}};t.prototype.activeLanguageOnlyChanged=function(t,e){if(!this.isControlled&&t!==e){this.setLanguageHandler(t).catch((function(t){console.log(t)}))}};t.prototype.onSetLineNumbers=function(t,e){if(!this.isControlled&&t!==e){this.dispatchEffect(this.lineNumbersConf.reconfigure(t?$f():[]))}};t.prototype.onSetLineWrapping=function(t,e){if(!this.isControlled&&t!==e){this.dispatchEffect(this.lineWrappingConf.reconfigure(t?Wo.lineWrapping:[]))}};t.prototype.onSetfoldGutter=function(t,e){if(!this.isControlled&&t!==e){this.dispatchEffect(this.foldGutterConf.reconfigure(t?gh():[]))}};t.prototype.errorsChanged=function(t){var e;(e=this.editorRef)===null||e===void 0?void 0:e.dispatch({effects:Rp.of(t)})};t.prototype.getContents=function(){return __awaiter(this,void 0,void 0,(function(){var t,e;return __generator(this,(function(n){return[2,{text:(e=(t=this.editorRef)===null||t===void 0?void 0:t.state.doc.toString())!==null&&e!==void 0?e:"",language:this.activeLanguage}]}))}))};t.prototype.setContents=function(t){this.setContentsHandler(t);return Promise.resolve(t)};t.prototype.setState=function(t,e,n,r){return __awaiter(this,void 0,void 0,(function(){var i,o,a,s,u,c,l;var f;return __generator(this,(function(h){switch(h.label){case 0:if(!((i=this.editorRef)===null||i===void 0))return[3,1];o=void 0;return[3,5];case 1:s=(a=i).setState;c=(u=ee).create;f={doc:t};if(!(n!==null&&n!==void 0))return[3,2];l=n;return[3,4];case 2:return[4,this.getCodeMirrorConfig(e)];case 3:l=h.sent();h.label=4;case 4:o=s.apply(a,[c.apply(u,[(f.extensions=l,f.selection=r,f)])]);h.label=5;case 5:o;return[2,Promise.resolve(t)]}}))}))};t.prototype.getRef=function(){return __awaiter(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(e){if(this.editorRef){return[2,this.editorRef]}return[2,new Promise((function(e,n){var r=true;var i=3e3;var o=setTimeout((function(){r=false}),i);var a=function(){setInterval((function(){if(t.editorRef&&t.isReady){clearTimeout(o);e(t.editorRef)}else if(!r){n(new Error("Editor wasn’t instantiated in time ("+i+"ms), please try again."))}else{a()}}),100)};a()}))]}))}))};t.prototype.componentWillLoad=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){try{return[2,this.initCodeMirror()]}catch(e){console.log("Encountered error while initializing code editor\n",e)}return[2]}))}))};t.prototype.componentDidLoad=function(){this.attachEditorToDom();if(this.autofocus){this.focus()}};t.prototype.disconnectedCallback=function(){var t;(t=this.editorRef)===null||t===void 0?void 0:t.destroy()};t.prototype.render=function(){return r(a,null,r("div",{class:Np.container},r("div",{class:Np.editor,onKeyDown:this.stopEventPropagation,onClick:this.focus},r("div",{class:"hidden"},r("slot",{name:Lp.text})),r("div",{id:_p.editorTarget})),r("menu",null,r(Ip,{activeLanguage:this.activeLanguage,onSetLanguage:this.onSetLanguage,languageCapabilities:this.languageCapabilities}))))};Object.defineProperty(t.prototype,"el",{get:function(){return i(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{contents:["contentsChanged"],readOnly:["readOnlyChanged"],activeLanguage:["activeLanguageOnlyChanged"],lineNumbers:["onSetLineNumbers"],lineWrapping:["onSetLineWrapping"],foldGutter:["onSetfoldGutter"],errors:["errorsChanged"]}},enumerable:false,configurable:true});return t}());Bp.style={default:Tp,material:Wp};var jp=f((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.ordDate=e.ordNumber=e.ordString=e.ordBoolean=e.ord=e.getDualOrd=e.getTupleOrd=e.between=e.clamp=e.max=e.min=e.geq=e.leq=e.gt=e.lt=e.Contravariant=e.getMonoid=e.getSemigroup=e.URI=e.contramap=e.reverse=e.tuple=e.fromCompare=e.equalsDefault=void 0;var n=function(t){return function(e,n){return e===n||t(e,n)===0}};e.equalsDefault=n;var r=function(t){return{equals:e.equalsDefault(t),compare:function(e,n){return e===n?0:t(e,n)}}};e.fromCompare=r;var i=function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return e.fromCompare((function(e,n){var r=0;for(;r<t.length-1;r++){var i=t[r].compare(e[r],n[r]);if(i!==0){return i}}return t[r].compare(e[r],n[r])}))};e.tuple=i;var o=function(t){return e.fromCompare((function(e,n){return t.compare(n,e)}))};e.reverse=o;var a=function(t,n){return d.pipe(t,e.contramap(n))};var s=function(t){return function(n){return e.fromCompare((function(e,r){return n.compare(t(e),t(r))}))}};e.contramap=s;e.URI="Ord";var u=function(){return{concat:function(t,n){return e.fromCompare((function(e,r){var i=t.compare(e,r);return i!==0?i:n.compare(e,r)}))}}};e.getSemigroup=u;var c=function(){return{concat:e.getSemigroup().concat,empty:e.fromCompare((function(){return 0}))}};e.getMonoid=c;e.Contravariant={URI:e.URI,contramap:a};var l=function(t){return function(e,n){return t.compare(e,n)===-1}};e.lt=l;var f=function(t){return function(e,n){return t.compare(e,n)===1}};e.gt=f;var h=function(t){return function(e,n){return t.compare(e,n)!==1}};e.leq=h;var p=function(t){return function(e,n){return t.compare(e,n)!==-1}};e.geq=p;var v=function(t){return function(e,n){return e===n||t.compare(e,n)<1?e:n}};e.min=v;var m=function(t){return function(e,n){return e===n||t.compare(e,n)>-1?e:n}};e.max=m;var g=function(t){var n=e.min(t);var r=e.max(t);return function(t,e){return function(i){return r(n(i,e),t)}}};e.clamp=g;var b=function(t){var n=e.lt(t);var r=e.gt(t);return function(t,e){return function(i){return n(i,t)||r(i,e)?false:true}}};e.between=b;e.getTupleOrd=e.tuple;e.getDualOrd=e.reverse;e.ord=e.Contravariant;function w(t,e){return t<e?-1:t>e?1:0}var x={equals:y.eqStrict.equals,compare:w};e.ordBoolean=x;e.ordString=x;e.ordNumber=x;e.ordDate=d.pipe(e.ordNumber,e.contramap((function(t){return t.valueOf()})))}));var qp=f((function(t,e){var n=h&&h.__createBinding||(Object.create?function(t,e,n,r){if(r===undefined)r=n;Object.defineProperty(t,r,{enumerable:true,get:function(){return e[n]}})}:function(t,e,n,r){if(r===undefined)r=n;t[r]=e[n]});var r=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var i=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i))n(e,t,i);r(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.semigroupProduct=e.semigroupSum=e.semigroupString=e.getFunctionSemigroup=e.semigroupAny=e.semigroupAll=e.fold=e.getIntercalateSemigroup=e.getMeetSemigroup=e.getJoinSemigroup=e.getDualSemigroup=e.getStructSemigroup=e.getTupleSemigroup=e.getFirstSemigroup=e.getLastSemigroup=e.getObjectSemigroup=e.concatAll=e.semigroupVoid=e.last=e.first=e.intercalate=e.tuple=e.struct=e.reverse=e.constant=e.max=e.min=void 0;var o=i(x);var a=i(jp);var s=function(t){return{concat:a.min(t)}};e.min=s;var u=function(t){return{concat:a.max(t)}};e.max=u;var c=function(t){return{concat:function(){return t}}};e.constant=c;var l=function(t){return{concat:function(e,n){return t.concat(n,e)}}};e.reverse=l;var f=function(t){return{concat:function(e,n){var r={};for(var i in t){if(o.has.call(t,i)){r[i]=t[i].concat(e[i],n[i])}}return r}}};e.struct=f;var p=function(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}return{concat:function(e,n){return t.map((function(t,r){return t.concat(e[r],n[r])}))}}};e.tuple=p;var v=function(t){return function(e){return{concat:function(n,r){return e.concat(n,e.concat(t,r))}}}};e.intercalate=v;var m=function(){return{concat:d.identity}};e.first=m;var g=function(){return{concat:function(t,e){return e}}};e.last=g;e.semigroupVoid=e.constant(undefined);var y=function(t){return function(e){return function(n){return n.reduce(t.concat,e)}}};e.concatAll=y;var b=function(){return{concat:function(t,e){return Object.assign({},t,e)}}};e.getObjectSemigroup=b;e.getLastSemigroup=e.last;e.getFirstSemigroup=e.first;e.getTupleSemigroup=e.tuple;e.getStructSemigroup=e.struct;e.getDualSemigroup=e.reverse;e.getJoinSemigroup=e.max;e.getMeetSemigroup=e.min;e.getIntercalateSemigroup=e.intercalate;function w(t){var n=e.concatAll(t);return function(t,e){return e===undefined?n(t):n(t)(e)}}e.fold=w;e.semigroupAll={concat:function(t,e){return t&&e}};e.semigroupAny={concat:function(t,e){return t||e}};e.getFunctionSemigroup=d.getSemigroup;e.semigroupString={concat:function(t,e){return t+e}};e.semigroupSum={concat:function(t,e){return t+e}};e.semigroupProduct={concat:function(t,e){return t*e}}}));var Up=f((function(t,e){var n=h&&h.__createBinding||(Object.create?function(t,e,n,r){if(r===undefined)r=n;Object.defineProperty(t,r,{enumerable:true,get:function(){return e[n]}})}:function(t,e,n,r){if(r===undefined)r=n;t[r]=e[n]});var r=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var i=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i))n(e,t,i);r(e,t);return e};var o=h&&h.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(e,"__esModule",{value:true});e.traverse=e.reduceRightWithIndex=e.foldMapWithIndex=e.reduceWithIndex=e.reduceRight=e.foldMap=e.reduce=e.mapWithIndex=e.map=e.flatten=e.duplicate=e.extend=e.chain=e.ap=e.alt=e.altW=e.of=e.chunksOf=e.splitAt=e.chop=e.chainWithIndex=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.modifyAt=e.updateAt=e.sort=e.groupBy=e.groupSort=e.group=e.reverse=e.concat=e.fromArray=e.unappend=e.unprepend=e.fromReadonlyArray=e.makeBy=e.rotate=e.union=e.sortBy=e.uniq=e.unsafeUpdateAt=e.unsafeInsertAt=e.append=e.prepend=e.isOutOfBound=e.isNonEmpty=e.empty=void 0;e.readonlyNonEmptyArray=e.fold=e.prependToAll=e.insertAt=e.snoc=e.cons=e.unsnoc=e.uncons=e.filterWithIndex=e.filter=e.concatAll=e.max=e.min=e.init=e.last=e.tail=e.head=e.apS=e.bind=e.bindTo=e.Do=e.Comonad=e.Alt=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getEq=e.getSemigroup=e.getShow=e.URI=e.extract=e.traverseWithIndex=e.sequence=void 0;var a=i(x);var s=i(S);var u=i(qp);e.empty=[];var c=function(t){return t.length>0};e.isNonEmpty=c;var l=function(t,e){return t<0||t>=e.length};e.isOutOfBound=l;var f=function(t){return function(e){return o([t],e)}};e.prepend=f;var p=function(t){return function(e){return D(e,[t])}};e.append=p;var v=function(t,n,r){if(e.isNonEmpty(r)){var i=a.fromReadonlyNonEmptyArray(r);i.splice(t,0,n);return i}return[n]};e.unsafeInsertAt=v;var b=function(t,e,n){if(n[t]===e){return n}else{var r=a.fromReadonlyNonEmptyArray(n);r[t]=e;return r}};e.unsafeUpdateAt=b;var k=function(t){return function(n){if(n.length===1){return n}var r=[e.head(n)];var i=e.tail(n);var o=function(e){if(r.every((function(n){return!t.equals(n,e)}))){r.push(e)}};for(var a=0,s=i;a<s.length;a++){var u=s[a];o(u)}return r}};e.uniq=k;var A=function(t){if(e.isNonEmpty(t)){var n=jp.getMonoid();return e.sort(t.reduce(n.concat,n.empty))}return d.identity};e.sortBy=A;var M=function(t){var n=e.uniq(t);return function(t,e){return n(D(t,e))}};e.union=M;var C=function(t){return function(n){var r=n.length;var i=Math.round(t)%r;if(e.isOutOfBound(Math.abs(i),n)||i===0){return n}if(i<0){var o=e.splitAt(-i)(n),a=o[0],s=o[1];return D(s,a)}else{return e.rotate(i-r)(n)}}};e.rotate=C;var O=function(t,e){var n=Math.max(0,Math.floor(t));var r=[e(0)];for(var i=1;i<n;i++){r.push(e(i))}return r};e.makeBy=O;var I=function(t){return e.isNonEmpty(t)?s.some(t):s.none};e.fromReadonlyArray=I;var R=function(t){return[e.head(t),e.tail(t)]};e.unprepend=R;var E=function(t){return[e.init(t),e.last(t)]};e.unappend=E;var P=function(t){return e.fromReadonlyArray(t.slice())};e.fromArray=P;function D(t,e){return t.concat(e)}e.concat=D;var T=function(t){return t.length===1?t:o([e.last(t)],t.slice(0,-1).reverse())};e.reverse=T;function W(t){return function(n){var r=n.length;if(r===0){return e.empty}var i=[];var o=n[0];var a=[o];for(var s=1;s<r;s++){var u=n[s];if(t.equals(u,o)){a.push(u)}else{i.push(a);o=u;a=[o]}}i.push(a);return i}}e.group=W;function L(t){var n=e.sort(t);var r=W(t);return function(t){return e.isNonEmpty(t)?r(n(t)):e.empty}}e.groupSort=L;var N=function(t){return function(e){var n={};for(var r=0,i=e;r<i.length;r++){var o=i[r];var a=t(o);if(n.hasOwnProperty(a)){n[a].push(o)}else{n[a]=[o]}}return n}};e.groupBy=N;var _=function(t){return function(e){return e.length===1?e:e.slice().sort(t.compare)}};e.sort=_;var B=function(t,n){return e.modifyAt(t,(function(){return n}))};e.updateAt=B;var j=function(t,n){return function(r){return e.isOutOfBound(t,r)?s.none:s.some(e.unsafeUpdateAt(t,n(r[t]),r))}};e.modifyAt=j;var q=function(t,e,n){var r=[n(t[0],e[0])];var i=Math.min(t.length,e.length);for(var o=1;o<i;o++){r[o]=n(t[o],e[o])}return r};e.zipWith=q;function U(t,n){if(n===undefined){return function(e){return U(e,t)}}return e.zipWith(t,n,(function(t,e){return[t,e]}))}e.zip=U;var F=function(t){var e=[t[0][0]];var n=[t[0][1]];for(var r=1;r<t.length;r++){e[r]=t[r][0];n[r]=t[r][1]}return[e,n]};e.unzip=F;var z=function(t){return function(e){var n=[t,e[0]];for(var r=1;r<e.length;r++){n.push(t,e[r])}return n}};e.prependAll=z;var V=function(t){return function(n){var r=e.tail(n);return e.isNonEmpty(r)?d.pipe(r,e.prependAll(t),e.prepend(e.head(n))):n}};e.intersperse=V;var H=function(t){return function(n){var r=a.fromReadonlyNonEmptyArray(t(0,e.head(n)));for(var i=1;i<n.length;i++){r.push.apply(r,t(i,n[i]))}return r}};e.chainWithIndex=H;var K=function(t){return function(n){var r=t(n),i=r[0],o=r[1];var a=[i];var s=o;while(e.isNonEmpty(s)){var u=t(s),c=u[0],l=u[1];a.push(c);s=l}return a}};e.chop=K;var G=function(t){return function(n){var r=Math.max(1,t);return r>=n.length?[n,e.empty]:[d.pipe(n.slice(1,r),e.prepend(e.head(n))),n.slice(r)]}};e.splitAt=G;var J=function(t){return e.chop(e.splitAt(t))};e.chunksOf=J;var $=function(t,n){return d.pipe(t,e.map(n))};var X=function(t,n){return d.pipe(t,e.mapWithIndex(n))};var Y=function(t,n){return d.pipe(t,e.ap(n))};var Q=function(t,n){return d.pipe(t,e.chain(n))};var Z=function(t,n){return d.pipe(t,e.extend(n))};var tt=function(t,n,r){return d.pipe(t,e.reduce(n,r))};var et=function(t){var n=e.foldMap(t);return function(t,e){return d.pipe(t,n(e))}};var nt=function(t,n,r){return d.pipe(t,e.reduceRight(n,r))};var rt=function(t){var n=e.traverse(t);return function(t,e){return d.pipe(t,n(e))}};var it=function(t,n){return d.pipe(t,e.alt(n))};var ot=function(t,n,r){return d.pipe(t,e.reduceWithIndex(n,r))};var at=function(t){var n=e.foldMapWithIndex(t);return function(t,e){return d.pipe(t,n(e))}};var st=function(t,n,r){return d.pipe(t,e.reduceRightWithIndex(n,r))};var ut=function(t){var n=e.traverseWithIndex(t);return function(t,e){return d.pipe(t,n(e))}};var ct=function(t){return[t]};e.of=ct;var lt=function(t){return function(e){return D(e,t())}};e.altW=lt;e.alt=e.altW;var ft=function(t){return e.chain((function(n){return d.pipe(t,e.map(n))}))};e.ap=ft;var ht=function(t){return e.chainWithIndex((function(e,n){return t(n)}))};e.chain=ht;var dt=function(t){return function(n){var r=e.tail(n);var i=[t(n)];while(e.isNonEmpty(r)){i.push(t(r));r=e.tail(r)}return i}};e.extend=dt;e.duplicate=e.extend(d.identity);e.flatten=e.chain(d.identity);var pt=function(t){return e.mapWithIndex((function(e,n){return t(n)}))};e.map=pt;var vt=function(t){return function(n){var r=[t(0,e.head(n))];for(var i=1;i<n.length;i++){r.push(t(i,n[i]))}return r}};e.mapWithIndex=vt;var mt=function(t,n){return e.reduceWithIndex(t,(function(t,e,r){return n(e,r)}))};e.reduce=mt;var gt=function(t){return function(e){return function(n){return n.slice(1).reduce((function(n,r){return t.concat(n,e(r))}),e(n[0]))}}};e.foldMap=gt;var yt=function(t,n){return e.reduceRightWithIndex(t,(function(t,e,r){return n(e,r)}))};e.reduceRight=yt;var bt=function(t,e){return function(n){return n.reduce((function(t,n,r){return e(r,t,n)}),t)}};e.reduceWithIndex=bt;var wt=function(t){return function(e){return function(n){return n.slice(1).reduce((function(n,r,i){return t.concat(n,e(i+1,r))}),e(0,n[0]))}}};e.foldMapWithIndex=wt;var xt=function(t,e){return function(n){return n.reduceRight((function(t,n,r){return e(r,n,t)}),t)}};e.reduceRightWithIndex=xt;var kt=function(t){var n=e.traverseWithIndex(t);return function(t){return n((function(e,n){return t(n)}))}};e.traverse=kt;var St=function(t){return e.traverseWithIndex(t)((function(t,e){return e}))};e.sequence=St;var At=function(t){return function(n){return function(r){var i=t.map(n(0,e.head(r)),e.of);for(var o=1;o<r.length;o++){i=t.ap(t.map(i,(function(t){return function(n){return d.pipe(t,e.append(n))}})),n(o,r[o]))}return i}}};e.traverseWithIndex=At;var Mt=function(t){return t[0]};e.extract=Mt;e.URI="ReadonlyNonEmptyArray";var Ct=function(t){return{show:function(e){return"["+e.map(t.show).join(", ")+"]"}}};e.getShow=Ct;var Ot=function(){return{concat:D}};e.getSemigroup=Ot;var It=function(t){return y.fromEquals((function(e,n){return e.length===n.length&&e.every((function(e,r){return t.equals(e,n[r])}))}))};e.getEq=It;e.Functor={URI:e.URI,map:$};e.flap=g.flap(e.Functor);e.Pointed={URI:e.URI,of:e.of};e.FunctorWithIndex={URI:e.URI,map:$,mapWithIndex:X};e.Apply={URI:e.URI,map:$,ap:Y};e.apFirst=m.apFirst(e.Apply);e.apSecond=m.apSecond(e.Apply);e.Applicative={URI:e.URI,map:$,ap:Y,of:e.of};e.Chain={URI:e.URI,map:$,ap:Y,chain:Q};e.chainFirst=w.chainFirst(e.Chain);e.Monad={URI:e.URI,map:$,ap:Y,of:e.of,chain:Q};e.Foldable={URI:e.URI,reduce:tt,foldMap:et,reduceRight:nt};e.FoldableWithIndex={URI:e.URI,reduce:tt,foldMap:et,reduceRight:nt,reduceWithIndex:ot,foldMapWithIndex:at,reduceRightWithIndex:st};e.Traversable={URI:e.URI,map:$,reduce:tt,foldMap:et,reduceRight:nt,traverse:rt,sequence:e.sequence};e.TraversableWithIndex={URI:e.URI,map:$,mapWithIndex:X,reduce:tt,foldMap:et,reduceRight:nt,traverse:rt,sequence:e.sequence,reduceWithIndex:ot,foldMapWithIndex:at,reduceRightWithIndex:st,traverseWithIndex:ut};e.Alt={URI:e.URI,map:$,alt:it};e.Comonad={URI:e.URI,map:$,extend:Z,extract:e.extract};e.Do=e.of({});e.bindTo=g.bindTo(e.Functor);e.bind=w.bind(e.Chain);e.apS=m.apS(e.Apply);e.head=e.extract;var Rt=function(t){return t.slice(1)};e.tail=Rt;var Et=function(t){return t[t.length-1]};e.last=Et;var Pt=function(t){return t.slice(0,-1)};e.init=Pt;var Dt=function(t){var e=u.min(t);return function(t){return t.reduce(e.concat)}};e.min=Dt;var Tt=function(t){var e=u.max(t);return function(t){return t.reduce(e.concat)}};e.max=Tt;var Wt=function(t){return function(e){return e.reduce(t.concat)}};e.concatAll=Wt;function Lt(t){return e.filterWithIndex((function(e,n){return t(n)}))}e.filter=Lt;var Nt=function(t){return function(n){return e.fromReadonlyArray(n.filter((function(e,n){return t(n,e)})))}};e.filterWithIndex=Nt;e.uncons=e.unprepend;e.unsnoc=e.unappend;function _t(t,n){return n===undefined?e.prepend(t):d.pipe(n,e.prepend(t))}e.cons=_t;var Bt=function(t,e){return D(t,[e])};e.snoc=Bt;var jt=function(t,n){return function(r){return t<0||t>r.length?s.none:s.some(e.unsafeInsertAt(t,n,r))}};e.insertAt=jt;e.prependToAll=e.prependAll;e.fold=e.concatAll;e.readonlyNonEmptyArray={URI:e.URI,of:e.of,map:$,mapWithIndex:X,ap:Y,chain:Q,extend:Z,extract:e.extract,reduce:tt,foldMap:et,reduceRight:nt,traverse:rt,sequence:e.sequence,reduceWithIndex:ot,foldMapWithIndex:at,reduceRightWithIndex:st,traverseWithIndex:ut,alt:it}}));var Fp=f((function(t,e){var n=h&&h.__createBinding||(Object.create?function(t,e,n,r){if(r===undefined)r=n;Object.defineProperty(t,r,{enumerable:true,get:function(){return e[n]}})}:function(t,e,n,r){if(r===undefined)r=n;t[r]=e[n]});var r=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var i=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i))n(e,t,i);r(e,t);return e};var o=h&&h.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(e,"__esModule",{value:true});e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.reduce=e.mapWithIndex=e.map=e.flatten=e.duplicate=e.extend=e.chain=e.ap=e.alt=e.altW=e.chunksOf=e.splitAt=e.chop=e.chainWithIndex=e.foldMap=e.foldMapWithIndex=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.of=e.copy=e.modifyAt=e.updateAt=e.insertAt=e.sort=e.groupBy=e.groupSort=e.group=e.reverse=e.concat=e.unappend=e.unprepend=e.fromArray=e.fromReadonlyNonEmptyArray=e.makeBy=e.rotate=e.union=e.sortBy=e.uniq=e.unsafeUpdateAt=e.unsafeInsertAt=e.append=e.prepend=e.isOutOfBound=e.isNonEmpty=void 0;e.nonEmptyArray=e.fold=e.prependToAll=e.snoc=e.cons=e.unsnoc=e.uncons=e.filterWithIndex=e.filter=e.concatAll=e.max=e.min=e.init=e.last=e.tail=e.head=e.apS=e.bind=e.bindTo=e.Do=e.Comonad=e.Alt=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getEq=e.getSemigroup=e.getShow=e.URI=e.extract=e.traverseWithIndex=e.sequence=e.traverse=void 0;var a=i(x);var s=i(S);var u=i(Up);var c=function(t){return t.length>0};e.isNonEmpty=c;var l=function(t,e){return t<0||t>=e.length};e.isOutOfBound=l;var f=function(t){return function(e){return o([t],e)}};e.prepend=f;var p=function(t){return function(e){return E(e,[t])}};e.append=p;var v=function(t,n,r){if(e.isNonEmpty(r)){var i=e.fromReadonlyNonEmptyArray(r);i.splice(t,0,n);return i}return[n]};e.unsafeInsertAt=v;var y=function(t,n,r){var i=e.fromReadonlyNonEmptyArray(r);i[t]=n;return i};e.unsafeUpdateAt=y;var b=function(t){return function(n){if(n.length===1){return e.copy(n)}var r=[e.head(n)];var i=e.tail(n);var o=function(e){if(r.every((function(n){return!t.equals(n,e)}))){r.push(e)}};for(var a=0,s=i;a<s.length;a++){var u=s[a];o(u)}return r}};e.uniq=b;var k=function(t){if(e.isNonEmpty(t)){var n=jp.getMonoid();return e.sort(t.reduce(n.concat,n.empty))}return e.copy};e.sortBy=k;var A=function(t){var n=e.uniq(t);return function(t,e){return n(E(t,e))}};e.union=A;var M=function(t){return function(n){var r=n.length;var i=Math.round(t)%r;if(e.isOutOfBound(Math.abs(i),n)||i===0){return e.copy(n)}if(i<0){var o=e.splitAt(-i)(n),a=o[0],s=o[1];return E(s,a)}else{return e.rotate(i-r)(n)}}};e.rotate=M;var C=function(t,e){var n=Math.max(0,Math.floor(t));var r=[e(0)];for(var i=1;i<n;i++){r.push(e(i))}return r};e.makeBy=C;e.fromReadonlyNonEmptyArray=a.fromReadonlyNonEmptyArray;var O=function(t){return e.isNonEmpty(t)?s.some(t):s.none};e.fromArray=O;var I=function(t){return[e.head(t),e.tail(t)]};e.unprepend=I;var R=function(t){return[e.init(t),e.last(t)]};e.unappend=R;function E(t,e){return t.concat(e)}e.concat=E;var P=function(t){return o([e.last(t)],t.slice(0,-1).reverse())};e.reverse=P;function D(t){return function(e){var n=e.length;if(n===0){return[]}var r=[];var i=e[0];var o=[i];for(var a=1;a<n;a++){var s=e[a];if(t.equals(s,i)){o.push(s)}else{r.push(o);i=s;o=[i]}}r.push(o);return r}}e.group=D;function T(t){var n=e.sort(t);var r=D(t);return function(t){return e.isNonEmpty(t)?r(n(t)):[]}}e.groupSort=T;var W=function(t){return function(e){var n={};for(var r=0,i=e;r<i.length;r++){var o=i[r];var a=t(o);if(n.hasOwnProperty(a)){n[a].push(o)}else{n[a]=[o]}}return n}};e.groupBy=W;var L=function(t){return function(e){return e.slice().sort(t.compare)}};e.sort=L;var N=function(t,n){return function(r){return t<0||t>r.length?s.none:s.some(e.unsafeInsertAt(t,n,r))}};e.insertAt=N;var _=function(t,n){return e.modifyAt(t,(function(){return n}))};e.updateAt=_;var B=function(t,n){return function(r){return e.isOutOfBound(t,r)?s.none:s.some(e.unsafeUpdateAt(t,n(r[t]),r))}};e.modifyAt=B;e.copy=e.fromReadonlyNonEmptyArray;var j=function(t){return[t]};e.of=j;var q=function(t,e,n){var r=[n(t[0],e[0])];var i=Math.min(t.length,e.length);for(var o=1;o<i;o++){r[o]=n(t[o],e[o])}return r};e.zipWith=q;function U(t,n){if(n===undefined){return function(e){return U(e,t)}}return e.zipWith(t,n,(function(t,e){return[t,e]}))}e.zip=U;var F=function(t){var e=[t[0][0]];var n=[t[0][1]];for(var r=1;r<t.length;r++){e[r]=t[r][0];n[r]=t[r][1]}return[e,n]};e.unzip=F;var z=function(t){return function(e){var n=[t,e[0]];for(var r=1;r<e.length;r++){n.push(t,e[r])}return n}};e.prependAll=z;var V=function(t){return function(n){var r=e.tail(n);return e.isNonEmpty(r)?d.pipe(r,e.prependAll(t),e.prepend(e.head(n))):e.copy(n)}};e.intersperse=V;e.foldMapWithIndex=u.foldMapWithIndex;e.foldMap=u.foldMap;var H=function(t){return function(n){var r=e.fromReadonlyNonEmptyArray(t(0,e.head(n)));for(var i=1;i<n.length;i++){r.push.apply(r,t(i,n[i]))}return r}};e.chainWithIndex=H;var K=function(t){return function(n){var r=t(n),i=r[0],o=r[1];var a=[i];var s=o;while(e.isNonEmpty(s)){var u=t(s),c=u[0],l=u[1];a.push(c);s=l}return a}};e.chop=K;var G=function(t){return function(n){var r=Math.max(1,t);return r>=n.length?[e.copy(n),[]]:[d.pipe(n.slice(1,r),e.prepend(e.head(n))),n.slice(r)]}};e.splitAt=G;var J=function(t){return e.chop(e.splitAt(t))};e.chunksOf=J;var $=function(t,n){return d.pipe(t,e.map(n))};var X=function(t,n){return d.pipe(t,e.mapWithIndex(n))};var Y=function(t,n){return d.pipe(t,e.ap(n))};var Q=function(t,n){return d.pipe(t,e.chain(n))};var Z=function(t,n){return d.pipe(t,e.extend(n))};var tt=function(t,n,r){return d.pipe(t,e.reduce(n,r))};var et=function(t){var n=e.foldMap(t);return function(t,e){return d.pipe(t,n(e))}};var nt=function(t,n,r){return d.pipe(t,e.reduceRight(n,r))};var rt=function(t){var n=e.traverse(t);return function(t,e){return d.pipe(t,n(e))}};var it=function(t,n){return d.pipe(t,e.alt(n))};var ot=function(t,n,r){return d.pipe(t,e.reduceWithIndex(n,r))};var at=function(t){var n=e.foldMapWithIndex(t);return function(t,e){return d.pipe(t,n(e))}};var st=function(t,n,r){return d.pipe(t,e.reduceRightWithIndex(n,r))};var ut=function(t){var n=e.traverseWithIndex(t);return function(t,e){return d.pipe(t,n(e))}};var ct=function(t){return function(e){return E(e,t())}};e.altW=ct;e.alt=e.altW;var lt=function(t){return e.chain((function(n){return d.pipe(t,e.map(n))}))};e.ap=lt;var ft=function(t){return e.chainWithIndex((function(e,n){return t(n)}))};e.chain=ft;var ht=function(t){return function(n){var r=e.tail(n);var i=[t(n)];while(e.isNonEmpty(r)){i.push(t(r));r=e.tail(r)}return i}};e.extend=ht;e.duplicate=e.extend(d.identity);e.flatten=e.chain(d.identity);var dt=function(t){return e.mapWithIndex((function(e,n){return t(n)}))};e.map=dt;var pt=function(t){return function(n){var r=[t(0,e.head(n))];for(var i=1;i<n.length;i++){r.push(t(i,n[i]))}return r}};e.mapWithIndex=pt;e.reduce=u.reduce;e.reduceWithIndex=u.reduceWithIndex;e.reduceRight=u.reduceRight;e.reduceRightWithIndex=u.reduceRightWithIndex;var vt=function(t){var n=e.traverseWithIndex(t);return function(t){return n((function(e,n){return t(n)}))}};e.traverse=vt;var mt=function(t){return e.traverseWithIndex(t)((function(t,e){return e}))};e.sequence=mt;var gt=function(t){return function(n){return function(r){var i=t.map(n(0,e.head(r)),e.of);for(var o=1;o<r.length;o++){i=t.ap(t.map(i,(function(t){return function(n){return d.pipe(t,e.append(n))}})),n(o,r[o]))}return i}}};e.traverseWithIndex=gt;e.extract=u.head;e.URI="NonEmptyArray";e.getShow=u.getShow;var yt=function(){return{concat:E}};e.getSemigroup=yt;e.getEq=u.getEq;e.Functor={URI:e.URI,map:$};e.flap=g.flap(e.Functor);e.Pointed={URI:e.URI,of:e.of};e.FunctorWithIndex={URI:e.URI,map:$,mapWithIndex:X};e.Apply={URI:e.URI,map:$,ap:Y};e.apFirst=m.apFirst(e.Apply);e.apSecond=m.apSecond(e.Apply);e.Applicative={URI:e.URI,map:$,ap:Y,of:e.of};e.Chain={URI:e.URI,map:$,ap:Y,chain:Q};e.chainFirst=w.chainFirst(e.Chain);e.Monad={URI:e.URI,map:$,ap:Y,of:e.of,chain:Q};e.Foldable={URI:e.URI,reduce:tt,foldMap:et,reduceRight:nt};e.FoldableWithIndex={URI:e.URI,reduce:tt,foldMap:et,reduceRight:nt,reduceWithIndex:ot,foldMapWithIndex:at,reduceRightWithIndex:st};e.Traversable={URI:e.URI,map:$,reduce:tt,foldMap:et,reduceRight:nt,traverse:rt,sequence:e.sequence};e.TraversableWithIndex={URI:e.URI,map:$,mapWithIndex:X,reduce:tt,foldMap:et,reduceRight:nt,traverse:rt,sequence:e.sequence,reduceWithIndex:ot,foldMapWithIndex:at,reduceRightWithIndex:st,traverseWithIndex:ut};e.Alt={URI:e.URI,map:$,alt:it};e.Comonad={URI:e.URI,map:$,extend:Z,extract:e.extract};e.Do=e.of({});e.bindTo=g.bindTo(e.Functor);e.bind=w.bind(e.Chain);e.apS=m.apS(e.Apply);e.head=u.head;var bt=function(t){return t.slice(1)};e.tail=bt;e.last=u.last;var wt=function(t){return t.slice(0,-1)};e.init=wt;e.min=u.min;e.max=u.max;var xt=function(t){return function(e){return e.reduce(t.concat)}};e.concatAll=xt;function kt(t){return e.filterWithIndex((function(e,n){return t(n)}))}e.filter=kt;var St=function(t){return function(n){return e.fromArray(n.filter((function(e,n){return t(n,e)})))}};e.filterWithIndex=St;e.uncons=e.unprepend;e.unsnoc=e.unappend;function At(t,n){return n===undefined?e.prepend(t):d.pipe(n,e.prepend(t))}e.cons=At;var Mt=function(t,n){return d.pipe(t,e.append(n))};e.snoc=Mt;e.prependToAll=e.prependAll;e.fold=u.concatAll;e.nonEmptyArray={URI:e.URI,of:e.of,map:$,mapWithIndex:X,ap:Y,chain:Q,extend:Z,extract:e.extract,reduce:tt,foldMap:et,reduceRight:nt,traverse:rt,sequence:e.sequence,reduceWithIndex:ot,foldMapWithIndex:at,reduceRightWithIndex:st,traverseWithIndex:ut,alt:it}}));var zp=f((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.boundedNumber=void 0;e.boundedNumber={equals:jp.ordNumber.equals,compare:jp.ordNumber.compare,top:Infinity,bottom:-Infinity}}));var Vp=f((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.fieldNumber=e.lcm=e.gcd=void 0;function n(t,e){var n=e.zero;var r=function(i,o){return t.equals(o,n)?i:r(o,e.mod(i,o))};return r}e.gcd=n;function r(t,e){var r=e.zero;var i=n(t,e);return function(n,o){return t.equals(n,r)||t.equals(o,r)?r:e.div(e.mul(n,o),i(n,o))}}e.lcm=r;e.fieldNumber={add:function(t,e){return t+e},zero:0,mul:function(t,e){return t*e},one:1,sub:function(t,e){return t-e},degree:function(t){return 1},div:function(t,e){return t/e},mod:function(t,e){return t%e}}}));var Hp=f((function(t,e){var n=h&&h.__createBinding||(Object.create?function(t,e,n,r){if(r===undefined)r=n;Object.defineProperty(t,r,{enumerable:true,get:function(){return e[n]}})}:function(t,e,n,r){if(r===undefined)r=n;t[r]=e[n]});var r=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var i=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i))n(e,t,i);r(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.showNumber=e.showString=e.showBoolean=e.getStructShow=e.getTupleShow=e.tuple=e.struct=void 0;var o=i(x);var a=function(t){return{show:function(e){var n="{";for(var r in t){if(o.has.call(t,r)){n+=" "+r+": "+t[r].show(e[r])+","}}if(n.length>1){n=n.slice(0,-1)+" "}n+="}";return n}}};e.struct=a;var s=function(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}return{show:function(e){return"["+e.map((function(e,n){return t[n].show(e)})).join(", ")+"]"}}};e.tuple=s;e.getTupleShow=e.tuple;e.getStructShow=e.struct;e.showBoolean={show:function(t){return JSON.stringify(t)}};e.showString={show:function(t){return JSON.stringify(t)}};e.showNumber={show:function(t){return JSON.stringify(t)}}}));var Kp=f((function(t,e){var n=h&&h.__createBinding||(Object.create?function(t,e,n,r){if(r===undefined)r=n;Object.defineProperty(t,r,{enumerable:true,get:function(){return e[n]}})}:function(t,e,n,r){if(r===undefined)r=n;t[r]=e[n]});var r=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var i=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i))n(e,t,i);r(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.monoidProduct=e.monoidSum=e.monoidString=e.getEndomorphismMonoid=e.getFunctionMonoid=e.monoidAny=e.monoidAll=e.fold=e.getMeetMonoid=e.getJoinMonoid=e.getDualMonoid=e.getStructMonoid=e.getTupleMonoid=e.concatAll=e.monoidVoid=e.tuple=e.struct=e.reverse=e.max=e.min=void 0;var o=i(x);var a=i(qp);var s=function(t){return{concat:a.min(t).concat,empty:t.top}};e.min=s;var u=function(t){return{concat:a.max(t).concat,empty:t.bottom}};e.max=u;var c=function(t){return{concat:a.reverse(t).concat,empty:t.empty}};e.reverse=c;var l=function(t){var e={};for(var n in t){if(o.has.call(t,n)){e[n]=t[n].empty}}return{concat:a.struct(t).concat,empty:e}};e.struct=l;var f=function(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}return{concat:a.tuple.apply(a,t).concat,empty:t.map((function(t){return t.empty}))}};e.tuple=f;e.monoidVoid={concat:a.semigroupVoid.concat,empty:undefined};var p=function(t){return a.concatAll(t)(t.empty)};e.concatAll=p;e.getTupleMonoid=e.tuple;e.getStructMonoid=e.struct;e.getDualMonoid=e.reverse;e.getJoinMonoid=e.max;e.getMeetMonoid=e.min;e.fold=e.concatAll;e.monoidAll={concat:a.semigroupAll.concat,empty:true};e.monoidAny={concat:a.semigroupAny.concat,empty:false};e.getFunctionMonoid=d.getMonoid;var v=function(){return e.reverse(d.getEndomorphismMonoid())};e.getEndomorphismMonoid=v;e.monoidString={concat:a.semigroupString.concat,empty:""};e.monoidSum={concat:a.semigroupSum.concat,empty:0};e.monoidProduct={concat:a.semigroupProduct.concat,empty:1}}));var Gp=f((function(t,e){var n=h&&h.__createBinding||(Object.create?function(t,e,n,r){if(r===undefined)r=n;Object.defineProperty(t,r,{enumerable:true,get:function(){return e[n]}})}:function(t,e,n,r){if(r===undefined)r=n;t[r]=e[n]});var r=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var i=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i))n(e,t,i);r(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.MonoidProduct=e.MonoidSum=e.SemigroupProduct=e.SemigroupSum=e.Show=e.Field=e.Bounded=e.Ord=e.Eq=void 0;var o=i(zp);var a=i(y);var s=i(Vp);var u=i(jp);var c=i(Hp);e.Eq=a.eqNumber;e.Ord=u.ordNumber;e.Bounded=o.boundedNumber;e.Field=s.fieldNumber;e.Show=c.showNumber;e.SemigroupSum=qp.semigroupSum;e.SemigroupProduct=qp.semigroupProduct;e.MonoidSum=Kp.monoidSum;e.MonoidProduct=Kp.monoidProduct}));var Jp=f((function(t,e){var n=h&&h.__createBinding||(Object.create?function(t,e,n,r){if(r===undefined)r=n;Object.defineProperty(t,r,{enumerable:true,get:function(){return e[n]}})}:function(t,e,n,r){if(r===undefined)r=n;t[r]=e[n]});var r=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var i=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i))n(e,t,i);r(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.uniq=e.elem=e.rotate=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.sort=e.lefts=e.rights=e.reverse=e.modifyAt=e.deleteAt=e.updateAt=e.insertAt=e.findLastIndex=e.findLastMap=e.findLast=e.findFirstMap=e.findFirst=e.findIndex=e.dropLeftWhile=e.dropRight=e.dropLeft=e.spanLeft=e.takeLeftWhile=e.takeRight=e.takeLeft=e.init=e.tail=e.last=e.head=e.lookup=e.isOutOfBound=e.size=e.isNonEmpty=e.isEmpty=e.scanRight=e.scanLeft=e.chainWithIndex=e.foldRight=e.matchRight=e.foldLeft=e.matchLeft=e.replicate=e.range=e.makeBy=e.append=e.prepend=void 0;e.Pointed=e.flap=e.Functor=e.getOrd=e.getEq=e.getMonoid=e.getSemigroup=e.getShow=e.URI=e.unfold=e.wilt=e.wither=e.traverseWithIndex=e.sequence=e.traverse=e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.foldMap=e.reduce=e.foldMapWithIndex=e.duplicate=e.extend=e.filterWithIndex=e.partitionMapWithIndex=e.partitionMap=e.partitionWithIndex=e.partition=e.compact=e.filterMap=e.filterMapWithIndex=e.filter=e.separate=e.mapWithIndex=e.map=e.flatten=e.chain=e.ap=e.alt=e.altW=e.zero=e.of=e.difference=e.intersection=e.union=e.comprehension=e.chunksOf=e.splitAt=e.chop=e.sortBy=void 0;e.readonlyArray=e.prependToAll=e.snoc=e.cons=e.apS=e.bind=e.bindTo=e.Do=e.some=e.every=e.empty=e.fromArray=e.toArray=e.unsafeDeleteAt=e.unsafeUpdateAt=e.unsafeInsertAt=e.Witherable=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.FilterableWithIndex=e.Filterable=e.Compactable=e.Extend=e.Alternative=e.Alt=e.Unfoldable=e.chainFirst=e.Monad=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=void 0;var o=i(Gp);var a=i(S);var s=i(Up);e.prepend=s.prepend;e.append=s.append;var u=function(t,n){return t<=0?e.empty:s.makeBy(t,n)};e.makeBy=u;var c=function(t,n){return t<=n?e.makeBy(n-t+1,(function(e){return t+e})):[t]};e.range=c;var l=function(t,n){return e.makeBy(t,(function(){return n}))};e.replicate=l;var f=function(t,n){return function(r){return e.isNonEmpty(r)?n(s.head(r),s.tail(r)):t()}};e.matchLeft=f;e.foldLeft=e.matchLeft;var p=function(t,n){return function(r){return e.isNonEmpty(r)?n(s.init(r),s.last(r)):t()}};e.matchRight=p;e.foldRight=e.matchRight;var v=function(t){return function(n){if(e.isEmpty(n)){return e.empty}var r=[];for(var i=0;i<n.length;i++){r.push.apply(r,t(i,n[i]))}return r}};e.chainWithIndex=v;var b=function(t,e){return function(n){var r=n.length;var i=new Array(r+1);i[0]=t;for(var o=0;o<r;o++){i[o+1]=e(i[o],n[o])}return i}};e.scanLeft=b;var x=function(t,e){return function(n){var r=n.length;var i=new Array(r+1);i[r]=t;for(var o=r-1;o>=0;o--){i[o]=e(n[o],i[o+1])}return i}};e.scanRight=x;var A=function(t){return t.length===0};e.isEmpty=A;e.isNonEmpty=s.isNonEmpty;var M=function(t){return t.length};e.size=M;e.isOutOfBound=s.isOutOfBound;function C(t,n){return n===undefined?function(e){return C(t,e)}:e.isOutOfBound(t,n)?a.none:a.some(n[t])}e.lookup=C;var O=function(t){return e.isNonEmpty(t)?a.some(s.head(t)):a.none};e.head=O;var I=function(t){return e.isNonEmpty(t)?a.some(s.last(t)):a.none};e.last=I;var R=function(t){return e.isNonEmpty(t)?a.some(s.tail(t)):a.none};e.tail=R;var E=function(t){return e.isNonEmpty(t)?a.some(s.init(t)):a.none};e.init=E;var P=function(t){return function(n){return e.isOutOfBound(t,n)?n:t===0?e.empty:n.slice(0,t)}};e.takeLeft=P;var D=function(t){return function(n){return e.isOutOfBound(t,n)?n:t===0?e.empty:n.slice(-t)}};e.takeRight=D;function T(t){return function(n){var r=[];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(!t(a)){break}r.push(a)}var s=r.length;return s===n.length?n:s===0?e.empty:r}}e.takeLeftWhile=T;var W=function(t,e){var n=t.length;var r=0;for(;r<n;r++){if(!e(t[r])){break}}return r};function L(t){return function(n){var r=e.splitAt(W(n,t))(n),i=r[0],o=r[1];return{init:i,rest:o}}}e.spanLeft=L;var N=function(t){return function(n){return t<=0||e.isEmpty(n)?n:t>=n.length?e.empty:n.slice(t,n.length)}};e.dropLeft=N;var _=function(t){return function(n){return t<=0||e.isEmpty(n)?n:t>=n.length?e.empty:n.slice(0,n.length-t)}};e.dropRight=_;var B=function(t){return function(n){var r=W(n,t);return r===0?n:r===n.length?e.empty:n.slice(r)}};e.dropLeftWhile=B;var j=function(t){return function(e){for(var n=0;n<e.length;n++){if(t(e[n])){return a.some(n)}}return a.none}};e.findIndex=j;function q(t){return function(e){for(var n=0;n<e.length;n++){if(t(e[n])){return a.some(e[n])}}return a.none}}e.findFirst=q;var U=function(t){return function(e){for(var n=0;n<e.length;n++){var r=t(e[n]);if(a.isSome(r)){return r}}return a.none}};e.findFirstMap=U;function F(t){return function(e){for(var n=e.length-1;n>=0;n--){if(t(e[n])){return a.some(e[n])}}return a.none}}e.findLast=F;var z=function(t){return function(e){for(var n=e.length-1;n>=0;n--){var r=t(e[n]);if(a.isSome(r)){return r}}return a.none}};e.findLastMap=z;var V=function(t){return function(e){for(var n=e.length-1;n>=0;n--){if(t(e[n])){return a.some(n)}}return a.none}};e.findLastIndex=V;e.insertAt=s.insertAt;var H=function(t,n){return e.modifyAt(t,(function(){return n}))};e.updateAt=H;var K=function(t){return function(n){return e.isOutOfBound(t,n)?a.none:a.some(e.unsafeDeleteAt(t,n))}};e.deleteAt=K;var G=function(t,n){return function(r){return e.isOutOfBound(t,r)?a.none:a.some(e.unsafeUpdateAt(t,n(r[t]),r))}};e.modifyAt=G;var J=function(t){return t.length<=1?t:t.slice().reverse()};e.reverse=J;var $=function(t){var e=[];for(var n=0;n<t.length;n++){var r=t[n];if(r._tag==="Right"){e.push(r.right)}}return e};e.rights=$;var X=function(t){var e=[];for(var n=0;n<t.length;n++){var r=t[n];if(r._tag==="Left"){e.push(r.left)}}return e};e.lefts=X;var Y=function(t){return function(e){return e.length<=1?e:e.slice().sort(t.compare)}};e.sort=Y;var Q=function(t,e,n){var r=[];var i=Math.min(t.length,e.length);for(var o=0;o<i;o++){r[o]=n(t[o],e[o])}return r};e.zipWith=Q;function Z(t,n){if(n===undefined){return function(e){return Z(e,t)}}return e.zipWith(t,n,(function(t,e){return[t,e]}))}e.zip=Z;var tt=function(t){var e=[];var n=[];for(var r=0;r<t.length;r++){e[r]=t[r][0];n[r]=t[r][1]}return[e,n]};e.unzip=tt;var et=function(t){var n=s.prependAll(t);return function(t){return e.isNonEmpty(t)?n(t):t}};e.prependAll=et;var nt=function(t){var n=s.intersperse(t);return function(t){return e.isNonEmpty(t)?n(t):t}};e.intersperse=nt;var rt=function(t){var n=s.rotate(t);return function(t){return e.isNonEmpty(t)?n(t):t}};e.rotate=rt;function it(t){return function(e,n){if(n===undefined){var r=it(t);return function(t){return r(e,t)}}var i=function(n){return t.equals(n,e)};var o=0;for(;o<n.length;o++){if(i(n[o])){return true}}return false}}e.elem=it;var ot=function(t){var n=s.uniq(t);return function(t){return e.isNonEmpty(t)?n(t):t}};e.uniq=ot;var at=function(t){var n=s.sortBy(t);return function(t){return e.isNonEmpty(t)?n(t):t}};e.sortBy=at;var st=function(t){var n=s.chop(t);return function(t){return e.isNonEmpty(t)?n(t):e.empty}};e.chop=st;var ut=function(t){return function(n){return t>=1&&e.isNonEmpty(n)?s.splitAt(t)(n):e.isEmpty(n)?[n,e.empty]:[e.empty,n]}};e.splitAt=ut;var ct=function(t){var n=s.chunksOf(t);return function(t){return e.isNonEmpty(t)?n(t):e.empty}};e.chunksOf=ct;function lt(t,n,r){if(r===void 0){r=function(){return true}}var i=function(t,o){return e.isNonEmpty(o)?d.pipe(s.head(o),e.chain((function(n){return i(d.pipe(t,e.append(n)),s.tail(o))}))):r.apply(void 0,t)?[n.apply(void 0,t)]:e.empty};return i(e.empty,t)}e.comprehension=lt;function ft(t){var n=s.union(t);return function(r,i){if(i===undefined){var o=ft(t);return function(t){return o(t,r)}}return e.isNonEmpty(r)&&e.isNonEmpty(i)?n(r,i):e.isNonEmpty(r)?r:i}}e.union=ft;function ht(t){var e=it(t);return function(n,r){if(r===undefined){var i=ht(t);return function(t){return i(t,n)}}return n.filter((function(t){return e(t,r)}))}}e.intersection=ht;function dt(t){var e=it(t);return function(n,r){if(r===undefined){var i=dt(t);return function(t){return i(t,n)}}return n.filter((function(t){return!e(t,r)}))}}e.difference=dt;var pt=function(t,n){return d.pipe(t,e.map(n))};var vt=function(t,n){return d.pipe(t,e.mapWithIndex(n))};var mt=function(t,n){return d.pipe(t,e.ap(n))};var gt=function(t,n){return d.pipe(t,e.chain(n))};var yt=function(t,n){return d.pipe(t,e.filter(n))};var bt=function(t,n){return d.pipe(t,e.filterMap(n))};var wt=function(t,n){return d.pipe(t,e.partition(n))};var xt=function(t,n){return d.pipe(t,e.partitionMap(n))};var kt=function(t,n){return d.pipe(t,e.partitionWithIndex(n))};var St=function(t,n){return d.pipe(t,e.partitionMapWithIndex(n))};var At=function(t,n){return d.pipe(t,e.alt(n))};var Mt=function(t,n,r){return d.pipe(t,e.reduce(n,r))};var Ct=function(t){var n=e.foldMap(t);return function(t,e){return d.pipe(t,n(e))}};var Ot=function(t,n,r){return d.pipe(t,e.reduceRight(n,r))};var It=function(t,n,r){return d.pipe(t,e.reduceWithIndex(n,r))};var Rt=function(t){var n=e.foldMapWithIndex(t);return function(t,e){return d.pipe(t,n(e))}};var Et=function(t,n,r){return d.pipe(t,e.reduceRightWithIndex(n,r))};var Pt=function(t,n){return d.pipe(t,e.filterMapWithIndex(n))};var Dt=function(t,n){return d.pipe(t,e.filterWithIndex(n))};var Tt=function(t,n){return d.pipe(t,e.extend(n))};var Wt=function(t){var n=e.traverse(t);return function(t,e){return d.pipe(t,n(e))}};var Lt=function(t){var n=e.traverseWithIndex(t);return function(t,e){return d.pipe(t,n(e))}};var Nt=function(t){var n=e.wither(t);return function(t,e){return d.pipe(t,n(e))}};var _t=function(t){var n=e.wilt(t);return function(t,e){return d.pipe(t,n(e))}};e.of=s.of;var Bt=function(){return e.empty};e.zero=Bt;var jt=function(t){return function(e){return e.concat(t())}};e.altW=jt;e.alt=e.altW;var qt=function(t){return e.chain((function(n){return d.pipe(t,e.map(n))}))};e.ap=qt;var Ut=function(t){return function(n){return d.pipe(n,e.chainWithIndex((function(e,n){return t(n)})))}};e.chain=Ut;e.flatten=e.chain(d.identity);var Ft=function(t){return function(e){return e.map((function(e){return t(e)}))}};e.map=Ft;var zt=function(t){return function(e){return e.map((function(e,n){return t(n,e)}))}};e.mapWithIndex=zt;var Vt=function(t){var e=[];var n=[];for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o._tag==="Left"){e.push(o.left)}else{n.push(o.right)}}return k.separated(e,n)};e.separate=Vt;var Ht=function(t){return function(e){return e.filter(t)}};e.filter=Ht;var Kt=function(t){return function(e){var n=[];for(var r=0;r<e.length;r++){var i=t(r,e[r]);if(a.isSome(i)){n.push(i.value)}}return n}};e.filterMapWithIndex=Kt;var Gt=function(t){return e.filterMapWithIndex((function(e,n){return t(n)}))};e.filterMap=Gt;e.compact=e.filterMap(d.identity);var Jt=function(t){return e.partitionWithIndex((function(e,n){return t(n)}))};e.partition=Jt;var $t=function(t){return function(e){var n=[];var r=[];for(var i=0;i<e.length;i++){var o=e[i];if(t(i,o)){r.push(o)}else{n.push(o)}}return k.separated(n,r)}};e.partitionWithIndex=$t;var Xt=function(t){return e.partitionMapWithIndex((function(e,n){return t(n)}))};e.partitionMap=Xt;var Yt=function(t){return function(e){var n=[];var r=[];for(var i=0;i<e.length;i++){var o=t(i,e[i]);if(o._tag==="Left"){n.push(o.left)}else{r.push(o.right)}}return k.separated(n,r)}};e.partitionMapWithIndex=Yt;var Qt=function(t){return function(e){return e.filter((function(e,n){return t(n,e)}))}};e.filterWithIndex=Qt;var Zt=function(t){return function(e){return e.map((function(n,r){return t(e.slice(r))}))}};e.extend=Zt;e.duplicate=e.extend(d.identity);var te=function(t){return function(e){return function(n){return n.reduce((function(n,r,i){return t.concat(n,e(i,r))}),t.empty)}}};e.foldMapWithIndex=te;var ee=function(t,n){return e.reduceWithIndex(t,(function(t,e,r){return n(e,r)}))};e.reduce=ee;var ne=function(t){var n=e.foldMapWithIndex(t);return function(t){return n((function(e,n){return t(n)}))}};e.foldMap=ne;var re=function(t,e){return function(n){var r=n.length;var i=t;for(var o=0;o<r;o++){i=e(o,i,n[o])}return i}};e.reduceWithIndex=re;var ie=function(t,n){return e.reduceRightWithIndex(t,(function(t,e,r){return n(e,r)}))};e.reduceRight=ie;var oe=function(t,e){return function(n){return n.reduceRight((function(t,n,r){return e(r,n,t)}),t)}};e.reduceRightWithIndex=oe;var ae=function(t){var n=e.traverseWithIndex(t);return function(t){return n((function(e,n){return t(n)}))}};e.traverse=ae;var se=function(t){return function(n){return Mt(n,t.of(e.zero()),(function(n,r){return t.ap(t.map(n,(function(t){return function(n){return d.pipe(t,e.append(n))}})),r)}))}};e.sequence=se;var ue=function(t){return function(n){return e.reduceWithIndex(t.of(e.zero()),(function(r,i,o){return t.ap(t.map(i,(function(t){return function(n){return d.pipe(t,e.append(n))}})),n(r,o))}))}};e.traverseWithIndex=ue;var ce=function(t){var n=e.traverse(t);return function(r){return function(i){return t.map(d.pipe(i,n(r)),e.compact)}}};e.wither=ce;var le=function(t){var n=e.traverse(t);return function(r){return function(i){return t.map(d.pipe(i,n(r)),e.separate)}}};e.wilt=le;var fe=function(t,e){var n=[];var r=t;while(true){var i=e(r);if(a.isSome(i)){var o=i.value,s=o[0],u=o[1];n.push(s);r=u}else{break}}return n};e.unfold=fe;e.URI="ReadonlyArray";var he=function(t){return{show:function(e){return"["+e.map(t.show).join(", ")+"]"}}};e.getShow=he;var de=function(){return{concat:function(t,n){return e.isEmpty(t)?n:e.isEmpty(n)?t:t.concat(n)}}};e.getSemigroup=de;var pe=function(){return{concat:e.getSemigroup().concat,empty:e.empty}};e.getMonoid=pe;var ve=function(t){return y.fromEquals((function(e,n){return e.length===n.length&&e.every((function(e,r){return t.equals(e,n[r])}))}))};e.getEq=ve;var me=function(t){return jp.fromCompare((function(e,n){var r=e.length;var i=n.length;var a=Math.min(r,i);for(var s=0;s<a;s++){var u=t.compare(e[s],n[s]);if(u!==0){return u}}return o.Ord.compare(r,i)}))};e.getOrd=me;e.Functor={URI:e.URI,map:pt};e.flap=g.flap(e.Functor);e.Pointed={URI:e.URI,of:e.of};e.FunctorWithIndex={URI:e.URI,map:pt,mapWithIndex:vt};e.Apply={URI:e.URI,map:pt,ap:mt};e.apFirst=m.apFirst(e.Apply);e.apSecond=m.apSecond(e.Apply);e.Applicative={URI:e.URI,map:pt,ap:mt,of:e.of};e.Chain={URI:e.URI,map:pt,ap:mt,chain:gt};e.Monad={URI:e.URI,map:pt,ap:mt,of:e.of,chain:gt};e.chainFirst=w.chainFirst(e.Chain);e.Unfoldable={URI:e.URI,unfold:e.unfold};e.Alt={URI:e.URI,map:pt,alt:At};e.Alternative={URI:e.URI,map:pt,ap:mt,of:e.of,alt:At,zero:e.zero};e.Extend={URI:e.URI,map:pt,extend:Tt};e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate};e.Filterable={URI:e.URI,map:pt,compact:e.compact,separate:e.separate,filter:yt,filterMap:bt,partition:wt,partitionMap:xt};e.FilterableWithIndex={URI:e.URI,map:pt,mapWithIndex:vt,compact:e.compact,separate:e.separate,filter:yt,filterMap:bt,partition:wt,partitionMap:xt,partitionMapWithIndex:St,partitionWithIndex:kt,filterMapWithIndex:Pt,filterWithIndex:Dt};e.Foldable={URI:e.URI,reduce:Mt,foldMap:Ct,reduceRight:Ot};e.FoldableWithIndex={URI:e.URI,reduce:Mt,foldMap:Ct,reduceRight:Ot,reduceWithIndex:It,foldMapWithIndex:Rt,reduceRightWithIndex:Et};e.Traversable={URI:e.URI,map:pt,reduce:Mt,foldMap:Ct,reduceRight:Ot,traverse:Wt,sequence:e.sequence};e.TraversableWithIndex={URI:e.URI,map:pt,mapWithIndex:vt,reduce:Mt,foldMap:Ct,reduceRight:Ot,reduceWithIndex:It,foldMapWithIndex:Rt,reduceRightWithIndex:Et,traverse:Wt,sequence:e.sequence,traverseWithIndex:Lt};e.Witherable={URI:e.URI,map:pt,compact:e.compact,separate:e.separate,filter:yt,filterMap:bt,partition:wt,partitionMap:xt,reduce:Mt,foldMap:Ct,reduceRight:Ot,traverse:Wt,sequence:e.sequence,wither:Nt,wilt:_t};e.unsafeInsertAt=s.unsafeInsertAt;var ge=function(t,n,r){return e.isNonEmpty(r)?s.unsafeUpdateAt(t,n,r):r};e.unsafeUpdateAt=ge;var ye=function(t,e){var n=e.slice();n.splice(t,1);return n};e.unsafeDeleteAt=ye;var be=function(t){return t.slice()};e.toArray=be;var we=function(t){return e.isEmpty(t)?e.empty:t.slice()};e.fromArray=we;e.empty=s.empty;var xe=function(t){return function(e){return e.every(t)}};e.every=xe;var ke=function(t){return function(e){return e.some(t)}};e.some=ke;e.Do=e.of({});e.bindTo=g.bindTo(e.Functor);e.bind=w.bind(e.Chain);e.apS=m.apS(e.Apply);e.cons=s.cons;e.snoc=s.snoc;e.prependToAll=e.prependAll;e.readonlyArray={URI:e.URI,compact:e.compact,separate:e.separate,map:pt,ap:mt,of:e.of,chain:gt,filter:yt,filterMap:bt,partition:wt,partitionMap:xt,mapWithIndex:vt,partitionMapWithIndex:St,partitionWithIndex:kt,filterMapWithIndex:Pt,filterWithIndex:Dt,alt:At,zero:e.zero,unfold:e.unfold,reduce:Mt,foldMap:Ct,reduceRight:Ot,traverse:Wt,sequence:e.sequence,reduceWithIndex:It,foldMapWithIndex:Rt,reduceRightWithIndex:Et,traverseWithIndex:Lt,extend:Tt,wither:Nt,wilt:_t}}));var $p=f((function(t,e){var n=h&&h.__createBinding||(Object.create?function(t,e,n,r){if(r===undefined)r=n;Object.defineProperty(t,r,{enumerable:true,get:function(){return e[n]}})}:function(t,e,n,r){if(r===undefined)r=n;t[r]=e[n]});var r=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var i=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i))n(e,t,i);r(e,t);return e};Object.defineProperty(e,"__esModule",{value:true});e.elem=e.rotate=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.sort=e.lefts=e.rights=e.reverse=e.modifyAt=e.deleteAt=e.updateAt=e.insertAt=e.copy=e.findLastIndex=e.findLastMap=e.findLast=e.findFirstMap=e.findFirst=e.findIndex=e.dropLeftWhile=e.dropRight=e.dropLeft=e.spanLeft=e.takeLeftWhile=e.takeRight=e.takeLeft=e.init=e.tail=e.last=e.head=e.lookup=e.isOutOfBound=e.size=e.isNonEmpty=e.isEmpty=e.scanRight=e.scanLeft=e.chainWithIndex=e.foldRight=e.matchRight=e.foldLeft=e.matchLeft=e.replicate=e.range=e.makeBy=e.append=e.prepend=void 0;e.flap=e.Functor=e.getOrd=e.getEq=e.getMonoid=e.getSemigroup=e.getShow=e.URI=e.unfold=e.wilt=e.wither=e.traverseWithIndex=e.sequence=e.traverse=e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.reduce=e.foldMapWithIndex=e.foldMap=e.duplicate=e.extend=e.filterWithIndex=e.alt=e.altW=e.partitionMapWithIndex=e.partitionMap=e.partitionWithIndex=e.partition=e.filter=e.separate=e.compact=e.filterMap=e.filterMapWithIndex=e.mapWithIndex=e.flatten=e.chain=e.ap=e.map=e.zero=e.of=e.difference=e.intersection=e.union=e.comprehension=e.chunksOf=e.splitAt=e.chop=e.sortBy=e.uniq=void 0;e.array=e.prependToAll=e.snoc=e.cons=e.empty=e.apS=e.bind=e.bindTo=e.Do=e.some=e.every=e.unsafeDeleteAt=e.unsafeUpdateAt=e.unsafeInsertAt=e.Witherable=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.FilterableWithIndex=e.Filterable=e.Compactable=e.Extend=e.Alternative=e.Alt=e.Unfoldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=void 0;var o=i(Fp);var a=i(S);var s=i(Jp);e.prepend=o.prepend;e.append=o.append;var u=function(t,e){return t<=0?[]:o.makeBy(t,e)};e.makeBy=u;var c=function(t,n){return t<=n?e.makeBy(n-t+1,(function(e){return t+e})):[t]};e.range=c;var l=function(t,n){return e.makeBy(t,(function(){return n}))};e.replicate=l;var f=function(t,n){return function(r){return e.isNonEmpty(r)?n(o.head(r),o.tail(r)):t()}};e.matchLeft=f;e.foldLeft=e.matchLeft;var p=function(t,n){return function(r){return e.isNonEmpty(r)?n(o.init(r),o.last(r)):t()}};e.matchRight=p;e.foldRight=e.matchRight;var v=function(t){return function(e){var n=[];for(var r=0;r<e.length;r++){n.push.apply(n,t(r,e[r]))}return n}};e.chainWithIndex=v;var y=function(t,e){return function(n){var r=n.length;var i=new Array(r+1);i[0]=t;for(var o=0;o<r;o++){i[o+1]=e(i[o],n[o])}return i}};e.scanLeft=y;var b=function(t,e){return function(n){var r=n.length;var i=new Array(r+1);i[r]=t;for(var o=r-1;o>=0;o--){i[o]=e(n[o],i[o+1])}return i}};e.scanRight=b;e.isEmpty=s.isEmpty;e.isNonEmpty=o.isNonEmpty;var x=function(t){return t.length};e.size=x;e.isOutOfBound=o.isOutOfBound;e.lookup=s.lookup;e.head=s.head;e.last=s.last;var A=function(t){return e.isNonEmpty(t)?a.some(o.tail(t)):a.none};e.tail=A;var M=function(t){return e.isNonEmpty(t)?a.some(o.init(t)):a.none};e.init=M;var C=function(t){return function(n){return e.isOutOfBound(t,n)?e.copy(n):n.slice(0,t)}};e.takeLeft=C;var O=function(t){return function(n){return e.isOutOfBound(t,n)?e.copy(n):t===0?[]:n.slice(-t)}};e.takeRight=O;function I(t){return function(e){var n=[];for(var r=0,i=e;r<i.length;r++){var o=i[r];if(!t(o)){break}n.push(o)}return n}}e.takeLeftWhile=I;var R=function(t,e){var n=t.length;var r=0;for(;r<n;r++){if(!e(t[r])){break}}return r};function E(t){return function(n){var r=e.splitAt(R(n,t))(n),i=r[0],o=r[1];return{init:i,rest:o}}}e.spanLeft=E;var P=function(t){return function(n){return t<=0||e.isEmpty(n)?e.copy(n):t>=n.length?[]:n.slice(t,n.length)}};e.dropLeft=P;var D=function(t){return function(n){return t<=0||e.isEmpty(n)?e.copy(n):t>=n.length?[]:n.slice(0,n.length-t)}};e.dropRight=D;var T=function(t){return function(e){return e.slice(R(e,t))}};e.dropLeftWhile=T;e.findIndex=s.findIndex;function W(t){return s.findFirst(t)}e.findFirst=W;e.findFirstMap=s.findFirstMap;function L(t){return s.findLast(t)}e.findLast=L;e.findLastMap=s.findLastMap;e.findLastIndex=s.findLastIndex;var N=function(t){return t.slice()};e.copy=N;var _=function(t,n){return function(r){return t<0||t>r.length?a.none:a.some(e.unsafeInsertAt(t,n,r))}};e.insertAt=_;var B=function(t,n){return e.modifyAt(t,(function(){return n}))};e.updateAt=B;var j=function(t){return function(n){return e.isOutOfBound(t,n)?a.none:a.some(e.unsafeDeleteAt(t,n))}};e.deleteAt=j;var q=function(t,n){return function(r){return e.isOutOfBound(t,r)?a.none:a.some(e.unsafeUpdateAt(t,n(r[t]),r))}};e.modifyAt=q;var U=function(t){return e.isEmpty(t)?[]:t.slice().reverse()};e.reverse=U;var F=function(t){var e=[];for(var n=0;n<t.length;n++){var r=t[n];if(r._tag==="Right"){e.push(r.right)}}return e};e.rights=F;var z=function(t){var e=[];for(var n=0;n<t.length;n++){var r=t[n];if(r._tag==="Left"){e.push(r.left)}}return e};e.lefts=z;var V=function(t){return function(n){return n.length<=1?e.copy(n):n.slice().sort(t.compare)}};e.sort=V;var H=function(t,e,n){var r=[];var i=Math.min(t.length,e.length);for(var o=0;o<i;o++){r[o]=n(t[o],e[o])}return r};e.zipWith=H;function K(t,n){if(n===undefined){return function(e){return K(e,t)}}return e.zipWith(t,n,(function(t,e){return[t,e]}))}e.zip=K;var G=function(t){var e=[];var n=[];for(var r=0;r<t.length;r++){e[r]=t[r][0];n[r]=t[r][1]}return[e,n]};e.unzip=G;var J=function(t){var n=o.prependAll(t);return function(t){return e.isNonEmpty(t)?n(t):[]}};e.prependAll=J;var $=function(t){var n=o.intersperse(t);return function(t){return e.isNonEmpty(t)?n(t):e.copy(t)}};e.intersperse=$;var X=function(t){var n=o.rotate(t);return function(t){return e.isNonEmpty(t)?n(t):e.copy(t)}};e.rotate=X;e.elem=s.elem;var Y=function(t){var n=o.uniq(t);return function(t){return e.isNonEmpty(t)?n(t):e.copy(t)}};e.uniq=Y;var Q=function(t){var n=o.sortBy(t);return function(t){return e.isNonEmpty(t)?n(t):e.copy(t)}};e.sortBy=Q;var Z=function(t){var n=o.chop(t);return function(t){return e.isNonEmpty(t)?n(t):[]}};e.chop=Z;var tt=function(t){return function(n){return t>=1&&e.isNonEmpty(n)?o.splitAt(t)(n):e.isEmpty(n)?[e.copy(n),[]]:[[],e.copy(n)]}};e.splitAt=tt;var et=function(t){var n=o.chunksOf(t);return function(t){return e.isNonEmpty(t)?n(t):[]}};e.chunksOf=et;function nt(t,n,r){if(r===void 0){r=function(){return true}}var i=function(t,a){return e.isNonEmpty(a)?d.pipe(o.head(a),e.chain((function(n){return i(d.pipe(t,e.append(n)),o.tail(a))}))):r.apply(void 0,t)?[n.apply(void 0,t)]:[]};return i([],t)}e.comprehension=nt;function rt(t){var n=o.union(t);return function(r,i){if(i===undefined){var o=rt(t);return function(t){return o(t,r)}}return e.isNonEmpty(r)&&e.isNonEmpty(i)?n(r,i):e.isNonEmpty(r)?e.copy(r):e.copy(i)}}e.union=rt;function it(t){var n=e.elem(t);return function(e,r){if(r===undefined){var i=it(t);return function(t){return i(t,e)}}return e.filter((function(t){return n(t,r)}))}}e.intersection=it;function ot(t){var n=e.elem(t);return function(e,r){if(r===undefined){var i=ot(t);return function(t){return i(t,e)}}return e.filter((function(t){return!n(t,r)}))}}e.difference=ot;var at=function(t,n){return d.pipe(t,e.map(n))};var st=function(t,n){return d.pipe(t,e.mapWithIndex(n))};var ut=function(t,n){return d.pipe(t,e.ap(n))};var ct=function(t,n){return d.pipe(t,e.chain(n))};var lt=function(t,n){return d.pipe(t,e.filter(n))};var ft=function(t,n){return d.pipe(t,e.filterMap(n))};var ht=function(t,n){return d.pipe(t,e.partition(n))};var dt=function(t,n){return d.pipe(t,e.partitionMap(n))};var pt=function(t,n){return d.pipe(t,e.partitionWithIndex(n))};var vt=function(t,n){return d.pipe(t,e.partitionMapWithIndex(n))};var mt=function(t,n){return d.pipe(t,e.alt(n))};var gt=function(t,n,r){return d.pipe(t,e.reduce(n,r))};var yt=function(t){var n=e.foldMap(t);return function(t,e){return d.pipe(t,n(e))}};var bt=function(t,n,r){return d.pipe(t,e.reduceRight(n,r))};var wt=function(t,n,r){return d.pipe(t,e.reduceWithIndex(n,r))};var xt=function(t){var n=e.foldMapWithIndex(t);return function(t,e){return d.pipe(t,n(e))}};var kt=function(t,n,r){return d.pipe(t,e.reduceRightWithIndex(n,r))};var St=function(t,n){return d.pipe(t,e.filterMapWithIndex(n))};var At=function(t,n){return d.pipe(t,e.filterWithIndex(n))};var Mt=function(t,n){return d.pipe(t,e.extend(n))};var Ct=function(t){var n=e.traverse(t);return function(t,e){return d.pipe(t,n(e))}};var Ot=function(t){var n=e.traverseWithIndex(t);return function(t,e){return d.pipe(t,n(e))}};var It=function(t){var n=e.wither(t);return function(t,e){return d.pipe(t,n(e))}};var Rt=function(t){var n=e.wilt(t);return function(t,e){return d.pipe(t,n(e))}};e.of=o.of;var Et=function(){return[]};e.zero=Et;var Pt=function(t){return function(e){return e.map((function(e){return t(e)}))}};e.map=Pt;var Dt=function(t){return e.chain((function(n){return d.pipe(t,e.map(n))}))};e.ap=Dt;var Tt=function(t){return function(n){return d.pipe(n,e.chainWithIndex((function(e,n){return t(n)})))}};e.chain=Tt;e.flatten=e.chain(d.identity);var Wt=function(t){return function(e){return e.map((function(e,n){return t(n,e)}))}};e.mapWithIndex=Wt;var Lt=function(t){return function(e){var n=[];for(var r=0;r<e.length;r++){var i=t(r,e[r]);if(a.isSome(i)){n.push(i.value)}}return n}};e.filterMapWithIndex=Lt;var Nt=function(t){return e.filterMapWithIndex((function(e,n){return t(n)}))};e.filterMap=Nt;e.compact=e.filterMap(d.identity);var _t=function(t){var e=[];var n=[];for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o._tag==="Left"){e.push(o.left)}else{n.push(o.right)}}return k.separated(e,n)};e.separate=_t;var Bt=function(t){return function(e){return e.filter(t)}};e.filter=Bt;var jt=function(t){return e.partitionWithIndex((function(e,n){return t(n)}))};e.partition=jt;var qt=function(t){return function(e){var n=[];var r=[];for(var i=0;i<e.length;i++){var o=e[i];if(t(i,o)){r.push(o)}else{n.push(o)}}return k.separated(n,r)}};e.partitionWithIndex=qt;var Ut=function(t){return e.partitionMapWithIndex((function(e,n){return t(n)}))};e.partitionMap=Ut;var Ft=function(t){return function(e){var n=[];var r=[];for(var i=0;i<e.length;i++){var o=t(i,e[i]);if(o._tag==="Left"){n.push(o.left)}else{r.push(o.right)}}return k.separated(n,r)}};e.partitionMapWithIndex=Ft;var zt=function(t){return function(e){return e.concat(t())}};e.altW=zt;e.alt=e.altW;var Vt=function(t){return function(e){return e.filter((function(e,n){return t(n,e)}))}};e.filterWithIndex=Vt;var Ht=function(t){return function(e){return e.map((function(n,r){return t(e.slice(r))}))}};e.extend=Ht;e.duplicate=e.extend(d.identity);e.foldMap=s.foldMap;e.foldMapWithIndex=s.foldMapWithIndex;e.reduce=s.reduce;e.reduceWithIndex=s.reduceWithIndex;e.reduceRight=s.reduceRight;e.reduceRightWithIndex=s.reduceRightWithIndex;var Kt=function(t){var n=e.traverseWithIndex(t);return function(t){return n((function(e,n){return t(n)}))}};e.traverse=Kt;var Gt=function(t){return function(n){return gt(n,t.of(e.zero()),(function(n,r){return t.ap(t.map(n,(function(t){return function(n){return d.pipe(t,e.append(n))}})),r)}))}};e.sequence=Gt;var Jt=function(t){return function(n){return e.reduceWithIndex(t.of(e.zero()),(function(r,i,o){return t.ap(t.map(i,(function(t){return function(n){return d.pipe(t,e.append(n))}})),n(r,o))}))}};e.traverseWithIndex=Jt;var $t=function(t){var n=e.traverse(t);return function(r){return function(i){return t.map(d.pipe(i,n(r)),e.compact)}}};e.wither=$t;var Xt=function(t){var n=e.traverse(t);return function(r){return function(i){return t.map(d.pipe(i,n(r)),e.separate)}}};e.wilt=Xt;var Yt=function(t,e){var n=[];var r=t;while(true){var i=e(r);if(a.isSome(i)){var o=i.value,s=o[0],u=o[1];n.push(s);r=u}else{break}}return n};e.unfold=Yt;e.URI="Array";e.getShow=s.getShow;var Qt=function(){return{concat:function(t,e){return t.concat(e)}}};e.getSemigroup=Qt;var Zt=function(){return{concat:e.getSemigroup().concat,empty:[]}};e.getMonoid=Zt;e.getEq=s.getEq;e.getOrd=s.getOrd;e.Functor={URI:e.URI,map:at};e.flap=g.flap(e.Functor);e.Pointed={URI:e.URI,of:e.of};e.FunctorWithIndex={URI:e.URI,map:at,mapWithIndex:st};e.Apply={URI:e.URI,map:at,ap:ut};e.apFirst=m.apFirst(e.Apply);e.apSecond=m.apSecond(e.Apply);e.Applicative={URI:e.URI,map:at,ap:ut,of:e.of};e.Chain={URI:e.URI,map:at,ap:ut,chain:ct};e.chainFirst=w.chainFirst(e.Chain);e.Monad={URI:e.URI,map:at,ap:ut,of:e.of,chain:ct};e.Unfoldable={URI:e.URI,unfold:e.unfold};e.Alt={URI:e.URI,map:at,alt:mt};e.Alternative={URI:e.URI,map:at,ap:ut,of:e.of,alt:mt,zero:e.zero};e.Extend={URI:e.URI,map:at,extend:Mt};e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate};e.Filterable={URI:e.URI,map:at,compact:e.compact,separate:e.separate,filter:lt,filterMap:ft,partition:ht,partitionMap:dt};e.FilterableWithIndex={URI:e.URI,map:at,mapWithIndex:st,compact:e.compact,separate:e.separate,filter:lt,filterMap:ft,partition:ht,partitionMap:dt,partitionMapWithIndex:vt,partitionWithIndex:pt,filterMapWithIndex:St,filterWithIndex:At};e.Foldable={URI:e.URI,reduce:gt,foldMap:yt,reduceRight:bt};e.FoldableWithIndex={URI:e.URI,reduce:gt,foldMap:yt,reduceRight:bt,reduceWithIndex:wt,foldMapWithIndex:xt,reduceRightWithIndex:kt};e.Traversable={URI:e.URI,map:at,reduce:gt,foldMap:yt,reduceRight:bt,traverse:Ct,sequence:e.sequence};e.TraversableWithIndex={URI:e.URI,map:at,mapWithIndex:st,reduce:gt,foldMap:yt,reduceRight:bt,reduceWithIndex:wt,foldMapWithIndex:xt,reduceRightWithIndex:kt,traverse:Ct,sequence:e.sequence,traverseWithIndex:Ot};e.Witherable={URI:e.URI,map:at,compact:e.compact,separate:e.separate,filter:lt,filterMap:ft,partition:ht,partitionMap:dt,reduce:gt,foldMap:yt,reduceRight:bt,traverse:Ct,sequence:e.sequence,wither:It,wilt:Rt};e.unsafeInsertAt=o.unsafeInsertAt;var te=function(t,n,r){return e.isNonEmpty(r)?o.unsafeUpdateAt(t,n,r):[]};e.unsafeUpdateAt=te;var ee=function(t,e){var n=e.slice();n.splice(t,1);return n};e.unsafeDeleteAt=ee;e.every=s.every;var ne=function(t){return function(e){return e.some(t)}};e.some=ne;e.Do=e.of({});e.bindTo=g.bindTo(e.Functor);e.bind=w.bind(e.Chain);e.apS=m.apS(e.Apply);e.empty=[];e.cons=o.cons;e.snoc=o.snoc;e.prependToAll=e.prependAll;e.array={URI:e.URI,compact:e.compact,separate:e.separate,map:at,ap:ut,of:e.of,chain:ct,filter:lt,filterMap:ft,partition:ht,partitionMap:dt,mapWithIndex:st,partitionMapWithIndex:vt,partitionWithIndex:pt,filterMapWithIndex:St,filterWithIndex:At,alt:mt,zero:e.zero,unfold:e.unfold,reduce:gt,foldMap:yt,reduceRight:bt,traverse:Ct,sequence:e.sequence,reduceWithIndex:wt,foldMapWithIndex:xt,reduceRightWithIndex:kt,traverseWithIndex:Ot,extend:Mt,wither:It,wilt:Rt}}));var Xp=function(t){var e=t.content;if(e&&e.length>0){for(var n=0,i=e;n<i.length;n++){var o=i[n];if(p(o))return r("stencila-image-plotly",{config:o.config,data:o.data,layout:o.layout},r("picture",null,r("stencila-image-object",{image:t})));if(v(o)){return r("stencila-image-vega",{spec:o.spec,options:o.options},r("picture",null,r("stencila-image-object",{image:t})))}}}return r("stencila-image-object",{image:t})};var Yp="*.sc-stencila-node-list-default,.sc-stencila-node-list-default:after,.sc-stencila-node-list-default:before{border:0 solid;-webkit-box-sizing:border-box;box-sizing:border-box}html.sc-stencila-node-list-default{font-size:16px}.hidden.sc-stencila-node-list-default{display:none}code.sc-stencila-node-list-default,code[class*=language-].sc-stencila-node-list-default,output.sc-stencila-node-list-default{font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:75%}pre.sc-stencila-node-list-default{border:1px solid #cfd2e1;border-color:var(--color-neutral-100,#cfd2e1);border-radius:.25rem;margin:.5rem;overflow:auto;padding:.5rem}.sc-stencila-node-list-default-h,stencila-node-list.sc-stencila-node-list-default{display:block}.sc-stencila-node-list-default-h .hidden.sc-stencila-node-list-default+.sc-stencila-node-list-default:nth-child(2),.sc-stencila-node-list-default-h>.sc-stencila-node-list-default:first-child,stencila-node-list.sc-stencila-node-list-default .hidden.sc-stencila-node-list-default+.sc-stencila-node-list-default:nth-child(2),stencila-node-list.sc-stencila-node-list-default>.sc-stencila-node-list-default:first-child{border-top-width:0;margin-top:0;padding-top:0}.sc-stencila-node-list-default-h>.sc-stencila-node-list-default:last-child,stencila-node-list.sc-stencila-node-list-default>.sc-stencila-node-list-default:last-child{margin-bottom:0}.sc-stencila-node-list-default-h .hidden.sc-stencila-node-list-default,stencila-node-list.sc-stencila-node-list-default .hidden.sc-stencila-node-list-default{display:none}.sc-stencila-node-list-default-h .emptyContentMessage.sc-stencila-node-list-default,stencila-node-list.sc-stencila-node-list-default .emptyContentMessage.sc-stencila-node-list-default{color:#6e7591;color:var(--color-neutral-500,#6e7591);font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:1rem;line-height:1.5rem}.sc-stencila-node-list-default-h stencila-code-error.sc-stencila-node-list-default,stencila-node-list.sc-stencila-node-list-default stencila-code-error.sc-stencila-node-list-default{border-width:0}.sc-stencila-node-list-default-h stencila-image-object.sc-stencila-node-list-default,stencila-node-list.sc-stencila-node-list-default stencila-image-object.sc-stencila-node-list-default{display:block;height:auto;max-width:100%}.sc-stencila-node-list-default-h .sc-stencila-node-list-default-s>[slot=outputs],.sc-stencila-node-list-default-h>*.sc-stencila-node-list-default,.sc-stencila-node-list-default-h figure.sc-stencila-node-list-default,stencila-node-list.sc-stencila-node-list-default-s>[slot=outputs],stencila-node-list .sc-stencila-node-list-default-s>[slot=outputs],stencila-node-list.sc-stencila-node-list-default>*.sc-stencila-node-list-default,stencila-node-list.sc-stencila-node-list-default figure.sc-stencila-node-list-default{margin:0;overflow:auto;padding:0}.sc-stencila-node-list-default-h .sc-stencila-node-list-default-s>[slot=outputs]:first-child,.sc-stencila-node-list-default-h>.sc-stencila-node-list-default:first-child,.sc-stencila-node-list-default-h figure.sc-stencila-node-list-default:first-child,stencila-node-list.sc-stencila-node-list-default-s>[slot=outputs]:first-child,stencila-node-list .sc-stencila-node-list-default-s>[slot=outputs]:first-child,stencila-node-list.sc-stencila-node-list-default>.sc-stencila-node-list-default:first-child,stencila-node-list.sc-stencila-node-list-default figure.sc-stencila-node-list-default:first-child{margin-top:0}.sc-stencila-node-list-default-h .sc-stencila-node-list-default-s>[slot=outputs] pre,.sc-stencila-node-list-default-h>*.sc-stencila-node-list-default pre.sc-stencila-node-list-default,.sc-stencila-node-list-default-h figure.sc-stencila-node-list-default pre.sc-stencila-node-list-default,stencila-node-list.sc-stencila-node-list-default-s>[slot=outputs] pre,stencila-node-list .sc-stencila-node-list-default-s>[slot=outputs] pre,stencila-node-list.sc-stencila-node-list-default>*.sc-stencila-node-list-default pre.sc-stencila-node-list-default,stencila-node-list.sc-stencila-node-list-default figure.sc-stencila-node-list-default pre.sc-stencila-node-list-default{border-width:0;margin:0;padding:0}.sc-stencila-node-list-default-h .sc-stencila-node-list-default-s>[slot=outputs]>:not(figcaption),.sc-stencila-node-list-default-h>*.sc-stencila-node-list-default>.sc-stencila-node-list-default:not(figcaption),.sc-stencila-node-list-default-h figure.sc-stencila-node-list-default>.sc-stencila-node-list-default:not(figcaption),stencila-node-list.sc-stencila-node-list-default-s>[slot=outputs]>:not(figcaption),stencila-node-list .sc-stencila-node-list-default-s>[slot=outputs]>:not(figcaption),stencila-node-list.sc-stencila-node-list-default>*.sc-stencila-node-list-default>.sc-stencila-node-list-default:not(figcaption),stencila-node-list.sc-stencila-node-list-default figure.sc-stencila-node-list-default>.sc-stencila-node-list-default:not(figcaption){margin-bottom:.75rem;margin-top:.75rem;padding-top:.75rem}.sc-stencila-node-list-default-h .sc-stencila-node-list-default-s>[slot=outputs]>:not(figcaption):first-child,.sc-stencila-node-list-default-h>*.sc-stencila-node-list-default>.sc-stencila-node-list-default:not(figcaption):first-child,.sc-stencila-node-list-default-h figure.sc-stencila-node-list-default>.sc-stencila-node-list-default:not(figcaption):first-child,stencila-node-list.sc-stencila-node-list-default-s>[slot=outputs]>:not(figcaption):first-child,stencila-node-list .sc-stencila-node-list-default-s>[slot=outputs]>:not(figcaption):first-child,stencila-node-list.sc-stencila-node-list-default>*.sc-stencila-node-list-default>.sc-stencila-node-list-default:not(figcaption):first-child,stencila-node-list.sc-stencila-node-list-default figure.sc-stencila-node-list-default>.sc-stencila-node-list-default:not(figcaption):first-child{margin-top:0;padding-top:0}.sc-stencila-node-list-default-h .sc-stencila-node-list-default-s>[slot=outputs]>:not(figcaption):last-child,.sc-stencila-node-list-default-h>*.sc-stencila-node-list-default>.sc-stencila-node-list-default:not(figcaption):last-child,.sc-stencila-node-list-default-h figure.sc-stencila-node-list-default>.sc-stencila-node-list-default:not(figcaption):last-child,stencila-node-list.sc-stencila-node-list-default-s>[slot=outputs]>:not(figcaption):last-child,stencila-node-list .sc-stencila-node-list-default-s>[slot=outputs]>:not(figcaption):last-child,stencila-node-list.sc-stencila-node-list-default>*.sc-stencila-node-list-default>.sc-stencila-node-list-default:not(figcaption):last-child,stencila-node-list.sc-stencila-node-list-default figure.sc-stencila-node-list-default>.sc-stencila-node-list-default:not(figcaption):last-child{margin-bottom:0}";var Qp="*.sc-stencila-node-list-material,.sc-stencila-node-list-material:after,.sc-stencila-node-list-material:before{border:0 solid;-webkit-box-sizing:border-box;box-sizing:border-box}html.sc-stencila-node-list-material{font-size:16px}.hidden.sc-stencila-node-list-material{display:none}code.sc-stencila-node-list-material,code[class*=language-].sc-stencila-node-list-material,output.sc-stencila-node-list-material{font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:75%}pre.sc-stencila-node-list-material{border:1px solid #cfd2e1;border-color:var(--color-neutral-100,#cfd2e1);border-radius:.25rem;margin:.5rem;overflow:auto;padding:.5rem}.sc-stencila-node-list-material-h,stencila-node-list.sc-stencila-node-list-material{display:block}.sc-stencila-node-list-material-h .hidden.sc-stencila-node-list-material+.sc-stencila-node-list-material:nth-child(2),.sc-stencila-node-list-material-h>.sc-stencila-node-list-material:first-child,stencila-node-list.sc-stencila-node-list-material .hidden.sc-stencila-node-list-material+.sc-stencila-node-list-material:nth-child(2),stencila-node-list.sc-stencila-node-list-material>.sc-stencila-node-list-material:first-child{border-top-width:0;margin-top:0;padding-top:0}.sc-stencila-node-list-material-h>.sc-stencila-node-list-material:last-child,stencila-node-list.sc-stencila-node-list-material>.sc-stencila-node-list-material:last-child{margin-bottom:0}.sc-stencila-node-list-material-h .hidden.sc-stencila-node-list-material,stencila-node-list.sc-stencila-node-list-material .hidden.sc-stencila-node-list-material{display:none}.sc-stencila-node-list-material-h .emptyContentMessage.sc-stencila-node-list-material,stencila-node-list.sc-stencila-node-list-material .emptyContentMessage.sc-stencila-node-list-material{color:#6e7591;color:var(--color-neutral-500,#6e7591);font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:1rem;line-height:1.5rem}.sc-stencila-node-list-material-h stencila-code-error.sc-stencila-node-list-material,stencila-node-list.sc-stencila-node-list-material stencila-code-error.sc-stencila-node-list-material{border-width:0}.sc-stencila-node-list-material-h stencila-image-object.sc-stencila-node-list-material,stencila-node-list.sc-stencila-node-list-material stencila-image-object.sc-stencila-node-list-material{display:block;height:auto;max-width:100%}.sc-stencila-node-list-material-h .sc-stencila-node-list-material-s>[slot=outputs],.sc-stencila-node-list-material-h>*.sc-stencila-node-list-material,.sc-stencila-node-list-material-h figure.sc-stencila-node-list-material,stencila-node-list.sc-stencila-node-list-material-s>[slot=outputs],stencila-node-list .sc-stencila-node-list-material-s>[slot=outputs],stencila-node-list.sc-stencila-node-list-material>*.sc-stencila-node-list-material,stencila-node-list.sc-stencila-node-list-material figure.sc-stencila-node-list-material{margin:0;overflow:auto;padding:0}.sc-stencila-node-list-material-h .sc-stencila-node-list-material-s>[slot=outputs]:first-child,.sc-stencila-node-list-material-h>.sc-stencila-node-list-material:first-child,.sc-stencila-node-list-material-h figure.sc-stencila-node-list-material:first-child,stencila-node-list.sc-stencila-node-list-material-s>[slot=outputs]:first-child,stencila-node-list .sc-stencila-node-list-material-s>[slot=outputs]:first-child,stencila-node-list.sc-stencila-node-list-material>.sc-stencila-node-list-material:first-child,stencila-node-list.sc-stencila-node-list-material figure.sc-stencila-node-list-material:first-child{margin-top:0}.sc-stencila-node-list-material-h .sc-stencila-node-list-material-s>[slot=outputs] pre,.sc-stencila-node-list-material-h>*.sc-stencila-node-list-material pre.sc-stencila-node-list-material,.sc-stencila-node-list-material-h figure.sc-stencila-node-list-material pre.sc-stencila-node-list-material,stencila-node-list.sc-stencila-node-list-material-s>[slot=outputs] pre,stencila-node-list .sc-stencila-node-list-material-s>[slot=outputs] pre,stencila-node-list.sc-stencila-node-list-material>*.sc-stencila-node-list-material pre.sc-stencila-node-list-material,stencila-node-list.sc-stencila-node-list-material figure.sc-stencila-node-list-material pre.sc-stencila-node-list-material{border-width:0;margin:0;padding:0}.sc-stencila-node-list-material-h .sc-stencila-node-list-material-s>[slot=outputs]>:not(figcaption),.sc-stencila-node-list-material-h>*.sc-stencila-node-list-material>.sc-stencila-node-list-material:not(figcaption),.sc-stencila-node-list-material-h figure.sc-stencila-node-list-material>.sc-stencila-node-list-material:not(figcaption),stencila-node-list.sc-stencila-node-list-material-s>[slot=outputs]>:not(figcaption),stencila-node-list .sc-stencila-node-list-material-s>[slot=outputs]>:not(figcaption),stencila-node-list.sc-stencila-node-list-material>*.sc-stencila-node-list-material>.sc-stencila-node-list-material:not(figcaption),stencila-node-list.sc-stencila-node-list-material figure.sc-stencila-node-list-material>.sc-stencila-node-list-material:not(figcaption){margin-bottom:.75rem;margin-top:.75rem;padding-top:.75rem}.sc-stencila-node-list-material-h .sc-stencila-node-list-material-s>[slot=outputs]>:not(figcaption):first-child,.sc-stencila-node-list-material-h>*.sc-stencila-node-list-material>.sc-stencila-node-list-material:not(figcaption):first-child,.sc-stencila-node-list-material-h figure.sc-stencila-node-list-material>.sc-stencila-node-list-material:not(figcaption):first-child,stencila-node-list.sc-stencila-node-list-material-s>[slot=outputs]>:not(figcaption):first-child,stencila-node-list .sc-stencila-node-list-material-s>[slot=outputs]>:not(figcaption):first-child,stencila-node-list.sc-stencila-node-list-material>*.sc-stencila-node-list-material>.sc-stencila-node-list-material:not(figcaption):first-child,stencila-node-list.sc-stencila-node-list-material figure.sc-stencila-node-list-material>.sc-stencila-node-list-material:not(figcaption):first-child{margin-top:0;padding-top:0}.sc-stencila-node-list-material-h .sc-stencila-node-list-material-s>[slot=outputs]>:not(figcaption):last-child,.sc-stencila-node-list-material-h>*.sc-stencila-node-list-material>.sc-stencila-node-list-material:not(figcaption):last-child,.sc-stencila-node-list-material-h figure.sc-stencila-node-list-material>.sc-stencila-node-list-material:not(figcaption):last-child,stencila-node-list.sc-stencila-node-list-material-s>[slot=outputs]>:not(figcaption):last-child,stencila-node-list .sc-stencila-node-list-material-s>[slot=outputs]>:not(figcaption):last-child,stencila-node-list.sc-stencila-node-list-material>*.sc-stencila-node-list-material>.sc-stencila-node-list-material:not(figcaption):last-child,stencila-node-list.sc-stencila-node-list-material figure.sc-stencila-node-list-material>.sc-stencila-node-list-material:not(figcaption):last-child{margin-bottom:0}";var Zp={nodes:"outputs",errors:"errors"};var tv=t("O",function(){function t(t){var e=this;n(this,t);this.nodes=undefined;this.isEmpty=this.nodes===undefined||this.nodes!==undefined&&$p.isEmpty(this.nodes);this.checkIfEmpty=function(){var t;var n;if(e.nodes!==undefined){n=$p.isEmpty(e.nodes);e.isEmpty=n;return n}n=e.el.children.length===0||Array.from((t=e.el.children)!==null&&t!==void 0?t:[]).reduce((function(t,e){return t+e.innerHTML.trim()}),"")==="";e.isEmpty=n;return n};this.emptyOutputMessage="No output to show";this.renderNodes=function(t){return t===null||t===void 0?void 0:t.map((function(t){return e.renderNode(t)}))};this.renderNode=function(t){if(u(t)){var e=typeof t==="string"||typeof t==="number"?t:JSON.stringify(t);return r("pre",null,r("output",null,e))}else if(c("CodeTypes",t)){return r("pre",null,r("output",null,t.text))}else if(l("ImageObject",t)){return Xp(t)}else if(l("Datatable",t)){return r("stencila-data-table",{table:t})}return JSON.stringify(t)}}t.prototype.componentWillLoad=function(){this.checkIfEmpty()};t.prototype.componentWillUpdate=function(){this.checkIfEmpty()};t.prototype.render=function(){return r(a,null,r("div",{class:{hidden:this.nodes!==undefined,slot:true}},r("slot",{name:Zp.nodes})),this.isEmpty&&r("em",{class:"emptyContentMessage"},this.emptyOutputMessage),!this.isEmpty&&r("figure",null,this.renderNodes(this.nodes)),r("slot",null))};Object.defineProperty(t.prototype,"el",{get:function(){return i(this)},enumerable:false,configurable:true});return t}());tv.style={default:Yp,material:Qp}}}}));