import{r as e,c,h as t,H as i,a}from"./p-ca64077e.js";import{s as n}from"./p-5bfddd9d.js";const s=class{constructor(t){e(this,t),this.setAllCodeVisibility=c(this,"setAllCodeVisibility",7),this.setEditorLayout=c(this,"setEditorLayout",7),this.autofocus=!1,this.isCodeVisible=!1,this.keymap=[],this.executeCodeState="INITIAL",this.isStacked=!0,this.codeErrors=[],this.isCodeVisibleState=this.isCodeVisible,this.toggleCodeVisibility=e=>{e.preventDefault(),e.shiftKey?this.toggleAllCodeVisibility():this.isCodeVisibleState=!this.isCodeVisibleState},this.toggleAllCodeVisibility=()=>this.setAllCodeVisibilityHandler(!this.isCodeVisibleState),this.onExecuteHandler=async()=>{this.executeCodeState="PENDING";const e=await this.getContents();if(void 0!==this.executeHandler){const c=await this.executeHandler(e);return this.executeCodeState="RESOLVED",this.codeErrors=c.errors,this.outputs=c.outputs,c}return this.executeCodeState="RESOLVED",e},this.setEditorLayoutHandler=e=>{this.isStacked=e},this.toggleEditorLayout=e=>{e.preventDefault(),e.shiftKey?this.setEditorLayout.emit({isStacked:!this.isStacked}):this.setEditorLayoutHandler(!this.isStacked)},this.executeRef=()=>this.execute(),this.setCodeVisibility=e=>{this.isCodeVisibleState=e.detail.isVisible}}onSetAllCodeVisibility(e){this.setCodeVisibility(e)}onSetEditorLayout(e){this.setEditorLayoutHandler(e.detail.isStacked)}componentWillLoad(){this.isStacked=this.el.getBoundingClientRect().width<1200}componentDidLoad(){this.editorRef=this.el.querySelector("stencila-editor")}async getContents(){var e;if(this.editorRef){const{text:c,language:t}=await(null===(e=this.editorRef)||void 0===e?void 0:e.getContents());return n({text:c,programmingLanguage:t})}return n({text:""})}async execute(){this.executeCodeState="PENDING";try{const e=await this.onExecuteHandler();return window.setTimeout((()=>this.executeCodeState="RESOLVED"),250),e}catch(e){return console.error(e),this.executeCodeState="RESOLVED",e}}setAllCodeVisibilityHandler(e){this.setAllCodeVisibility.emit({isVisible:e})}render(){return t(i,{class:{isCodeVisible:this.isCodeVisibleState,isStacked:this.isStacked}},t("stencila-action-menu",null,void 0!==this.executeHandler&&t("stencila-button",{icon:"play",minimal:!0,color:"key",class:"run",size:"xsmall",tooltip:"Run",iconOnly:!0,slot:"persistentActions",onClick:this.executeRef,isLoading:"PENDING"===this.executeCodeState}),t("stencila-button",{minimal:!0,color:"key",class:"sourceToggle",onClick:this.toggleCodeVisibility,icon:this.isCodeVisibleState?"eye-off":"eye",iconOnly:!0,size:"xsmall",slot:"persistentActions",tooltip:(this.isCodeVisibleState?"Hide":"Show")+" Code\nShift click to set for all code blocks"}),this.isCodeVisibleState&&t("stencila-button",{minimal:!0,color:"key",class:"layoutToggle",onClick:this.toggleEditorLayout,icon:this.isStacked?"layout-column":"layout-row",iconOnly:!0,size:"xsmall",slot:"persistentActions",tooltip:(this.isStacked?"Side by side":"Stacked")+" view\nShift click to set for all code blocks"})),t("div",null,t("div",{class:{editorContainer:!0,hidden:!this.isCodeVisibleState}},t("stencila-editor",{activeLanguage:this.programmingLanguageProp,autofocus:this.autofocus,executeHandler:this.onExecuteHandler,keymap:this.keymap,readOnly:void 0===this.executeHandler,errors:this.codeErrors},t("slot",{name:s.slots.text}))),t("stencila-node-list",{nodes:this.outputs},t("slot",{name:s.slots.outputs}))))}get el(){return a(this)}};s.slots={text:"text",outputs:"outputs"},s.style={default:"*.sc-stencila-code-chunk-default,.sc-stencila-code-chunk-default:after,.sc-stencila-code-chunk-default:before{border:0 solid;-webkit-box-sizing:border-box;box-sizing:border-box}html.sc-stencila-code-chunk-default{font-size:16px}.hidden.sc-stencila-code-chunk-default{display:none}code.sc-stencila-code-chunk-default,code[class*=language-].sc-stencila-code-chunk-default,output.sc-stencila-code-chunk-default{font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:75%}pre.sc-stencila-code-chunk-default{border:1px solid #cfd2e1;border-color:var(--color-neutral-100,#cfd2e1);border-radius:.25rem;margin:.5rem;overflow:auto;padding:.5rem}.preReset.sc-stencila-code-chunk-default{border-width:0;margin:0;padding:0}.sc-stencila-code-chunk-default-h,stencila-code-chunk.sc-stencila-code-chunk-default{--background:var(--color-stock,#fff);--background-editor:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0)}.sc-stencila-code-chunk-default-h,stencila-code-chunk.sc-stencila-code-chunk-default{border-radius:.25rem;border-style:solid;border-width:1px;display:block;margin-bottom:1rem;margin-top:1rem;overflow:hidden;position:relative;width:100%}.sc-stencila-code-chunk-default-h,stencila-code-chunk.sc-stencila-code-chunk-default{border-color:var(--border)}.sc-stencila-code-chunk-default-h stencila-action-menu.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default stencila-action-menu.sc-stencila-code-chunk-default{border-left-width:0;border-radius:0;border-right-width:0;display:block;padding:0;position:relative;width:100%}.sc-stencila-code-chunk-default-h stencila-editor.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default stencila-editor.sc-stencila-code-chunk-default{--border-width:0;-ms-flex-positive:1;flex-grow:1}.sc-stencila-code-chunk-default-h stencila-node-list.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default stencila-node-list.sc-stencila-code-chunk-default{background-color:var(--background);margin:0;padding:.5rem}.sc-stencila-code-chunk-default-h .layoutToggle.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default .layoutToggle.sc-stencila-code-chunk-default{display:none}@media (min-width:1024px){.sc-stencila-code-chunk-default-h .layoutToggle.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default .layoutToggle.sc-stencila-code-chunk-default{display:inline-block}}.editorContainer.sc-stencila-code-chunk-default{background:var(--background-editor);border-color:var(--border);border-radius:0;border-width:0 0 1px;display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;-ms-flex-direction:column;flex-direction:column;height:intrinsic;margin:0;position:relative}.editorContainer.sc-stencila-code-chunk-default pre.sc-stencila-code-chunk-default,.editorContainer.sc-stencila-code-chunk-default pre[class*=language-].sc-stencila-code-chunk-default{background-color:transparent}.editorContainer.hidden.sc-stencila-code-chunk-default{display:none}@media (min-width:1024px){.sc-stencila-code-chunk-default-h:not(.isStacked)>div.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default:not(.isStacked)>div.sc-stencila-code-chunk-default{-ms-flex-align:stretch;align-items:stretch;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.sc-stencila-code-chunk-default-h:not(.isStacked)>div.sc-stencila-code-chunk-default .editorContainer.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default:not(.isStacked)>div.sc-stencila-code-chunk-default .editorContainer.sc-stencila-code-chunk-default{border-bottom-width:0;border-right-width:1px;width:50%}.sc-stencila-code-chunk-default-h:not(.isStacked)>div.sc-stencila-code-chunk-default stencila-node-list.sc-stencila-code-chunk-default,stencila-code-chunk.sc-stencila-code-chunk-default:not(.isStacked)>div.sc-stencila-code-chunk-default stencila-node-list.sc-stencila-code-chunk-default{-ms-flex-positive:1;flex-grow:1;width:50%}}",material:"*.sc-stencila-code-chunk-material,.sc-stencila-code-chunk-material:after,.sc-stencila-code-chunk-material:before{border:0 solid;-webkit-box-sizing:border-box;box-sizing:border-box}html.sc-stencila-code-chunk-material{font-size:16px}.hidden.sc-stencila-code-chunk-material{display:none}code.sc-stencila-code-chunk-material,code[class*=language-].sc-stencila-code-chunk-material,output.sc-stencila-code-chunk-material{font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:75%}pre.sc-stencila-code-chunk-material{border:1px solid #cfd2e1;border-color:var(--color-neutral-100,#cfd2e1);border-radius:.25rem;margin:.5rem;overflow:auto;padding:.5rem}.preReset.sc-stencila-code-chunk-material{border-width:0;margin:0;padding:0}.sc-stencila-code-chunk-material-h,stencila-code-chunk.sc-stencila-code-chunk-material{--background:var(--color-stock,#fff);--background-editor:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0)}.sc-stencila-code-chunk-material-h,stencila-code-chunk.sc-stencila-code-chunk-material{border-radius:.25rem;border-style:solid;border-width:1px;display:block;margin-bottom:1rem;margin-top:1rem;overflow:hidden;position:relative;width:100%}.sc-stencila-code-chunk-material-h,stencila-code-chunk.sc-stencila-code-chunk-material{border-color:var(--border)}.sc-stencila-code-chunk-material-h stencila-action-menu.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material stencila-action-menu.sc-stencila-code-chunk-material{border-left-width:0;border-radius:0;border-right-width:0;display:block;padding:0;position:relative;width:100%}.sc-stencila-code-chunk-material-h stencila-editor.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material stencila-editor.sc-stencila-code-chunk-material{--border-width:0;-ms-flex-positive:1;flex-grow:1}.sc-stencila-code-chunk-material-h stencila-node-list.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material stencila-node-list.sc-stencila-code-chunk-material{background-color:var(--background);margin:0;padding:.5rem}.sc-stencila-code-chunk-material-h .layoutToggle.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material .layoutToggle.sc-stencila-code-chunk-material{display:none}@media (min-width:1024px){.sc-stencila-code-chunk-material-h .layoutToggle.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material .layoutToggle.sc-stencila-code-chunk-material{display:inline-block}}.editorContainer.sc-stencila-code-chunk-material{background:var(--background-editor);border-color:var(--border);border-radius:0;border-width:0 0 1px;display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;-ms-flex-direction:column;flex-direction:column;height:intrinsic;margin:0;position:relative}.editorContainer.sc-stencila-code-chunk-material pre.sc-stencila-code-chunk-material,.editorContainer.sc-stencila-code-chunk-material pre[class*=language-].sc-stencila-code-chunk-material{background-color:transparent}.editorContainer.hidden.sc-stencila-code-chunk-material{display:none}@media (min-width:1024px){.sc-stencila-code-chunk-material-h:not(.isStacked)>div.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material:not(.isStacked)>div.sc-stencila-code-chunk-material{-ms-flex-align:stretch;align-items:stretch;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.sc-stencila-code-chunk-material-h:not(.isStacked)>div.sc-stencila-code-chunk-material .editorContainer.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material:not(.isStacked)>div.sc-stencila-code-chunk-material .editorContainer.sc-stencila-code-chunk-material{border-bottom-width:0;border-right-width:1px;width:50%}.sc-stencila-code-chunk-material-h:not(.isStacked)>div.sc-stencila-code-chunk-material stencila-node-list.sc-stencila-code-chunk-material,stencila-code-chunk.sc-stencila-code-chunk-material:not(.isStacked)>div.sc-stencila-code-chunk-material stencila-node-list.sc-stencila-code-chunk-material{-ms-flex-positive:1;flex-grow:1;width:50%}}"};export{s as stencila_code_chunk}